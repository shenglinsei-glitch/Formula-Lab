(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))p(v);new MutationObserver(v=>{for(const z of v)if(z.type==="childList")for(const S of z.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&p(S)}).observe(document,{childList:!0,subtree:!0});function a(v){const z={};return v.integrity&&(z.integrity=v.integrity),v.referrerPolicy&&(z.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?z.credentials="include":v.crossOrigin==="anonymous"?z.credentials="omit":z.credentials="same-origin",z}function p(v){if(v.ep)return;v.ep=!0;const z=a(v);fetch(v.href,z)}})();function af(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var li={exports:{}},dl={},si={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vu;function uf(){if(Vu)return Fe;Vu=1;var g=Symbol.for("react.element"),c=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),S=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),U=Symbol.iterator;function F(h){return h===null||typeof h!="object"?null:(h=U&&h[U]||h["@@iterator"],typeof h=="function"?h:null)}var se={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,B={};function ne(h,y,Q){this.props=h,this.context=y,this.refs=B,this.updater=Q||se}ne.prototype.isReactComponent={},ne.prototype.setState=function(h,y){if(typeof h!="object"&&typeof h!="function"&&h!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,h,y,"setState")},ne.prototype.forceUpdate=function(h){this.updater.enqueueForceUpdate(this,h,"forceUpdate")};function ve(){}ve.prototype=ne.prototype;function ee(h,y,Q){this.props=h,this.context=y,this.refs=B,this.updater=Q||se}var O=ee.prototype=new ve;O.constructor=ee,X(O,ne.prototype),O.isPureReactComponent=!0;var _=Array.isArray,A=Object.prototype.hasOwnProperty,M={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function oe(h,y,Q){var x,b={},q=null,P=null;if(y!=null)for(x in y.ref!==void 0&&(P=y.ref),y.key!==void 0&&(q=""+y.key),y)A.call(y,x)&&!D.hasOwnProperty(x)&&(b[x]=y[x]);var V=arguments.length-2;if(V===1)b.children=Q;else if(1<V){for(var ce=Array(V),Ne=0;Ne<V;Ne++)ce[Ne]=arguments[Ne+2];b.children=ce}if(h&&h.defaultProps)for(x in V=h.defaultProps,V)b[x]===void 0&&(b[x]=V[x]);return{$$typeof:g,type:h,key:q,ref:P,props:b,_owner:M.current}}function Ce(h,y){return{$$typeof:g,type:h.type,key:y,ref:h.ref,props:h.props,_owner:h._owner}}function Y(h){return typeof h=="object"&&h!==null&&h.$$typeof===g}function xe(h){var y={"=":"=0",":":"=2"};return"$"+h.replace(/[=:]/g,function(Q){return y[Q]})}var je=/\/+/g;function Ee(h,y){return typeof h=="object"&&h!==null&&h.key!=null?xe(""+h.key):y.toString(36)}function $(h,y,Q,x,b){var q=typeof h;(q==="undefined"||q==="boolean")&&(h=null);var P=!1;if(h===null)P=!0;else switch(q){case"string":case"number":P=!0;break;case"object":switch(h.$$typeof){case g:case c:P=!0}}if(P)return P=h,b=b(P),h=x===""?"."+Ee(P,0):x,_(b)?(Q="",h!=null&&(Q=h.replace(je,"$&/")+"/"),$(b,y,Q,"",function(Ne){return Ne})):b!=null&&(Y(b)&&(b=Ce(b,Q+(!b.key||P&&P.key===b.key?"":(""+b.key).replace(je,"$&/")+"/")+h)),y.push(b)),1;if(P=0,x=x===""?".":x+":",_(h))for(var V=0;V<h.length;V++){q=h[V];var ce=x+Ee(q,V);P+=$(q,y,Q,ce,b)}else if(ce=F(h),typeof ce=="function")for(h=ce.call(h),V=0;!(q=h.next()).done;)q=q.value,ce=x+Ee(q,V++),P+=$(q,y,Q,ce,b);else if(q==="object")throw y=String(h),Error("Objects are not valid as a React child (found: "+(y==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":y)+"). If you meant to render a collection of children, use an array instead.");return P}function Z(h,y,Q){if(h==null)return h;var x=[],b=0;return $(h,x,"","",function(q){return y.call(Q,q,b++)}),x}function pe(h){if(h._status===-1){var y=h._result;y=y(),y.then(function(Q){(h._status===0||h._status===-1)&&(h._status=1,h._result=Q)},function(Q){(h._status===0||h._status===-1)&&(h._status=2,h._result=Q)}),h._status===-1&&(h._status=0,h._result=y)}if(h._status===1)return h._result.default;throw h._result}var re={current:null},H={transition:null},ae={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:H,ReactCurrentOwner:M};function le(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:Z,forEach:function(h,y,Q){Z(h,function(){y.apply(this,arguments)},Q)},count:function(h){var y=0;return Z(h,function(){y++}),y},toArray:function(h){return Z(h,function(y){return y})||[]},only:function(h){if(!Y(h))throw Error("React.Children.only expected to receive a single React element child.");return h}},Fe.Component=ne,Fe.Fragment=a,Fe.Profiler=v,Fe.PureComponent=ee,Fe.StrictMode=p,Fe.Suspense=N,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,Fe.act=le,Fe.cloneElement=function(h,y,Q){if(h==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+h+".");var x=X({},h.props),b=h.key,q=h.ref,P=h._owner;if(y!=null){if(y.ref!==void 0&&(q=y.ref,P=M.current),y.key!==void 0&&(b=""+y.key),h.type&&h.type.defaultProps)var V=h.type.defaultProps;for(ce in y)A.call(y,ce)&&!D.hasOwnProperty(ce)&&(x[ce]=y[ce]===void 0&&V!==void 0?V[ce]:y[ce])}var ce=arguments.length-2;if(ce===1)x.children=Q;else if(1<ce){V=Array(ce);for(var Ne=0;Ne<ce;Ne++)V[Ne]=arguments[Ne+2];x.children=V}return{$$typeof:g,type:h.type,key:b,ref:q,props:x,_owner:P}},Fe.createContext=function(h){return h={$$typeof:S,_currentValue:h,_currentValue2:h,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},h.Provider={$$typeof:z,_context:h},h.Consumer=h},Fe.createElement=oe,Fe.createFactory=function(h){var y=oe.bind(null,h);return y.type=h,y},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(h){return{$$typeof:E,render:h}},Fe.isValidElement=Y,Fe.lazy=function(h){return{$$typeof:L,_payload:{_status:-1,_result:h},_init:pe}},Fe.memo=function(h,y){return{$$typeof:d,type:h,compare:y===void 0?null:y}},Fe.startTransition=function(h){var y=H.transition;H.transition={};try{h()}finally{H.transition=y}},Fe.unstable_act=le,Fe.useCallback=function(h,y){return re.current.useCallback(h,y)},Fe.useContext=function(h){return re.current.useContext(h)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(h){return re.current.useDeferredValue(h)},Fe.useEffect=function(h,y){return re.current.useEffect(h,y)},Fe.useId=function(){return re.current.useId()},Fe.useImperativeHandle=function(h,y,Q){return re.current.useImperativeHandle(h,y,Q)},Fe.useInsertionEffect=function(h,y){return re.current.useInsertionEffect(h,y)},Fe.useLayoutEffect=function(h,y){return re.current.useLayoutEffect(h,y)},Fe.useMemo=function(h,y){return re.current.useMemo(h,y)},Fe.useReducer=function(h,y,Q){return re.current.useReducer(h,y,Q)},Fe.useRef=function(h){return re.current.useRef(h)},Fe.useState=function(h){return re.current.useState(h)},Fe.useSyncExternalStore=function(h,y,Q){return re.current.useSyncExternalStore(h,y,Q)},Fe.useTransition=function(){return re.current.useTransition()},Fe.version="18.3.1",Fe}var Wu;function ci(){return Wu||(Wu=1,si.exports=uf()),si.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ku;function cf(){if(Ku)return dl;Ku=1;var g=ci(),c=Symbol.for("react.element"),a=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,v=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,z={key:!0,ref:!0,__self:!0,__source:!0};function S(E,N,d){var L,U={},F=null,se=null;d!==void 0&&(F=""+d),N.key!==void 0&&(F=""+N.key),N.ref!==void 0&&(se=N.ref);for(L in N)p.call(N,L)&&!z.hasOwnProperty(L)&&(U[L]=N[L]);if(E&&E.defaultProps)for(L in N=E.defaultProps,N)U[L]===void 0&&(U[L]=N[L]);return{$$typeof:c,type:E,key:F,ref:se,props:U,_owner:v.current}}return dl.Fragment=a,dl.jsx=S,dl.jsxs=S,dl}var Qu;function df(){return Qu||(Qu=1,li.exports=cf()),li.exports}var l=df(),vs={},oi={exports:{}},Et={},ii={exports:{}},ai={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qu;function ff(){return qu||(qu=1,(function(g){function c(H,ae){var le=H.length;H.push(ae);e:for(;0<le;){var h=le-1>>>1,y=H[h];if(0<v(y,ae))H[h]=ae,H[le]=y,le=h;else break e}}function a(H){return H.length===0?null:H[0]}function p(H){if(H.length===0)return null;var ae=H[0],le=H.pop();if(le!==ae){H[0]=le;e:for(var h=0,y=H.length,Q=y>>>1;h<Q;){var x=2*(h+1)-1,b=H[x],q=x+1,P=H[q];if(0>v(b,le))q<y&&0>v(P,b)?(H[h]=P,H[q]=le,h=q):(H[h]=b,H[x]=le,h=x);else if(q<y&&0>v(P,le))H[h]=P,H[q]=le,h=q;else break e}}return ae}function v(H,ae){var le=H.sortIndex-ae.sortIndex;return le!==0?le:H.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var z=performance;g.unstable_now=function(){return z.now()}}else{var S=Date,E=S.now();g.unstable_now=function(){return S.now()-E}}var N=[],d=[],L=1,U=null,F=3,se=!1,X=!1,B=!1,ne=typeof setTimeout=="function"?setTimeout:null,ve=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(H){for(var ae=a(d);ae!==null;){if(ae.callback===null)p(d);else if(ae.startTime<=H)p(d),ae.sortIndex=ae.expirationTime,c(N,ae);else break;ae=a(d)}}function _(H){if(B=!1,O(H),!X)if(a(N)!==null)X=!0,pe(A);else{var ae=a(d);ae!==null&&re(_,ae.startTime-H)}}function A(H,ae){X=!1,B&&(B=!1,ve(oe),oe=-1),se=!0;var le=F;try{for(O(ae),U=a(N);U!==null&&(!(U.expirationTime>ae)||H&&!xe());){var h=U.callback;if(typeof h=="function"){U.callback=null,F=U.priorityLevel;var y=h(U.expirationTime<=ae);ae=g.unstable_now(),typeof y=="function"?U.callback=y:U===a(N)&&p(N),O(ae)}else p(N);U=a(N)}if(U!==null)var Q=!0;else{var x=a(d);x!==null&&re(_,x.startTime-ae),Q=!1}return Q}finally{U=null,F=le,se=!1}}var M=!1,D=null,oe=-1,Ce=5,Y=-1;function xe(){return!(g.unstable_now()-Y<Ce)}function je(){if(D!==null){var H=g.unstable_now();Y=H;var ae=!0;try{ae=D(!0,H)}finally{ae?Ee():(M=!1,D=null)}}else M=!1}var Ee;if(typeof ee=="function")Ee=function(){ee(je)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Z=$.port2;$.port1.onmessage=je,Ee=function(){Z.postMessage(null)}}else Ee=function(){ne(je,0)};function pe(H){D=H,M||(M=!0,Ee())}function re(H,ae){oe=ne(function(){H(g.unstable_now())},ae)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(H){H.callback=null},g.unstable_continueExecution=function(){X||se||(X=!0,pe(A))},g.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ce=0<H?Math.floor(1e3/H):5},g.unstable_getCurrentPriorityLevel=function(){return F},g.unstable_getFirstCallbackNode=function(){return a(N)},g.unstable_next=function(H){switch(F){case 1:case 2:case 3:var ae=3;break;default:ae=F}var le=F;F=ae;try{return H()}finally{F=le}},g.unstable_pauseExecution=function(){},g.unstable_requestPaint=function(){},g.unstable_runWithPriority=function(H,ae){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var le=F;F=H;try{return ae()}finally{F=le}},g.unstable_scheduleCallback=function(H,ae,le){var h=g.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?h+le:h):le=h,H){case 1:var y=-1;break;case 2:y=250;break;case 5:y=1073741823;break;case 4:y=1e4;break;default:y=5e3}return y=le+y,H={id:L++,callback:ae,priorityLevel:H,startTime:le,expirationTime:y,sortIndex:-1},le>h?(H.sortIndex=le,c(d,H),a(N)===null&&H===a(d)&&(B?(ve(oe),oe=-1):B=!0,re(_,le-h))):(H.sortIndex=y,c(N,H),X||se||(X=!0,pe(A))),H},g.unstable_shouldYield=xe,g.unstable_wrapCallback=function(H){var ae=F;return function(){var le=F;F=ae;try{return H.apply(this,arguments)}finally{F=le}}}})(ai)),ai}var Ju;function mf(){return Ju||(Ju=1,ii.exports=ff()),ii.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yu;function pf(){if(Yu)return Et;Yu=1;var g=ci(),c=mf();function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=new Set,v={};function z(e,t){S(e,t),S(e+"Capture",t)}function S(e,t){for(v[e]=t,e=0;e<t.length;e++)p.add(t[e])}var E=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),N=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L={},U={};function F(e){return N.call(U,e)?!0:N.call(L,e)?!1:d.test(e)?U[e]=!0:(L[e]=!0,!1)}function se(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function X(e,t,n,r){if(t===null||typeof t>"u"||se(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function B(e,t,n,r,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ne[e]=new B(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ne[t]=new B(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ne[e]=new B(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ne[e]=new B(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ne[e]=new B(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){ne[e]=new B(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){ne[e]=new B(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){ne[e]=new B(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){ne[e]=new B(e,5,!1,e.toLowerCase(),null,!1,!1)});var ve=/[\-:]([a-z])/g;function ee(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ve,ee);ne[t]=new B(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ve,ee);ne[t]=new B(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ve,ee);ne[t]=new B(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){ne[e]=new B(e,1,!1,e.toLowerCase(),null,!1,!1)}),ne.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){ne[e]=new B(e,1,!1,e.toLowerCase(),null,!0,!0)});function O(e,t,n,r){var s=ne.hasOwnProperty(t)?ne[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(X(t,n,s,r)&&(n=null),r||s===null?F(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var _=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),M=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),Ce=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),xe=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),H=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}var le=Object.assign,h;function y(e){if(h===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);h=t&&t[1]||""}return`
`+h+e}var Q=!1;function x(e,t){if(!e||Q)return"";Q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var r=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){r=C}e.call(t.prototype)}else{try{throw Error()}catch(C){r=C}e()}}catch(C){if(C&&r&&typeof C.stack=="string"){for(var s=C.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,u=o.length-1;1<=i&&0<=u&&s[i]!==o[u];)u--;for(;1<=i&&0<=u;i--,u--)if(s[i]!==o[u]){if(i!==1||u!==1)do if(i--,u--,0>u||s[i]!==o[u]){var f=`
`+s[i].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=i&&0<=u);break}}}finally{Q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?y(e):""}function b(e){switch(e.tag){case 5:return y(e.type);case 16:return y("Lazy");case 13:return y("Suspense");case 19:return y("SuspenseList");case 0:case 2:case 15:return e=x(e.type,!1),e;case 11:return e=x(e.type.render,!1),e;case 1:return e=x(e.type,!0),e;default:return""}}function q(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case D:return"Fragment";case M:return"Portal";case Ce:return"Profiler";case oe:return"StrictMode";case Ee:return"Suspense";case $:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xe:return(e.displayName||"Context")+".Consumer";case Y:return(e._context.displayName||"Context")+".Provider";case je:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z:return t=e.displayName||null,t!==null?t:q(e.type)||"Memo";case pe:t=e._payload,e=e._init;try{return q(e(t))}catch{}}return null}function P(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ce(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ne(e){var t=ce(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nt(e){e._valueTracker||(e._valueTracker=Ne(e))}function zt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ce(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function He(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ye(e,t){var n=t.checked;return le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function nr(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=V(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function rr(e,t){t=t.checked,t!=null&&O(e,"checked",t,!1)}function j(e,t){rr(e,t);var n=V(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,V(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function I(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ie(e,t,n){(t!=="number"||He(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var me=Array.isArray;function Se(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Le(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(a(91));return le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ve(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(a(92));if(me(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function $e(e,t){var n=V(t.value),r=V(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function We(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vt(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zt(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var cn,$n=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(cn=cn||document.createElement("div"),cn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=cn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function An(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Un={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ws=["Webkit","ms","Moz","O"];Object.keys(Un).forEach(function(e){ws.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Un[t]=Un[e]})});function fl(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Un.hasOwnProperty(e)&&Un[e]?(""+t).trim():t+"px"}function ml(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=fl(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Ns=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lr(e,t){if(t){if(Ns[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(a(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(a(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(t.style!=null&&typeof t.style!="object")throw Error(a(62))}}function R(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var G=null;function ge(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pe=null,Me=null,Ke=null;function rt(e){if(e=Yr(e)){if(typeof Pe!="function")throw Error(a(280));var t=e.stateNode;t&&(t=Tl(t),Pe(e.stateNode,e.type,t))}}function en(e){Me?Ke?Ke.push(e):Ke=[e]:Me=e}function tn(){if(Me){var e=Me,t=Ke;if(Ke=Me=null,rt(e),t)for(e=0;e<t.length;e++)rt(t[e])}}function pt(e,t){return e(t)}function De(){}var Ae=!1;function Bn(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return pt(e,t,n)}finally{Ae=!1,(Me!==null||Ke!==null)&&(De(),tn())}}function Ie(e,t){var n=e.stateNode;if(n===null)return null;var r=Tl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(a(231,t,typeof n));return n}var Ue=!1;if(E)try{var dt={};Object.defineProperty(dt,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",dt,dt),window.removeEventListener("test",dt,dt)}catch{Ue=!1}function It(e,t,n,r,s,o,i,u,f){var C=Array.prototype.slice.call(arguments,3);try{t.apply(n,C)}catch(K){this.onError(K)}}var it=!1,Dt=null,nn=!1,vt=null,Ir={onError:function(e){it=!0,Dt=e}};function js(e,t,n,r,s,o,i,u,f){it=!1,Dt=null,It.apply(Ir,arguments)}function Fr(e,t,n,r,s,o,i,u,f){if(js.apply(this,arguments),it){if(it){var C=Dt;it=!1,Dt=null}else throw Error(a(198));nn||(nn=!0,vt=C)}}function Hn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function mi(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pi(e){if(Hn(e)!==e)throw Error(a(188))}function gc(e){var t=e.alternate;if(!t){if(t=Hn(e),t===null)throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return pi(s),e;if(o===r)return pi(s),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,u=s.child;u;){if(u===n){i=!0,n=s,r=o;break}if(u===r){i=!0,r=s,n=o;break}u=u.sibling}if(!i){for(u=o.child;u;){if(u===n){i=!0,n=o,r=s;break}if(u===r){i=!0,r=o,n=s;break}u=u.sibling}if(!i)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(n.tag!==3)throw Error(a(188));return n.stateNode.current===n?e:t}function hi(e){return e=gc(e),e!==null?xi(e):null}function xi(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xi(e);if(t!==null)return t;e=e.sibling}return null}var gi=c.unstable_scheduleCallback,yi=c.unstable_cancelCallback,yc=c.unstable_shouldYield,vc=c.unstable_requestPaint,et=c.unstable_now,wc=c.unstable_getCurrentPriorityLevel,Ss=c.unstable_ImmediatePriority,vi=c.unstable_UserBlockingPriority,pl=c.unstable_NormalPriority,Nc=c.unstable_LowPriority,wi=c.unstable_IdlePriority,hl=null,rn=null;function jc(e){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(hl,e,void 0,(e.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:bc,Sc=Math.log,kc=Math.LN2;function bc(e){return e>>>=0,e===0?32:31-(Sc(e)/kc|0)|0}var xl=64,gl=4194304;function Lr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var u=i&~s;u!==0?r=Lr(u):(o&=i,o!==0&&(r=Lr(o)))}else i=n&~s,i!==0?r=Lr(i):o!==0&&(r=Lr(o));if(r===0)return 0;if(t!==0&&t!==r&&(t&s)===0&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Wt(t),s=1<<n,r|=e[n],t&=~s;return r}function Cc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ec(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Wt(o),u=1<<i,f=s[i];f===-1?((u&n)===0||(u&r)!==0)&&(s[i]=Cc(u,t)):f<=t&&(e.expiredLanes|=u),o&=~u}}function ks(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ni(){var e=xl;return xl<<=1,(xl&4194240)===0&&(xl=64),e}function bs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wt(t),e[t]=n}function _c(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Wt(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Cs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Wt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Oe=0;function ji(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Si,Es,ki,bi,Ci,_s=!1,vl=[],wn=null,Nn=null,jn=null,Tr=new Map,zr=new Map,Sn=[],Pc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ei(e,t){switch(e){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":Tr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zr.delete(t.pointerId)}}function Dr(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Yr(t),t!==null&&Es(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Ic(e,t,n,r,s){switch(t){case"focusin":return wn=Dr(wn,e,t,n,r,s),!0;case"dragenter":return Nn=Dr(Nn,e,t,n,r,s),!0;case"mouseover":return jn=Dr(jn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Tr.set(o,Dr(Tr.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,zr.set(o,Dr(zr.get(o)||null,e,t,n,r,s)),!0}return!1}function _i(e){var t=Vn(e.target);if(t!==null){var n=Hn(t);if(n!==null){if(t=n.tag,t===13){if(t=mi(n),t!==null){e.blockedOn=t,Ci(e.priority,function(){ki(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Is(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);G=r,n.target.dispatchEvent(r),G=null}else return t=Yr(n),t!==null&&Es(t),e.blockedOn=n,!1;t.shift()}return!0}function Pi(e,t,n){wl(e)&&n.delete(t)}function Fc(){_s=!1,wn!==null&&wl(wn)&&(wn=null),Nn!==null&&wl(Nn)&&(Nn=null),jn!==null&&wl(jn)&&(jn=null),Tr.forEach(Pi),zr.forEach(Pi)}function Rr(e,t){e.blockedOn===t&&(e.blockedOn=null,_s||(_s=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Fc)))}function Or(e){function t(s){return Rr(s,e)}if(0<vl.length){Rr(vl[0],e);for(var n=1;n<vl.length;n++){var r=vl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(wn!==null&&Rr(wn,e),Nn!==null&&Rr(Nn,e),jn!==null&&Rr(jn,e),Tr.forEach(t),zr.forEach(t),n=0;n<Sn.length;n++)r=Sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sn.length&&(n=Sn[0],n.blockedOn===null);)_i(n),n.blockedOn===null&&Sn.shift()}var sr=_.ReactCurrentBatchConfig,Nl=!0;function Lc(e,t,n,r){var s=Oe,o=sr.transition;sr.transition=null;try{Oe=1,Ps(e,t,n,r)}finally{Oe=s,sr.transition=o}}function Mc(e,t,n,r){var s=Oe,o=sr.transition;sr.transition=null;try{Oe=4,Ps(e,t,n,r)}finally{Oe=s,sr.transition=o}}function Ps(e,t,n,r){if(Nl){var s=Is(e,t,n,r);if(s===null)Qs(e,t,r,jl,n),Ei(e,r);else if(Ic(s,e,t,n,r))r.stopPropagation();else if(Ei(e,r),t&4&&-1<Pc.indexOf(e)){for(;s!==null;){var o=Yr(s);if(o!==null&&Si(o),o=Is(e,t,n,r),o===null&&Qs(e,t,r,jl,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Qs(e,t,r,null,n)}}var jl=null;function Is(e,t,n,r){if(jl=null,e=ge(r),e=Vn(e),e!==null)if(t=Hn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=mi(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jl=e,null}function Ii(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wc()){case Ss:return 1;case vi:return 4;case pl:case Nc:return 16;case wi:return 536870912;default:return 16}default:return 16}}var kn=null,Fs=null,Sl=null;function Fi(){if(Sl)return Sl;var e,t=Fs,n=t.length,r,s="value"in kn?kn.value:kn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[o-r];r++);return Sl=s.slice(e,1<r?1-r:void 0)}function kl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bl(){return!0}function Li(){return!1}function Ft(e){function t(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?bl:Li,this.isPropagationStopped=Li,this}return le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),t}var or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ls=Ft(or),$r=le({},or,{view:0,detail:0}),Tc=Ft($r),Ms,Ts,Ar,Cl=le({},$r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ar&&(Ar&&e.type==="mousemove"?(Ms=e.screenX-Ar.screenX,Ts=e.screenY-Ar.screenY):Ts=Ms=0,Ar=e),Ms)},movementY:function(e){return"movementY"in e?e.movementY:Ts}}),Mi=Ft(Cl),zc=le({},Cl,{dataTransfer:0}),Dc=Ft(zc),Rc=le({},$r,{relatedTarget:0}),zs=Ft(Rc),Oc=le({},or,{animationName:0,elapsedTime:0,pseudoElement:0}),$c=Ft(Oc),Ac=le({},or,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Uc=Ft(Ac),Bc=le({},or,{data:0}),Ti=Ft(Bc),Hc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wc[e])?!!t[e]:!1}function Ds(){return Kc}var Qc=le({},$r,{key:function(e){if(e.key){var t=Hc[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(e){return e.type==="keypress"?kl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qc=Ft(Qc),Jc=le({},Cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zi=Ft(Jc),Yc=le({},$r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),Gc=Ft(Yc),Xc=le({},or,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zc=Ft(Xc),ed=le({},Cl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),td=Ft(ed),nd=[9,13,27,32],Rs=E&&"CompositionEvent"in window,Ur=null;E&&"documentMode"in document&&(Ur=document.documentMode);var rd=E&&"TextEvent"in window&&!Ur,Di=E&&(!Rs||Ur&&8<Ur&&11>=Ur),Ri=" ",Oi=!1;function $i(e,t){switch(e){case"keyup":return nd.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ai(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ir=!1;function ld(e,t){switch(e){case"compositionend":return Ai(t);case"keypress":return t.which!==32?null:(Oi=!0,Ri);case"textInput":return e=t.data,e===Ri&&Oi?null:e;default:return null}}function sd(e,t){if(ir)return e==="compositionend"||!Rs&&$i(e,t)?(e=Fi(),Sl=Fs=kn=null,ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Di&&t.locale!=="ko"?null:t.data;default:return null}}var od={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ui(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!od[e.type]:t==="textarea"}function Bi(e,t,n,r){en(r),t=Fl(t,"onChange"),0<t.length&&(n=new Ls("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Br=null,Hr=null;function id(e){oa(e,0)}function El(e){var t=fr(e);if(zt(t))return e}function ad(e,t){if(e==="change")return t}var Hi=!1;if(E){var Os;if(E){var $s="oninput"in document;if(!$s){var Vi=document.createElement("div");Vi.setAttribute("oninput","return;"),$s=typeof Vi.oninput=="function"}Os=$s}else Os=!1;Hi=Os&&(!document.documentMode||9<document.documentMode)}function Wi(){Br&&(Br.detachEvent("onpropertychange",Ki),Hr=Br=null)}function Ki(e){if(e.propertyName==="value"&&El(Hr)){var t=[];Bi(t,Hr,e,ge(e)),Bn(id,t)}}function ud(e,t,n){e==="focusin"?(Wi(),Br=t,Hr=n,Br.attachEvent("onpropertychange",Ki)):e==="focusout"&&Wi()}function cd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return El(Hr)}function dd(e,t){if(e==="click")return El(t)}function fd(e,t){if(e==="input"||e==="change")return El(t)}function md(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kt=typeof Object.is=="function"?Object.is:md;function Vr(e,t){if(Kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!N.call(t,s)||!Kt(e[s],t[s]))return!1}return!0}function Qi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qi(e,t){var n=Qi(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qi(n)}}function Ji(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ji(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Yi(){for(var e=window,t=He();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=He(e.document)}return t}function As(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function pd(e){var t=Yi(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ji(n.ownerDocument.documentElement,n)){if(r!==null&&As(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=qi(n,o);var i=qi(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hd=E&&"documentMode"in document&&11>=document.documentMode,ar=null,Us=null,Wr=null,Bs=!1;function Gi(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bs||ar==null||ar!==He(r)||(r=ar,"selectionStart"in r&&As(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wr&&Vr(Wr,r)||(Wr=r,r=Fl(Us,"onSelect"),0<r.length&&(t=new Ls("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function _l(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:_l("Animation","AnimationEnd"),animationiteration:_l("Animation","AnimationIteration"),animationstart:_l("Animation","AnimationStart"),transitionend:_l("Transition","TransitionEnd")},Hs={},Xi={};E&&(Xi=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);function Pl(e){if(Hs[e])return Hs[e];if(!ur[e])return e;var t=ur[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Xi)return Hs[e]=t[n];return e}var Zi=Pl("animationend"),ea=Pl("animationiteration"),ta=Pl("animationstart"),na=Pl("transitionend"),ra=new Map,la="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bn(e,t){ra.set(e,t),z(t,[e])}for(var Vs=0;Vs<la.length;Vs++){var Ws=la[Vs],xd=Ws.toLowerCase(),gd=Ws[0].toUpperCase()+Ws.slice(1);bn(xd,"on"+gd)}bn(Zi,"onAnimationEnd"),bn(ea,"onAnimationIteration"),bn(ta,"onAnimationStart"),bn("dblclick","onDoubleClick"),bn("focusin","onFocus"),bn("focusout","onBlur"),bn(na,"onTransitionEnd"),S("onMouseEnter",["mouseout","mouseover"]),S("onMouseLeave",["mouseout","mouseover"]),S("onPointerEnter",["pointerout","pointerover"]),S("onPointerLeave",["pointerout","pointerover"]),z("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),z("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),z("onBeforeInput",["compositionend","keypress","textInput","paste"]),z("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),z("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),z("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yd=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kr));function sa(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Fr(r,t,void 0,e),e.currentTarget=null}function oa(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var u=r[i],f=u.instance,C=u.currentTarget;if(u=u.listener,f!==o&&s.isPropagationStopped())break e;sa(s,u,C),o=f}else for(i=0;i<r.length;i++){if(u=r[i],f=u.instance,C=u.currentTarget,u=u.listener,f!==o&&s.isPropagationStopped())break e;sa(s,u,C),o=f}}}if(nn)throw e=vt,nn=!1,vt=null,e}function Qe(e,t){var n=t[Zs];n===void 0&&(n=t[Zs]=new Set);var r=e+"__bubble";n.has(r)||(ia(t,e,2,!1),n.add(r))}function Ks(e,t,n){var r=0;t&&(r|=4),ia(n,e,r,t)}var Il="_reactListening"+Math.random().toString(36).slice(2);function Qr(e){if(!e[Il]){e[Il]=!0,p.forEach(function(n){n!=="selectionchange"&&(yd.has(n)||Ks(n,!1,e),Ks(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Il]||(t[Il]=!0,Ks("selectionchange",!1,t))}}function ia(e,t,n,r){switch(Ii(t)){case 1:var s=Lc;break;case 4:s=Mc;break;default:s=Ps}n=s.bind(null,t,n,e),s=void 0,!Ue||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Qs(e,t,n,r,s){var o=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var f=i.tag;if((f===3||f===4)&&(f=i.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;i=i.return}for(;u!==null;){if(i=Vn(u),i===null)return;if(f=i.tag,f===5||f===6){r=o=i;continue e}u=u.parentNode}}r=r.return}Bn(function(){var C=o,K=ge(n),J=[];e:{var W=ra.get(e);if(W!==void 0){var ue=Ls,he=e;switch(e){case"keypress":if(kl(n)===0)break e;case"keydown":case"keyup":ue=qc;break;case"focusin":he="focus",ue=zs;break;case"focusout":he="blur",ue=zs;break;case"beforeblur":case"afterblur":ue=zs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Mi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Dc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Gc;break;case Zi:case ea:case ta:ue=$c;break;case na:ue=Zc;break;case"scroll":ue=Tc;break;case"wheel":ue=td;break;case"copy":case"cut":case"paste":ue=Uc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=zi}var ye=(t&4)!==0,tt=!ye&&e==="scroll",w=ye?W!==null?W+"Capture":null:W;ye=[];for(var m=C,k;m!==null;){k=m;var te=k.stateNode;if(k.tag===5&&te!==null&&(k=te,w!==null&&(te=Ie(m,w),te!=null&&ye.push(qr(m,te,k)))),tt)break;m=m.return}0<ye.length&&(W=new ue(W,he,null,n,K),J.push({event:W,listeners:ye}))}}if((t&7)===0){e:{if(W=e==="mouseover"||e==="pointerover",ue=e==="mouseout"||e==="pointerout",W&&n!==G&&(he=n.relatedTarget||n.fromElement)&&(Vn(he)||he[dn]))break e;if((ue||W)&&(W=K.window===K?K:(W=K.ownerDocument)?W.defaultView||W.parentWindow:window,ue?(he=n.relatedTarget||n.toElement,ue=C,he=he?Vn(he):null,he!==null&&(tt=Hn(he),he!==tt||he.tag!==5&&he.tag!==6)&&(he=null)):(ue=null,he=C),ue!==he)){if(ye=Mi,te="onMouseLeave",w="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(ye=zi,te="onPointerLeave",w="onPointerEnter",m="pointer"),tt=ue==null?W:fr(ue),k=he==null?W:fr(he),W=new ye(te,m+"leave",ue,n,K),W.target=tt,W.relatedTarget=k,te=null,Vn(K)===C&&(ye=new ye(w,m+"enter",he,n,K),ye.target=k,ye.relatedTarget=tt,te=ye),tt=te,ue&&he)t:{for(ye=ue,w=he,m=0,k=ye;k;k=cr(k))m++;for(k=0,te=w;te;te=cr(te))k++;for(;0<m-k;)ye=cr(ye),m--;for(;0<k-m;)w=cr(w),k--;for(;m--;){if(ye===w||w!==null&&ye===w.alternate)break t;ye=cr(ye),w=cr(w)}ye=null}else ye=null;ue!==null&&aa(J,W,ue,ye,!1),he!==null&&tt!==null&&aa(J,tt,he,ye,!0)}}e:{if(W=C?fr(C):window,ue=W.nodeName&&W.nodeName.toLowerCase(),ue==="select"||ue==="input"&&W.type==="file")var we=ad;else if(Ui(W))if(Hi)we=fd;else{we=cd;var ke=ud}else(ue=W.nodeName)&&ue.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(we=dd);if(we&&(we=we(e,C))){Bi(J,we,n,K);break e}ke&&ke(e,W,C),e==="focusout"&&(ke=W._wrapperState)&&ke.controlled&&W.type==="number"&&ie(W,"number",W.value)}switch(ke=C?fr(C):window,e){case"focusin":(Ui(ke)||ke.contentEditable==="true")&&(ar=ke,Us=C,Wr=null);break;case"focusout":Wr=Us=ar=null;break;case"mousedown":Bs=!0;break;case"contextmenu":case"mouseup":case"dragend":Bs=!1,Gi(J,n,K);break;case"selectionchange":if(hd)break;case"keydown":case"keyup":Gi(J,n,K)}var be;if(Rs)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else ir?$i(e,n)&&(_e="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_e="onCompositionStart");_e&&(Di&&n.locale!=="ko"&&(ir||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&ir&&(be=Fi()):(kn=K,Fs="value"in kn?kn.value:kn.textContent,ir=!0)),ke=Fl(C,_e),0<ke.length&&(_e=new Ti(_e,e,null,n,K),J.push({event:_e,listeners:ke}),be?_e.data=be:(be=Ai(n),be!==null&&(_e.data=be)))),(be=rd?ld(e,n):sd(e,n))&&(C=Fl(C,"onBeforeInput"),0<C.length&&(K=new Ti("onBeforeInput","beforeinput",null,n,K),J.push({event:K,listeners:C}),K.data=be))}oa(J,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ie(e,n),o!=null&&r.unshift(qr(e,o,s)),o=Ie(e,t),o!=null&&r.push(qr(e,o,s))),e=e.return}return r}function cr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function aa(e,t,n,r,s){for(var o=t._reactName,i=[];n!==null&&n!==r;){var u=n,f=u.alternate,C=u.stateNode;if(f!==null&&f===r)break;u.tag===5&&C!==null&&(u=C,s?(f=Ie(n,o),f!=null&&i.unshift(qr(n,f,u))):s||(f=Ie(n,o),f!=null&&i.push(qr(n,f,u)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var vd=/\r\n?/g,wd=/\u0000|\uFFFD/g;function ua(e){return(typeof e=="string"?e:""+e).replace(vd,`
`).replace(wd,"")}function Ll(e,t,n){if(t=ua(t),ua(e)!==t&&n)throw Error(a(425))}function Ml(){}var qs=null,Js=null;function Ys(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gs=typeof setTimeout=="function"?setTimeout:void 0,Nd=typeof clearTimeout=="function"?clearTimeout:void 0,ca=typeof Promise=="function"?Promise:void 0,jd=typeof queueMicrotask=="function"?queueMicrotask:typeof ca<"u"?function(e){return ca.resolve(null).then(e).catch(Sd)}:Gs;function Sd(e){setTimeout(function(){throw e})}function Xs(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Or(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Or(t)}function Cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),ln="__reactFiber$"+dr,Jr="__reactProps$"+dr,dn="__reactContainer$"+dr,Zs="__reactEvents$"+dr,kd="__reactListeners$"+dr,bd="__reactHandles$"+dr;function Vn(e){var t=e[ln];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dn]||n[ln]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=da(e);e!==null;){if(n=e[ln])return n;e=da(e)}return t}e=n,n=e.parentNode}return null}function Yr(e){return e=e[ln]||e[dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(a(33))}function Tl(e){return e[Jr]||null}var eo=[],mr=-1;function En(e){return{current:e}}function qe(e){0>mr||(e.current=eo[mr],eo[mr]=null,mr--)}function Be(e,t){mr++,eo[mr]=e.current,e.current=t}var _n={},ht=En(_n),jt=En(!1),Wn=_n;function pr(e,t){var n=e.type.contextTypes;if(!n)return _n;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function St(e){return e=e.childContextTypes,e!=null}function zl(){qe(jt),qe(ht)}function fa(e,t,n){if(ht.current!==_n)throw Error(a(168));Be(ht,t),Be(jt,n)}function ma(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(a(108,P(e)||"Unknown",s));return le({},n,r)}function Dl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_n,Wn=ht.current,Be(ht,e),Be(jt,jt.current),!0}function pa(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=ma(e,t,Wn),r.__reactInternalMemoizedMergedChildContext=e,qe(jt),qe(ht),Be(ht,e)):qe(jt),Be(jt,n)}var fn=null,Rl=!1,to=!1;function ha(e){fn===null?fn=[e]:fn.push(e)}function Cd(e){Rl=!0,ha(e)}function Pn(){if(!to&&fn!==null){to=!0;var e=0,t=Oe;try{var n=fn;for(Oe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}fn=null,Rl=!1}catch(s){throw fn!==null&&(fn=fn.slice(e+1)),gi(Ss,Pn),s}finally{Oe=t,to=!1}}return null}var hr=[],xr=0,Ol=null,$l=0,Rt=[],Ot=0,Kn=null,mn=1,pn="";function Qn(e,t){hr[xr++]=$l,hr[xr++]=Ol,Ol=e,$l=t}function xa(e,t,n){Rt[Ot++]=mn,Rt[Ot++]=pn,Rt[Ot++]=Kn,Kn=e;var r=mn;e=pn;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var o=32-Wt(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,mn=1<<32-Wt(t)+s|n<<s|r,pn=o+e}else mn=1<<o|n<<s|r,pn=e}function no(e){e.return!==null&&(Qn(e,1),xa(e,1,0))}function ro(e){for(;e===Ol;)Ol=hr[--xr],hr[xr]=null,$l=hr[--xr],hr[xr]=null;for(;e===Kn;)Kn=Rt[--Ot],Rt[Ot]=null,pn=Rt[--Ot],Rt[Ot]=null,mn=Rt[--Ot],Rt[Ot]=null}var Lt=null,Mt=null,Je=!1,Qt=null;function ga(e,t){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ya(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Lt=e,Mt=Cn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Lt=e,Mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Kn!==null?{id:mn,overflow:pn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Lt=e,Mt=null,!0):!1;default:return!1}}function lo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function so(e){if(Je){var t=Mt;if(t){var n=t;if(!ya(e,t)){if(lo(e))throw Error(a(418));t=Cn(n.nextSibling);var r=Lt;t&&ya(e,t)?ga(r,n):(e.flags=e.flags&-4097|2,Je=!1,Lt=e)}}else{if(lo(e))throw Error(a(418));e.flags=e.flags&-4097|2,Je=!1,Lt=e}}}function va(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Lt=e}function Al(e){if(e!==Lt)return!1;if(!Je)return va(e),Je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ys(e.type,e.memoizedProps)),t&&(t=Mt)){if(lo(e))throw wa(),Error(a(418));for(;t;)ga(e,t),t=Cn(t.nextSibling)}if(va(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Mt=Cn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Mt=null}}else Mt=Lt?Cn(e.stateNode.nextSibling):null;return!0}function wa(){for(var e=Mt;e;)e=Cn(e.nextSibling)}function gr(){Mt=Lt=null,Je=!1}function oo(e){Qt===null?Qt=[e]:Qt.push(e)}var Ed=_.ReactCurrentBatchConfig;function Gr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var u=s.refs;i===null?delete u[o]:u[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ul(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Na(e){var t=e._init;return t(e._payload)}function ja(e){function t(w,m){if(e){var k=w.deletions;k===null?(w.deletions=[m],w.flags|=16):k.push(m)}}function n(w,m){if(!e)return null;for(;m!==null;)t(w,m),m=m.sibling;return null}function r(w,m){for(w=new Map;m!==null;)m.key!==null?w.set(m.key,m):w.set(m.index,m),m=m.sibling;return w}function s(w,m){return w=Rn(w,m),w.index=0,w.sibling=null,w}function o(w,m,k){return w.index=k,e?(k=w.alternate,k!==null?(k=k.index,k<m?(w.flags|=2,m):k):(w.flags|=2,m)):(w.flags|=1048576,m)}function i(w){return e&&w.alternate===null&&(w.flags|=2),w}function u(w,m,k,te){return m===null||m.tag!==6?(m=Xo(k,w.mode,te),m.return=w,m):(m=s(m,k),m.return=w,m)}function f(w,m,k,te){var we=k.type;return we===D?K(w,m,k.props.children,te,k.key):m!==null&&(m.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===pe&&Na(we)===m.type)?(te=s(m,k.props),te.ref=Gr(w,m,k),te.return=w,te):(te=ds(k.type,k.key,k.props,null,w.mode,te),te.ref=Gr(w,m,k),te.return=w,te)}function C(w,m,k,te){return m===null||m.tag!==4||m.stateNode.containerInfo!==k.containerInfo||m.stateNode.implementation!==k.implementation?(m=Zo(k,w.mode,te),m.return=w,m):(m=s(m,k.children||[]),m.return=w,m)}function K(w,m,k,te,we){return m===null||m.tag!==7?(m=tr(k,w.mode,te,we),m.return=w,m):(m=s(m,k),m.return=w,m)}function J(w,m,k){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Xo(""+m,w.mode,k),m.return=w,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case A:return k=ds(m.type,m.key,m.props,null,w.mode,k),k.ref=Gr(w,null,m),k.return=w,k;case M:return m=Zo(m,w.mode,k),m.return=w,m;case pe:var te=m._init;return J(w,te(m._payload),k)}if(me(m)||ae(m))return m=tr(m,w.mode,k,null),m.return=w,m;Ul(w,m)}return null}function W(w,m,k,te){var we=m!==null?m.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return we!==null?null:u(w,m,""+k,te);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case A:return k.key===we?f(w,m,k,te):null;case M:return k.key===we?C(w,m,k,te):null;case pe:return we=k._init,W(w,m,we(k._payload),te)}if(me(k)||ae(k))return we!==null?null:K(w,m,k,te,null);Ul(w,k)}return null}function ue(w,m,k,te,we){if(typeof te=="string"&&te!==""||typeof te=="number")return w=w.get(k)||null,u(m,w,""+te,we);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case A:return w=w.get(te.key===null?k:te.key)||null,f(m,w,te,we);case M:return w=w.get(te.key===null?k:te.key)||null,C(m,w,te,we);case pe:var ke=te._init;return ue(w,m,k,ke(te._payload),we)}if(me(te)||ae(te))return w=w.get(k)||null,K(m,w,te,we,null);Ul(m,te)}return null}function he(w,m,k,te){for(var we=null,ke=null,be=m,_e=m=0,ct=null;be!==null&&_e<k.length;_e++){be.index>_e?(ct=be,be=null):ct=be.sibling;var ze=W(w,be,k[_e],te);if(ze===null){be===null&&(be=ct);break}e&&be&&ze.alternate===null&&t(w,be),m=o(ze,m,_e),ke===null?we=ze:ke.sibling=ze,ke=ze,be=ct}if(_e===k.length)return n(w,be),Je&&Qn(w,_e),we;if(be===null){for(;_e<k.length;_e++)be=J(w,k[_e],te),be!==null&&(m=o(be,m,_e),ke===null?we=be:ke.sibling=be,ke=be);return Je&&Qn(w,_e),we}for(be=r(w,be);_e<k.length;_e++)ct=ue(be,w,_e,k[_e],te),ct!==null&&(e&&ct.alternate!==null&&be.delete(ct.key===null?_e:ct.key),m=o(ct,m,_e),ke===null?we=ct:ke.sibling=ct,ke=ct);return e&&be.forEach(function(On){return t(w,On)}),Je&&Qn(w,_e),we}function ye(w,m,k,te){var we=ae(k);if(typeof we!="function")throw Error(a(150));if(k=we.call(k),k==null)throw Error(a(151));for(var ke=we=null,be=m,_e=m=0,ct=null,ze=k.next();be!==null&&!ze.done;_e++,ze=k.next()){be.index>_e?(ct=be,be=null):ct=be.sibling;var On=W(w,be,ze.value,te);if(On===null){be===null&&(be=ct);break}e&&be&&On.alternate===null&&t(w,be),m=o(On,m,_e),ke===null?we=On:ke.sibling=On,ke=On,be=ct}if(ze.done)return n(w,be),Je&&Qn(w,_e),we;if(be===null){for(;!ze.done;_e++,ze=k.next())ze=J(w,ze.value,te),ze!==null&&(m=o(ze,m,_e),ke===null?we=ze:ke.sibling=ze,ke=ze);return Je&&Qn(w,_e),we}for(be=r(w,be);!ze.done;_e++,ze=k.next())ze=ue(be,w,_e,ze.value,te),ze!==null&&(e&&ze.alternate!==null&&be.delete(ze.key===null?_e:ze.key),m=o(ze,m,_e),ke===null?we=ze:ke.sibling=ze,ke=ze);return e&&be.forEach(function(of){return t(w,of)}),Je&&Qn(w,_e),we}function tt(w,m,k,te){if(typeof k=="object"&&k!==null&&k.type===D&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case A:e:{for(var we=k.key,ke=m;ke!==null;){if(ke.key===we){if(we=k.type,we===D){if(ke.tag===7){n(w,ke.sibling),m=s(ke,k.props.children),m.return=w,w=m;break e}}else if(ke.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===pe&&Na(we)===ke.type){n(w,ke.sibling),m=s(ke,k.props),m.ref=Gr(w,ke,k),m.return=w,w=m;break e}n(w,ke);break}else t(w,ke);ke=ke.sibling}k.type===D?(m=tr(k.props.children,w.mode,te,k.key),m.return=w,w=m):(te=ds(k.type,k.key,k.props,null,w.mode,te),te.ref=Gr(w,m,k),te.return=w,w=te)}return i(w);case M:e:{for(ke=k.key;m!==null;){if(m.key===ke)if(m.tag===4&&m.stateNode.containerInfo===k.containerInfo&&m.stateNode.implementation===k.implementation){n(w,m.sibling),m=s(m,k.children||[]),m.return=w,w=m;break e}else{n(w,m);break}else t(w,m);m=m.sibling}m=Zo(k,w.mode,te),m.return=w,w=m}return i(w);case pe:return ke=k._init,tt(w,m,ke(k._payload),te)}if(me(k))return he(w,m,k,te);if(ae(k))return ye(w,m,k,te);Ul(w,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,m!==null&&m.tag===6?(n(w,m.sibling),m=s(m,k),m.return=w,w=m):(n(w,m),m=Xo(k,w.mode,te),m.return=w,w=m),i(w)):n(w,m)}return tt}var yr=ja(!0),Sa=ja(!1),Bl=En(null),Hl=null,vr=null,io=null;function ao(){io=vr=Hl=null}function uo(e){var t=Bl.current;qe(Bl),e._currentValue=t}function co(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wr(e,t){Hl=e,io=vr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(kt=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(io!==e)if(e={context:e,memoizedValue:t,next:null},vr===null){if(Hl===null)throw Error(a(308));vr=e,Hl.dependencies={lanes:0,firstContext:e}}else vr=vr.next=e;return t}var qn=null;function fo(e){qn===null?qn=[e]:qn.push(e)}function ka(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,fo(t)):(n.next=s.next,s.next=n),t.interleaved=n,hn(e,r)}function hn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var In=!1;function mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ba(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Te&2)!==0){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,hn(e,n)}return s=r.interleaved,s===null?(t.next=t,fo(r)):(t.next=s.next,s.next=t),r.interleaved=t,hn(e,n)}function Vl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cs(e,n)}}function Ca(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wl(e,t,n,r){var s=e.updateQueue;In=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var f=u,C=f.next;f.next=null,i===null?o=C:i.next=C,i=f;var K=e.alternate;K!==null&&(K=K.updateQueue,u=K.lastBaseUpdate,u!==i&&(u===null?K.firstBaseUpdate=C:u.next=C,K.lastBaseUpdate=f))}if(o!==null){var J=s.baseState;i=0,K=C=f=null,u=o;do{var W=u.lane,ue=u.eventTime;if((r&W)===W){K!==null&&(K=K.next={eventTime:ue,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var he=e,ye=u;switch(W=t,ue=n,ye.tag){case 1:if(he=ye.payload,typeof he=="function"){J=he.call(ue,J,W);break e}J=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=ye.payload,W=typeof he=="function"?he.call(ue,J,W):he,W==null)break e;J=le({},J,W);break e;case 2:In=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,W=s.effects,W===null?s.effects=[u]:W.push(u))}else ue={eventTime:ue,lane:W,tag:u.tag,payload:u.payload,callback:u.callback,next:null},K===null?(C=K=ue,f=J):K=K.next=ue,i|=W;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;W=u,u=W.next,W.next=null,s.lastBaseUpdate=W,s.shared.pending=null}}while(!0);if(K===null&&(f=J),s.baseState=f,s.firstBaseUpdate=C,s.lastBaseUpdate=K,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Gn|=i,e.lanes=i,e.memoizedState=J}}function Ea(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(a(191,s));s.call(r)}}}var Xr={},sn=En(Xr),Zr=En(Xr),el=En(Xr);function Jn(e){if(e===Xr)throw Error(a(174));return e}function po(e,t){switch(Be(el,t),Be(Zr,e),Be(sn,Xr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vt(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vt(t,e)}qe(sn),Be(sn,t)}function Nr(){qe(sn),qe(Zr),qe(el)}function _a(e){Jn(el.current);var t=Jn(sn.current),n=Vt(t,e.type);t!==n&&(Be(Zr,e),Be(sn,n))}function ho(e){Zr.current===e&&(qe(sn),qe(Zr))}var Ge=En(0);function Kl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xo=[];function go(){for(var e=0;e<xo.length;e++)xo[e]._workInProgressVersionPrimary=null;xo.length=0}var Ql=_.ReactCurrentDispatcher,yo=_.ReactCurrentBatchConfig,Yn=0,Xe=null,st=null,at=null,ql=!1,tl=!1,nl=0,_d=0;function xt(){throw Error(a(321))}function vo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kt(e[n],t[n]))return!1;return!0}function wo(e,t,n,r,s,o){if(Yn=o,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ql.current=e===null||e.memoizedState===null?Ld:Md,e=n(r,s),tl){o=0;do{if(tl=!1,nl=0,25<=o)throw Error(a(301));o+=1,at=st=null,t.updateQueue=null,Ql.current=Td,e=n(r,s)}while(tl)}if(Ql.current=Gl,t=st!==null&&st.next!==null,Yn=0,at=st=Xe=null,ql=!1,t)throw Error(a(300));return e}function No(){var e=nl!==0;return nl=0,e}function on(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Xe.memoizedState=at=e:at=at.next=e,at}function At(){if(st===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=at===null?Xe.memoizedState:at.next;if(t!==null)at=t,st=e;else{if(e===null)throw Error(a(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},at===null?Xe.memoizedState=at=e:at=at.next=e}return at}function rl(e,t){return typeof t=="function"?t(e):t}function jo(e){var t=At(),n=t.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=e;var r=st,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var u=i=null,f=null,C=o;do{var K=C.lane;if((Yn&K)===K)f!==null&&(f=f.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),r=C.hasEagerState?C.eagerState:e(r,C.action);else{var J={lane:K,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};f===null?(u=f=J,i=r):f=f.next=J,Xe.lanes|=K,Gn|=K}C=C.next}while(C!==null&&C!==o);f===null?i=r:f.next=u,Kt(r,t.memoizedState)||(kt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=f,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Xe.lanes|=o,Gn|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=At(),n=t.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);Kt(o,t.memoizedState)||(kt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Pa(){}function Ia(e,t){var n=Xe,r=At(),s=t(),o=!Kt(r.memoizedState,s);if(o&&(r.memoizedState=s,kt=!0),r=r.queue,ko(Ma.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,ll(9,La.bind(null,n,r,s,t),void 0,null),ut===null)throw Error(a(349));(Yn&30)!==0||Fa(n,t,s)}return s}function Fa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function La(e,t,n,r){t.value=n,t.getSnapshot=r,Ta(t)&&za(e)}function Ma(e,t,n){return n(function(){Ta(t)&&za(e)})}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kt(e,n)}catch{return!0}}function za(e){var t=hn(e,1);t!==null&&Gt(t,e,1,-1)}function Da(e){var t=on();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:e},t.queue=e,e=e.dispatch=Fd.bind(null,Xe,e),[t.memoizedState,e]}function ll(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ra(){return At().memoizedState}function Jl(e,t,n,r){var s=on();Xe.flags|=e,s.memoizedState=ll(1|t,n,void 0,r===void 0?null:r)}function Yl(e,t,n,r){var s=At();r=r===void 0?null:r;var o=void 0;if(st!==null){var i=st.memoizedState;if(o=i.destroy,r!==null&&vo(r,i.deps)){s.memoizedState=ll(t,n,o,r);return}}Xe.flags|=e,s.memoizedState=ll(1|t,n,o,r)}function Oa(e,t){return Jl(8390656,8,e,t)}function ko(e,t){return Yl(2048,8,e,t)}function $a(e,t){return Yl(4,2,e,t)}function Aa(e,t){return Yl(4,4,e,t)}function Ua(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ba(e,t,n){return n=n!=null?n.concat([e]):null,Yl(4,4,Ua.bind(null,t,e),n)}function bo(){}function Ha(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Va(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return(Yn&21)===0?(e.baseState&&(e.baseState=!1,kt=!0),e.memoizedState=n):(Kt(n,t)||(n=Ni(),Xe.lanes|=n,Gn|=n,e.baseState=!0),t)}function Pd(e,t){var n=Oe;Oe=n!==0&&4>n?n:4,e(!0);var r=yo.transition;yo.transition={};try{e(!1),t()}finally{Oe=n,yo.transition=r}}function Ka(){return At().memoizedState}function Id(e,t,n){var r=zn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))qa(t,n);else if(n=ka(e,t,n,r),n!==null){var s=Nt();Gt(n,e,r,s),Ja(n,t,r)}}function Fd(e,t,n){var r=zn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))qa(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,u=o(i,n);if(s.hasEagerState=!0,s.eagerState=u,Kt(u,i)){var f=t.interleaved;f===null?(s.next=s,fo(t)):(s.next=f.next,f.next=s),t.interleaved=s;return}}catch{}finally{}n=ka(e,t,s,r),n!==null&&(s=Nt(),Gt(n,e,r,s),Ja(n,t,r))}}function Qa(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function qa(e,t){tl=ql=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cs(e,n)}}var Gl={readContext:$t,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},Ld={readContext:$t,useCallback:function(e,t){return on().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:Oa,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Jl(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Jl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jl(4,2,e,t)},useMemo:function(e,t){var n=on();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=on();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Id.bind(null,Xe,e),[r.memoizedState,e]},useRef:function(e){var t=on();return e={current:e},t.memoizedState=e},useState:Da,useDebugValue:bo,useDeferredValue:function(e){return on().memoizedState=e},useTransition:function(){var e=Da(!1),t=e[0];return e=Pd.bind(null,e[1]),on().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Xe,s=on();if(Je){if(n===void 0)throw Error(a(407));n=n()}else{if(n=t(),ut===null)throw Error(a(349));(Yn&30)!==0||Fa(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Oa(Ma.bind(null,r,o,e),[e]),r.flags|=2048,ll(9,La.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=on(),t=ut.identifierPrefix;if(Je){var n=pn,r=mn;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=nl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=_d++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Md={readContext:$t,useCallback:Ha,useContext:$t,useEffect:ko,useImperativeHandle:Ba,useInsertionEffect:$a,useLayoutEffect:Aa,useMemo:Va,useReducer:jo,useRef:Ra,useState:function(){return jo(rl)},useDebugValue:bo,useDeferredValue:function(e){var t=At();return Wa(t,st.memoizedState,e)},useTransition:function(){var e=jo(rl)[0],t=At().memoizedState;return[e,t]},useMutableSource:Pa,useSyncExternalStore:Ia,useId:Ka,unstable_isNewReconciler:!1},Td={readContext:$t,useCallback:Ha,useContext:$t,useEffect:ko,useImperativeHandle:Ba,useInsertionEffect:$a,useLayoutEffect:Aa,useMemo:Va,useReducer:So,useRef:Ra,useState:function(){return So(rl)},useDebugValue:bo,useDeferredValue:function(e){var t=At();return st===null?t.memoizedState=e:Wa(t,st.memoizedState,e)},useTransition:function(){var e=So(rl)[0],t=At().memoizedState;return[e,t]},useMutableSource:Pa,useSyncExternalStore:Ia,useId:Ka,unstable_isNewReconciler:!1};function qt(e,t){if(e&&e.defaultProps){t=le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Co(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Xl={isMounted:function(e){return(e=e._reactInternals)?Hn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Nt(),s=zn(e),o=xn(r,s);o.payload=t,n!=null&&(o.callback=n),t=Fn(e,o,s),t!==null&&(Gt(t,e,s,r),Vl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Nt(),s=zn(e),o=xn(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Fn(e,o,s),t!==null&&(Gt(t,e,s,r),Vl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nt(),r=zn(e),s=xn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Fn(e,s,r),t!==null&&(Gt(t,e,r,n),Vl(t,e,r))}};function Ya(e,t,n,r,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!Vr(n,r)||!Vr(s,o):!0}function Ga(e,t,n){var r=!1,s=_n,o=t.contextType;return typeof o=="object"&&o!==null?o=$t(o):(s=St(t)?Wn:ht.current,r=t.contextTypes,o=(r=r!=null)?pr(e,s):_n),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Xa(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Xl.enqueueReplaceState(t,t.state,null)}function Eo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},mo(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=$t(o):(o=St(t)?Wn:ht.current,s.context=pr(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Co(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Xl.enqueueReplaceState(s,s.state,null),Wl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function jr(e,t){try{var n="",r=t;do n+=b(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function _o(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Po(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var zd=typeof WeakMap=="function"?WeakMap:Map;function Za(e,t,n){n=xn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ss||(ss=!0,Vo=r),Po(e,t)},n}function eu(e,t,n){n=xn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Po(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Po(e,t),typeof r!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function tu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new zd;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Jd.bind(null,e,t,n),t.then(e,e))}function nu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ru(e,t,n,r,s){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=xn(-1,1),t.tag=2,Fn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var Dd=_.ReactCurrentOwner,kt=!1;function wt(e,t,n,r){t.child=e===null?Sa(t,null,n,r):yr(t,e.child,n,r)}function lu(e,t,n,r,s){n=n.render;var o=t.ref;return wr(t,s),r=wo(e,t,n,r,o,s),n=No(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,gn(e,t,s)):(Je&&n&&no(t),t.flags|=1,wt(e,t,r,s),t.child)}function su(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Go(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,ou(e,t,o,r,s)):(e=ds(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,(e.lanes&s)===0){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Vr,n(i,r)&&e.ref===t.ref)return gn(e,t,s)}return t.flags|=1,e=Rn(o,r),e.ref=t.ref,e.return=t,t.child=e}function ou(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Vr(o,r)&&e.ref===t.ref)if(kt=!1,t.pendingProps=r=o,(e.lanes&s)!==0)(e.flags&131072)!==0&&(kt=!0);else return t.lanes=e.lanes,gn(e,t,s)}return Io(e,t,n,r,s)}function iu(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(kr,Tt),Tt|=n;else{if((n&1073741824)===0)return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Be(kr,Tt),Tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Be(kr,Tt),Tt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Be(kr,Tt),Tt|=r;return wt(e,t,s,n),t.child}function au(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Io(e,t,n,r,s){var o=St(n)?Wn:ht.current;return o=pr(t,o),wr(t,s),n=wo(e,t,n,r,o,s),r=No(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,gn(e,t,s)):(Je&&r&&no(t),t.flags|=1,wt(e,t,n,s),t.child)}function uu(e,t,n,r,s){if(St(n)){var o=!0;Dl(t)}else o=!1;if(wr(t,s),t.stateNode===null)es(e,t),Ga(t,n,r),Eo(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,u=t.memoizedProps;i.props=u;var f=i.context,C=n.contextType;typeof C=="object"&&C!==null?C=$t(C):(C=St(n)?Wn:ht.current,C=pr(t,C));var K=n.getDerivedStateFromProps,J=typeof K=="function"||typeof i.getSnapshotBeforeUpdate=="function";J||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==r||f!==C)&&Xa(t,i,r,C),In=!1;var W=t.memoizedState;i.state=W,Wl(t,r,i,s),f=t.memoizedState,u!==r||W!==f||jt.current||In?(typeof K=="function"&&(Co(t,n,K,r),f=t.memoizedState),(u=In||Ya(t,n,u,r,W,f,C))?(J||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=C,r=u):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ba(e,t),u=t.memoizedProps,C=t.type===t.elementType?u:qt(t.type,u),i.props=C,J=t.pendingProps,W=i.context,f=n.contextType,typeof f=="object"&&f!==null?f=$t(f):(f=St(n)?Wn:ht.current,f=pr(t,f));var ue=n.getDerivedStateFromProps;(K=typeof ue=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==J||W!==f)&&Xa(t,i,r,f),In=!1,W=t.memoizedState,i.state=W,Wl(t,r,i,s);var he=t.memoizedState;u!==J||W!==he||jt.current||In?(typeof ue=="function"&&(Co(t,n,ue,r),he=t.memoizedState),(C=In||Ya(t,n,C,r,W,he,f)||!1)?(K||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,he,f),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,he,f)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&W===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&W===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=he),i.props=r,i.state=he,i.context=f,r=C):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&W===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&W===e.memoizedState||(t.flags|=1024),r=!1)}return Fo(e,t,n,r,o,s)}function Fo(e,t,n,r,s,o){au(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&pa(t,n,!1),gn(e,t,o);r=t.stateNode,Dd.current=t;var u=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=yr(t,e.child,null,o),t.child=yr(t,null,u,o)):wt(e,t,u,o),t.memoizedState=r.state,s&&pa(t,n,!0),t.child}function cu(e){var t=e.stateNode;t.pendingContext?fa(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fa(e,t.context,!1),po(e,t.containerInfo)}function du(e,t,n,r,s){return gr(),oo(s),t.flags|=256,wt(e,t,n,r),t.child}var Lo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function fu(e,t,n){var r=t.pendingProps,s=Ge.current,o=!1,i=(t.flags&128)!==0,u;if((u=i)||(u=e!==null&&e.memoizedState===null?!1:(s&2)!==0),u?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Be(Ge,s&1),e===null)return so(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},(r&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=i):o=fs(i,r,0,null),e=tr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Lo,e):To(t,i));if(s=e.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return Rd(e,t,i,r,u,s,n);if(o){o=r.fallback,i=t.mode,s=e.child,u=s.sibling;var f={mode:"hidden",children:r.children};return(i&1)===0&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=f,t.deletions=null):(r=Rn(s,f),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?o=Rn(u,o):(o=tr(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?Mo(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,r}return o=e.child,e=o.sibling,r=Rn(o,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function To(e,t){return t=fs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zl(e,t,n,r){return r!==null&&oo(r),yr(t,e.child,null,n),e=To(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rd(e,t,n,r,s,o,i){if(n)return t.flags&256?(t.flags&=-257,r=_o(Error(a(422))),Zl(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=fs({mode:"visible",children:r.children},s,0,null),o=tr(o,s,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,(t.mode&1)!==0&&yr(t,e.child,null,i),t.child.memoizedState=Mo(i),t.memoizedState=Lo,o);if((t.mode&1)===0)return Zl(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(a(419)),r=_o(o,r,void 0),Zl(e,t,i,r)}if(u=(i&e.childLanes)!==0,kt||u){if(r=ut,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(r.suspendedLanes|i))!==0?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,hn(e,s),Gt(r,e,s,-1))}return Yo(),r=_o(Error(a(421))),Zl(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Yd.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Mt=Cn(s.nextSibling),Lt=t,Je=!0,Qt=null,e!==null&&(Rt[Ot++]=mn,Rt[Ot++]=pn,Rt[Ot++]=Kn,mn=e.id,pn=e.overflow,Kn=t),t=To(t,r.children),t.flags|=4096,t)}function mu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),co(e.return,t,n)}function zo(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function pu(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(wt(e,t,r.children,n),r=Ge.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mu(e,n,t);else if(e.tag===19)mu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Be(Ge,r),(t.mode&1)===0)t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Kl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),zo(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Kl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}zo(t,!0,n,null,o);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function es(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Gn|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,n=Rn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Rn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Od(e,t,n){switch(t.tag){case 3:cu(t),gr();break;case 5:_a(t);break;case 1:St(t.type)&&Dl(t);break;case 4:po(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Be(Bl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Be(Ge,Ge.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?fu(e,t,n):(Be(Ge,Ge.current&1),e=gn(e,t,n),e!==null?e.sibling:null);Be(Ge,Ge.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return pu(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Be(Ge,Ge.current),r)break;return null;case 22:case 23:return t.lanes=0,iu(e,t,n)}return gn(e,t,n)}var hu,Do,xu,gu;hu=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},xu=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Jn(sn.current);var o=null;switch(n){case"input":s=Ye(e,s),r=Ye(e,r),o=[];break;case"select":s=le({},s,{value:void 0}),r=le({},r,{value:void 0}),o=[];break;case"textarea":s=Le(e,s),r=Le(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ml)}lr(n,r);var i;n=null;for(C in s)if(!r.hasOwnProperty(C)&&s.hasOwnProperty(C)&&s[C]!=null)if(C==="style"){var u=s[C];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(v.hasOwnProperty(C)?o||(o=[]):(o=o||[]).push(C,null));for(C in r){var f=r[C];if(u=s?.[C],r.hasOwnProperty(C)&&f!==u&&(f!=null||u!=null))if(C==="style")if(u){for(i in u)!u.hasOwnProperty(i)||f&&f.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in f)f.hasOwnProperty(i)&&u[i]!==f[i]&&(n||(n={}),n[i]=f[i])}else n||(o||(o=[]),o.push(C,n)),n=f;else C==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,u=u?u.__html:void 0,f!=null&&u!==f&&(o=o||[]).push(C,f)):C==="children"?typeof f!="string"&&typeof f!="number"||(o=o||[]).push(C,""+f):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(v.hasOwnProperty(C)?(f!=null&&C==="onScroll"&&Qe("scroll",e),o||u===f||(o=[])):(o=o||[]).push(C,f))}n&&(o=o||[]).push("style",n);var C=o;(t.updateQueue=C)&&(t.flags|=4)}},gu=function(e,t,n,r){n!==r&&(t.flags|=4)};function sl(e,t){if(!Je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $d(e,t,n){var r=t.pendingProps;switch(ro(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return St(t.type)&&zl(),gt(t),null;case 3:return r=t.stateNode,Nr(),qe(jt),qe(ht),go(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Al(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Qt!==null&&(Qo(Qt),Qt=null))),Do(e,t),gt(t),null;case 5:ho(t);var s=Jn(el.current);if(n=t.type,e!==null&&t.stateNode!=null)xu(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(a(166));return gt(t),null}if(e=Jn(sn.current),Al(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ln]=t,r[Jr]=o,e=(t.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(s=0;s<Kr.length;s++)Qe(Kr[s],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":nr(r,o),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Qe("invalid",r);break;case"textarea":Ve(r,o),Qe("invalid",r)}lr(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var u=o[i];i==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&Ll(r.textContent,u,e),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Ll(r.textContent,u,e),s=["children",""+u]):v.hasOwnProperty(i)&&u!=null&&i==="onScroll"&&Qe("scroll",r)}switch(n){case"input":nt(r),I(r,o,!0);break;case"textarea":nt(r),We(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ml)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zt(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[ln]=t,e[Jr]=r,hu(e,t,!1,!1),t.stateNode=e;e:{switch(i=R(n,r),n){case"dialog":Qe("cancel",e),Qe("close",e),s=r;break;case"iframe":case"object":case"embed":Qe("load",e),s=r;break;case"video":case"audio":for(s=0;s<Kr.length;s++)Qe(Kr[s],e);s=r;break;case"source":Qe("error",e),s=r;break;case"img":case"image":case"link":Qe("error",e),Qe("load",e),s=r;break;case"details":Qe("toggle",e),s=r;break;case"input":nr(e,r),s=Ye(e,r),Qe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=le({},r,{value:void 0}),Qe("invalid",e);break;case"textarea":Ve(e,r),s=Le(e,r),Qe("invalid",e);break;default:s=r}lr(n,s),u=s;for(o in u)if(u.hasOwnProperty(o)){var f=u[o];o==="style"?ml(e,f):o==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&$n(e,f)):o==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&An(e,f):typeof f=="number"&&An(e,""+f):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(v.hasOwnProperty(o)?f!=null&&o==="onScroll"&&Qe("scroll",e):f!=null&&O(e,o,f,i))}switch(n){case"input":nt(e),I(e,r,!1);break;case"textarea":nt(e),We(e);break;case"option":r.value!=null&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Se(e,!!r.multiple,o,!1):r.defaultValue!=null&&Se(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)gu(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(a(166));if(n=Jn(el.current),Jn(sn.current),Al(t)){if(r=t.stateNode,n=t.memoizedProps,r[ln]=t,(o=r.nodeValue!==n)&&(e=Lt,e!==null))switch(e.tag){case 3:Ll(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ll(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ln]=t,t.stateNode=r}return gt(t),null;case 13:if(qe(Ge),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Je&&Mt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)wa(),gr(),t.flags|=98560,o=!1;else if(o=Al(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(a(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));o[ln]=t}else gr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;gt(t),o=!1}else Qt!==null&&(Qo(Qt),Qt=null),o=!0;if(!o)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ge.current&1)!==0?ot===0&&(ot=3):Yo())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return Nr(),Do(e,t),e===null&&Qr(t.stateNode.containerInfo),gt(t),null;case 10:return uo(t.type._context),gt(t),null;case 17:return St(t.type)&&zl(),gt(t),null;case 19:if(qe(Ge),o=t.memoizedState,o===null)return gt(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)sl(o,!1);else{if(ot!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=Kl(e),i!==null){for(t.flags|=128,sl(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Be(Ge,Ge.current&1|2),t.child}e=e.sibling}o.tail!==null&&et()>br&&(t.flags|=128,r=!0,sl(o,!1),t.lanes=4194304)}else{if(!r)if(e=Kl(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),sl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Je)return gt(t),null}else 2*et()-o.renderingStartTime>br&&n!==1073741824&&(t.flags|=128,r=!0,sl(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=et(),t.sibling=null,n=Ge.current,Be(Ge,r?n&1|2:n&1),t):(gt(t),null);case 22:case 23:return Jo(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(Tt&1073741824)!==0&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error(a(156,t.tag))}function Ad(e,t){switch(ro(t),t.tag){case 1:return St(t.type)&&zl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nr(),qe(jt),qe(ht),go(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return ho(t),null;case 13:if(qe(Ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));gr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qe(Ge),null;case 4:return Nr(),null;case 10:return uo(t.type._context),null;case 22:case 23:return Jo(),null;case 24:return null;default:return null}}var ts=!1,yt=!1,Ud=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Sr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(e,t,r)}else n.current=null}function Ro(e,t,n){try{n()}catch(r){Ze(e,t,r)}}var yu=!1;function Bd(e,t){if(qs=Nl,e=Yi(),As(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,u=-1,f=-1,C=0,K=0,J=e,W=null;t:for(;;){for(var ue;J!==n||s!==0&&J.nodeType!==3||(u=i+s),J!==o||r!==0&&J.nodeType!==3||(f=i+r),J.nodeType===3&&(i+=J.nodeValue.length),(ue=J.firstChild)!==null;)W=J,J=ue;for(;;){if(J===e)break t;if(W===n&&++C===s&&(u=i),W===o&&++K===r&&(f=i),(ue=J.nextSibling)!==null)break;J=W,W=J.parentNode}J=ue}n=u===-1||f===-1?null:{start:u,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(Js={focusedElem:e,selectionRange:n},Nl=!1,fe=t;fe!==null;)if(t=fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fe=e;else for(;fe!==null;){t=fe;try{var he=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var ye=he.memoizedProps,tt=he.memoizedState,w=t.stateNode,m=w.getSnapshotBeforeUpdate(t.elementType===t.type?ye:qt(t.type,ye),tt);w.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(te){Ze(t,t.return,te)}if(e=t.sibling,e!==null){e.return=t.return,fe=e;break}fe=t.return}return he=yu,yu=!1,he}function ol(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Ro(t,n,o)}s=s.next}while(s!==r)}}function ns(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Oo(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function vu(e){var t=e.alternate;t!==null&&(e.alternate=null,vu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ln],delete t[Jr],delete t[Zs],delete t[kd],delete t[bd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wu(e){return e.tag===5||e.tag===3||e.tag===4}function Nu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $o(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ml));else if(r!==4&&(e=e.child,e!==null))for($o(e,t,n),e=e.sibling;e!==null;)$o(e,t,n),e=e.sibling}function Ao(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ao(e,t,n),e=e.sibling;e!==null;)Ao(e,t,n),e=e.sibling}var ft=null,Jt=!1;function Ln(e,t,n){for(n=n.child;n!==null;)ju(e,t,n),n=n.sibling}function ju(e,t,n){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(hl,n)}catch{}switch(n.tag){case 5:yt||Sr(n,t);case 6:var r=ft,s=Jt;ft=null,Ln(e,t,n),ft=r,Jt=s,ft!==null&&(Jt?(e=ft,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(Jt?(e=ft,n=n.stateNode,e.nodeType===8?Xs(e.parentNode,n):e.nodeType===1&&Xs(e,n),Or(e)):Xs(ft,n.stateNode));break;case 4:r=ft,s=Jt,ft=n.stateNode.containerInfo,Jt=!0,Ln(e,t,n),ft=r,Jt=s;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&((o&2)!==0||(o&4)!==0)&&Ro(n,t,i),s=s.next}while(s!==r)}Ln(e,t,n);break;case 1:if(!yt&&(Sr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ze(n,t,u)}Ln(e,t,n);break;case 21:Ln(e,t,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,Ln(e,t,n),yt=r):Ln(e,t,n);break;default:Ln(e,t,n)}}function Su(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ud),t.forEach(function(r){var s=Gd.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Yt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,i=t,u=i;e:for(;u!==null;){switch(u.tag){case 5:ft=u.stateNode,Jt=!1;break e;case 3:ft=u.stateNode.containerInfo,Jt=!0;break e;case 4:ft=u.stateNode.containerInfo,Jt=!0;break e}u=u.return}if(ft===null)throw Error(a(160));ju(o,i,s),ft=null,Jt=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(C){Ze(s,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ku(t,e),t=t.sibling}function ku(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yt(t,e),an(e),r&4){try{ol(3,e,e.return),ns(3,e)}catch(ye){Ze(e,e.return,ye)}try{ol(5,e,e.return)}catch(ye){Ze(e,e.return,ye)}}break;case 1:Yt(t,e),an(e),r&512&&n!==null&&Sr(n,n.return);break;case 5:if(Yt(t,e),an(e),r&512&&n!==null&&Sr(n,n.return),e.flags&32){var s=e.stateNode;try{An(s,"")}catch(ye){Ze(e,e.return,ye)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,u=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&rr(s,o),R(u,i);var C=R(u,o);for(i=0;i<f.length;i+=2){var K=f[i],J=f[i+1];K==="style"?ml(s,J):K==="dangerouslySetInnerHTML"?$n(s,J):K==="children"?An(s,J):O(s,K,J,C)}switch(u){case"input":j(s,o);break;case"textarea":$e(s,o);break;case"select":var W=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var ue=o.value;ue!=null?Se(s,!!o.multiple,ue,!1):W!==!!o.multiple&&(o.defaultValue!=null?Se(s,!!o.multiple,o.defaultValue,!0):Se(s,!!o.multiple,o.multiple?[]:"",!1))}s[Jr]=o}catch(ye){Ze(e,e.return,ye)}}break;case 6:if(Yt(t,e),an(e),r&4){if(e.stateNode===null)throw Error(a(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(ye){Ze(e,e.return,ye)}}break;case 3:if(Yt(t,e),an(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Or(t.containerInfo)}catch(ye){Ze(e,e.return,ye)}break;case 4:Yt(t,e),an(e);break;case 13:Yt(t,e),an(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Ho=et())),r&4&&Su(e);break;case 22:if(K=n!==null&&n.memoizedState!==null,e.mode&1?(yt=(C=yt)||K,Yt(t,e),yt=C):Yt(t,e),an(e),r&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!K&&(e.mode&1)!==0)for(fe=e,K=e.child;K!==null;){for(J=fe=K;fe!==null;){switch(W=fe,ue=W.child,W.tag){case 0:case 11:case 14:case 15:ol(4,W,W.return);break;case 1:Sr(W,W.return);var he=W.stateNode;if(typeof he.componentWillUnmount=="function"){r=W,n=W.return;try{t=r,he.props=t.memoizedProps,he.state=t.memoizedState,he.componentWillUnmount()}catch(ye){Ze(r,n,ye)}}break;case 5:Sr(W,W.return);break;case 22:if(W.memoizedState!==null){Eu(J);continue}}ue!==null?(ue.return=W,fe=ue):Eu(J)}K=K.sibling}e:for(K=null,J=e;;){if(J.tag===5){if(K===null){K=J;try{s=J.stateNode,C?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=J.stateNode,f=J.memoizedProps.style,i=f!=null&&f.hasOwnProperty("display")?f.display:null,u.style.display=fl("display",i))}catch(ye){Ze(e,e.return,ye)}}}else if(J.tag===6){if(K===null)try{J.stateNode.nodeValue=C?"":J.memoizedProps}catch(ye){Ze(e,e.return,ye)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===e)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===e)break e;for(;J.sibling===null;){if(J.return===null||J.return===e)break e;K===J&&(K=null),J=J.return}K===J&&(K=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Yt(t,e),an(e),r&4&&Su(e);break;case 21:break;default:Yt(t,e),an(e)}}function an(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(wu(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(An(s,""),r.flags&=-33);var o=Nu(e);Ao(e,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,u=Nu(e);$o(e,u,i);break;default:throw Error(a(161))}}catch(f){Ze(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Hd(e,t,n){fe=e,bu(e)}function bu(e,t,n){for(var r=(e.mode&1)!==0;fe!==null;){var s=fe,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||ts;if(!i){var u=s.alternate,f=u!==null&&u.memoizedState!==null||yt;u=ts;var C=yt;if(ts=i,(yt=f)&&!C)for(fe=s;fe!==null;)i=fe,f=i.child,i.tag===22&&i.memoizedState!==null?_u(s):f!==null?(f.return=i,fe=f):_u(s);for(;o!==null;)fe=o,bu(o),o=o.sibling;fe=s,ts=u,yt=C}Cu(e)}else(s.subtreeFlags&8772)!==0&&o!==null?(o.return=s,fe=o):Cu(e)}}function Cu(e){for(;fe!==null;){var t=fe;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:yt||ns(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!yt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:qt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Ea(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ea(t,i,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var K=C.memoizedState;if(K!==null){var J=K.dehydrated;J!==null&&Or(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}yt||t.flags&512&&Oo(t)}catch(W){Ze(t,t.return,W)}}if(t===e){fe=null;break}if(n=t.sibling,n!==null){n.return=t.return,fe=n;break}fe=t.return}}function Eu(e){for(;fe!==null;){var t=fe;if(t===e){fe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fe=n;break}fe=t.return}}function _u(e){for(;fe!==null;){var t=fe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ns(4,t)}catch(f){Ze(t,n,f)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(f){Ze(t,s,f)}}var o=t.return;try{Oo(t)}catch(f){Ze(t,o,f)}break;case 5:var i=t.return;try{Oo(t)}catch(f){Ze(t,i,f)}}}catch(f){Ze(t,t.return,f)}if(t===e){fe=null;break}var u=t.sibling;if(u!==null){u.return=t.return,fe=u;break}fe=t.return}}var Vd=Math.ceil,rs=_.ReactCurrentDispatcher,Uo=_.ReactCurrentOwner,Ut=_.ReactCurrentBatchConfig,Te=0,ut=null,lt=null,mt=0,Tt=0,kr=En(0),ot=0,il=null,Gn=0,ls=0,Bo=0,al=null,bt=null,Ho=0,br=1/0,yn=null,ss=!1,Vo=null,Mn=null,os=!1,Tn=null,is=0,ul=0,Wo=null,as=-1,us=0;function Nt(){return(Te&6)!==0?et():as!==-1?as:as=et()}function zn(e){return(e.mode&1)===0?1:(Te&2)!==0&&mt!==0?mt&-mt:Ed.transition!==null?(us===0&&(us=Ni()),us):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:Ii(e.type)),e)}function Gt(e,t,n,r){if(50<ul)throw ul=0,Wo=null,Error(a(185));Mr(e,n,r),((Te&2)===0||e!==ut)&&(e===ut&&((Te&2)===0&&(ls|=n),ot===4&&Dn(e,mt)),Ct(e,r),n===1&&Te===0&&(t.mode&1)===0&&(br=et()+500,Rl&&Pn()))}function Ct(e,t){var n=e.callbackNode;Ec(e,t);var r=yl(e,e===ut?mt:0);if(r===0)n!==null&&yi(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&yi(n),t===1)e.tag===0?Cd(Iu.bind(null,e)):ha(Iu.bind(null,e)),jd(function(){(Te&6)===0&&Pn()}),n=null;else{switch(ji(r)){case 1:n=Ss;break;case 4:n=vi;break;case 16:n=pl;break;case 536870912:n=wi;break;default:n=pl}n=Ou(n,Pu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Pu(e,t){if(as=-1,us=0,(Te&6)!==0)throw Error(a(327));var n=e.callbackNode;if(Cr()&&e.callbackNode!==n)return null;var r=yl(e,e===ut?mt:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=cs(e,r);else{t=r;var s=Te;Te|=2;var o=Lu();(ut!==e||mt!==t)&&(yn=null,br=et()+500,Zn(e,t));do try{Qd();break}catch(u){Fu(e,u)}while(!0);ao(),rs.current=o,Te=s,lt!==null?t=0:(ut=null,mt=0,t=ot)}if(t!==0){if(t===2&&(s=ks(e),s!==0&&(r=s,t=Ko(e,s))),t===1)throw n=il,Zn(e,0),Dn(e,r),Ct(e,et()),n;if(t===6)Dn(e,r);else{if(s=e.current.alternate,(r&30)===0&&!Wd(s)&&(t=cs(e,r),t===2&&(o=ks(e),o!==0&&(r=o,t=Ko(e,o))),t===1))throw n=il,Zn(e,0),Dn(e,r),Ct(e,et()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:er(e,bt,yn);break;case 3:if(Dn(e,r),(r&130023424)===r&&(t=Ho+500-et(),10<t)){if(yl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Nt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Gs(er.bind(null,e,bt,yn),t);break}er(e,bt,yn);break;case 4:if(Dn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-Wt(r);o=1<<i,i=t[i],i>s&&(s=i),r&=~o}if(r=s,r=et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vd(r/1960))-r,10<r){e.timeoutHandle=Gs(er.bind(null,e,bt,yn),r);break}er(e,bt,yn);break;case 5:er(e,bt,yn);break;default:throw Error(a(329))}}}return Ct(e,et()),e.callbackNode===n?Pu.bind(null,e):null}function Ko(e,t){var n=al;return e.current.memoizedState.isDehydrated&&(Zn(e,t).flags|=256),e=cs(e,t),e!==2&&(t=bt,bt=n,t!==null&&Qo(t)),e}function Qo(e){bt===null?bt=e:bt.push.apply(bt,e)}function Wd(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Kt(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dn(e,t){for(t&=~Bo,t&=~ls,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function Iu(e){if((Te&6)!==0)throw Error(a(327));Cr();var t=yl(e,0);if((t&1)===0)return Ct(e,et()),null;var n=cs(e,t);if(e.tag!==0&&n===2){var r=ks(e);r!==0&&(t=r,n=Ko(e,r))}if(n===1)throw n=il,Zn(e,0),Dn(e,t),Ct(e,et()),n;if(n===6)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,er(e,bt,yn),Ct(e,et()),null}function qo(e,t){var n=Te;Te|=1;try{return e(t)}finally{Te=n,Te===0&&(br=et()+500,Rl&&Pn())}}function Xn(e){Tn!==null&&Tn.tag===0&&(Te&6)===0&&Cr();var t=Te;Te|=1;var n=Ut.transition,r=Oe;try{if(Ut.transition=null,Oe=1,e)return e()}finally{Oe=r,Ut.transition=n,Te=t,(Te&6)===0&&Pn()}}function Jo(){Tt=kr.current,qe(kr)}function Zn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Nd(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(ro(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zl();break;case 3:Nr(),qe(jt),qe(ht),go();break;case 5:ho(r);break;case 4:Nr();break;case 13:qe(Ge);break;case 19:qe(Ge);break;case 10:uo(r.type._context);break;case 22:case 23:Jo()}n=n.return}if(ut=e,lt=e=Rn(e.current,null),mt=Tt=t,ot=0,il=null,Bo=ls=Gn=0,bt=al=null,qn!==null){for(t=0;t<qn.length;t++)if(n=qn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}qn=null}return e}function Fu(e,t){do{var n=lt;try{if(ao(),Ql.current=Gl,ql){for(var r=Xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ql=!1}if(Yn=0,at=st=Xe=null,tl=!1,nl=0,Uo.current=null,n===null||n.return===null){ot=1,il=t,lt=null;break}e:{var o=e,i=n.return,u=n,f=t;if(t=mt,u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var C=f,K=u,J=K.tag;if((K.mode&1)===0&&(J===0||J===11||J===15)){var W=K.alternate;W?(K.updateQueue=W.updateQueue,K.memoizedState=W.memoizedState,K.lanes=W.lanes):(K.updateQueue=null,K.memoizedState=null)}var ue=nu(i);if(ue!==null){ue.flags&=-257,ru(ue,i,u,o,t),ue.mode&1&&tu(o,C,t),t=ue,f=C;var he=t.updateQueue;if(he===null){var ye=new Set;ye.add(f),t.updateQueue=ye}else he.add(f);break e}else{if((t&1)===0){tu(o,C,t),Yo();break e}f=Error(a(426))}}else if(Je&&u.mode&1){var tt=nu(i);if(tt!==null){(tt.flags&65536)===0&&(tt.flags|=256),ru(tt,i,u,o,t),oo(jr(f,u));break e}}o=f=jr(f,u),ot!==4&&(ot=2),al===null?al=[o]:al.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var w=Za(o,f,t);Ca(o,w);break e;case 1:u=f;var m=o.type,k=o.stateNode;if((o.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Mn===null||!Mn.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t;var te=eu(o,u,t);Ca(o,te);break e}}o=o.return}while(o!==null)}Tu(n)}catch(we){t=we,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function Lu(){var e=rs.current;return rs.current=Gl,e===null?Gl:e}function Yo(){(ot===0||ot===3||ot===2)&&(ot=4),ut===null||(Gn&268435455)===0&&(ls&268435455)===0||Dn(ut,mt)}function cs(e,t){var n=Te;Te|=2;var r=Lu();(ut!==e||mt!==t)&&(yn=null,Zn(e,t));do try{Kd();break}catch(s){Fu(e,s)}while(!0);if(ao(),Te=n,rs.current=r,lt!==null)throw Error(a(261));return ut=null,mt=0,ot}function Kd(){for(;lt!==null;)Mu(lt)}function Qd(){for(;lt!==null&&!yc();)Mu(lt)}function Mu(e){var t=Ru(e.alternate,e,Tt);e.memoizedProps=e.pendingProps,t===null?Tu(e):lt=t,Uo.current=null}function Tu(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=$d(n,t,Tt),n!==null){lt=n;return}}else{if(n=Ad(n,t),n!==null){n.flags&=32767,lt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ot=6,lt=null;return}}if(t=t.sibling,t!==null){lt=t;return}lt=t=e}while(t!==null);ot===0&&(ot=5)}function er(e,t,n){var r=Oe,s=Ut.transition;try{Ut.transition=null,Oe=1,qd(e,t,n,r)}finally{Ut.transition=s,Oe=r}return null}function qd(e,t,n,r){do Cr();while(Tn!==null);if((Te&6)!==0)throw Error(a(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(_c(e,o),e===ut&&(lt=ut=null,mt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||os||(os=!0,Ou(pl,function(){return Cr(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=Ut.transition,Ut.transition=null;var i=Oe;Oe=1;var u=Te;Te|=4,Uo.current=null,Bd(e,n),ku(n,e),pd(Js),Nl=!!qs,Js=qs=null,e.current=n,Hd(n),vc(),Te=u,Oe=i,Ut.transition=o}else e.current=n;if(os&&(os=!1,Tn=e,is=s),o=e.pendingLanes,o===0&&(Mn=null),jc(n.stateNode),Ct(e,et()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ss)throw ss=!1,e=Vo,Vo=null,e;return(is&1)!==0&&e.tag!==0&&Cr(),o=e.pendingLanes,(o&1)!==0?e===Wo?ul++:(ul=0,Wo=e):ul=0,Pn(),null}function Cr(){if(Tn!==null){var e=ji(is),t=Ut.transition,n=Oe;try{if(Ut.transition=null,Oe=16>e?16:e,Tn===null)var r=!1;else{if(e=Tn,Tn=null,is=0,(Te&6)!==0)throw Error(a(331));var s=Te;for(Te|=4,fe=e.current;fe!==null;){var o=fe,i=o.child;if((fe.flags&16)!==0){var u=o.deletions;if(u!==null){for(var f=0;f<u.length;f++){var C=u[f];for(fe=C;fe!==null;){var K=fe;switch(K.tag){case 0:case 11:case 15:ol(8,K,o)}var J=K.child;if(J!==null)J.return=K,fe=J;else for(;fe!==null;){K=fe;var W=K.sibling,ue=K.return;if(vu(K),K===C){fe=null;break}if(W!==null){W.return=ue,fe=W;break}fe=ue}}}var he=o.alternate;if(he!==null){var ye=he.child;if(ye!==null){he.child=null;do{var tt=ye.sibling;ye.sibling=null,ye=tt}while(ye!==null)}}fe=o}}if((o.subtreeFlags&2064)!==0&&i!==null)i.return=o,fe=i;else e:for(;fe!==null;){if(o=fe,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:ol(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,fe=w;break e}fe=o.return}}var m=e.current;for(fe=m;fe!==null;){i=fe;var k=i.child;if((i.subtreeFlags&2064)!==0&&k!==null)k.return=i,fe=k;else e:for(i=m;fe!==null;){if(u=fe,(u.flags&2048)!==0)try{switch(u.tag){case 0:case 11:case 15:ns(9,u)}}catch(we){Ze(u,u.return,we)}if(u===i){fe=null;break e}var te=u.sibling;if(te!==null){te.return=u.return,fe=te;break e}fe=u.return}}if(Te=s,Pn(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(hl,e)}catch{}r=!0}return r}finally{Oe=n,Ut.transition=t}}return!1}function zu(e,t,n){t=jr(n,t),t=Za(e,t,1),e=Fn(e,t,1),t=Nt(),e!==null&&(Mr(e,1,t),Ct(e,t))}function Ze(e,t,n){if(e.tag===3)zu(e,e,n);else for(;t!==null;){if(t.tag===3){zu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mn===null||!Mn.has(r))){e=jr(n,e),e=eu(t,e,1),t=Fn(t,e,1),e=Nt(),t!==null&&(Mr(t,1,e),Ct(t,e));break}}t=t.return}}function Jd(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Nt(),e.pingedLanes|=e.suspendedLanes&n,ut===e&&(mt&n)===n&&(ot===4||ot===3&&(mt&130023424)===mt&&500>et()-Ho?Zn(e,0):Bo|=n),Ct(e,t)}function Du(e,t){t===0&&((e.mode&1)===0?t=1:(t=gl,gl<<=1,(gl&130023424)===0&&(gl=4194304)));var n=Nt();e=hn(e,t),e!==null&&(Mr(e,t,n),Ct(e,n))}function Yd(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Du(e,n)}function Gd(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}r!==null&&r.delete(t),Du(e,n)}var Ru;Ru=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)kt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return kt=!1,Od(e,t,n);kt=(e.flags&131072)!==0}else kt=!1,Je&&(t.flags&1048576)!==0&&xa(t,$l,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;es(e,t),e=t.pendingProps;var s=pr(t,ht.current);wr(t,n),s=wo(null,t,r,e,s,n);var o=No();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,St(r)?(o=!0,Dl(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,mo(t),s.updater=Xl,t.stateNode=s,s._reactInternals=t,Eo(t,r,e,n),t=Fo(null,t,r,!0,o,n)):(t.tag=0,Je&&o&&no(t),wt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(es(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Zd(r),e=qt(r,e),s){case 0:t=Io(null,t,r,e,n);break e;case 1:t=uu(null,t,r,e,n);break e;case 11:t=lu(null,t,r,e,n);break e;case 14:t=su(null,t,r,qt(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),Io(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),uu(e,t,r,s,n);case 3:e:{if(cu(t),e===null)throw Error(a(387));r=t.pendingProps,o=t.memoizedState,s=o.element,ba(e,t),Wl(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=jr(Error(a(423)),t),t=du(e,t,r,n,s);break e}else if(r!==s){s=jr(Error(a(424)),t),t=du(e,t,r,n,s);break e}else for(Mt=Cn(t.stateNode.containerInfo.firstChild),Lt=t,Je=!0,Qt=null,n=Sa(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gr(),r===s){t=gn(e,t,n);break e}wt(e,t,r,n)}t=t.child}return t;case 5:return _a(t),e===null&&so(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,Ys(r,s)?i=null:o!==null&&Ys(r,o)&&(t.flags|=32),au(e,t),wt(e,t,i,n),t.child;case 6:return e===null&&so(t),null;case 13:return fu(e,t,n);case 4:return po(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=yr(t,null,r,n):wt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),lu(e,t,r,s,n);case 7:return wt(e,t,t.pendingProps,n),t.child;case 8:return wt(e,t,t.pendingProps.children,n),t.child;case 12:return wt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,Be(Bl,r._currentValue),r._currentValue=i,o!==null)if(Kt(o.value,i)){if(o.children===s.children&&!jt.current){t=gn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){i=o.child;for(var f=u.firstContext;f!==null;){if(f.context===r){if(o.tag===1){f=xn(-1,n&-n),f.tag=2;var C=o.updateQueue;if(C!==null){C=C.shared;var K=C.pending;K===null?f.next=f:(f.next=K.next,K.next=f),C.pending=f}}o.lanes|=n,f=o.alternate,f!==null&&(f.lanes|=n),co(o.return,n,t),u.lanes|=n;break}f=f.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(a(341));i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),co(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}wt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,wr(t,n),s=$t(s),r=r(s),t.flags|=1,wt(e,t,r,n),t.child;case 14:return r=t.type,s=qt(r,t.pendingProps),s=qt(r.type,s),su(e,t,r,s,n);case 15:return ou(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),es(e,t),t.tag=1,St(r)?(e=!0,Dl(t)):e=!1,wr(t,n),Ga(t,r,s),Eo(t,r,s,n),Fo(null,t,r,!0,e,n);case 19:return pu(e,t,n);case 22:return iu(e,t,n)}throw Error(a(156,t.tag))};function Ou(e,t){return gi(e,t)}function Xd(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(e,t,n,r){return new Xd(e,t,n,r)}function Go(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zd(e){if(typeof e=="function")return Go(e)?1:0;if(e!=null){if(e=e.$$typeof,e===je)return 11;if(e===Z)return 14}return 2}function Rn(e,t){var n=e.alternate;return n===null?(n=Bt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ds(e,t,n,r,s,o){var i=2;if(r=e,typeof e=="function")Go(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case D:return tr(n.children,s,o,t);case oe:i=8,s|=8;break;case Ce:return e=Bt(12,n,t,s|2),e.elementType=Ce,e.lanes=o,e;case Ee:return e=Bt(13,n,t,s),e.elementType=Ee,e.lanes=o,e;case $:return e=Bt(19,n,t,s),e.elementType=$,e.lanes=o,e;case re:return fs(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y:i=10;break e;case xe:i=9;break e;case je:i=11;break e;case Z:i=14;break e;case pe:i=16,r=null;break e}throw Error(a(130,e==null?e:typeof e,""))}return t=Bt(i,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function tr(e,t,n,r){return e=Bt(7,e,r,t),e.lanes=n,e}function fs(e,t,n,r){return e=Bt(22,e,r,t),e.elementType=re,e.lanes=n,e.stateNode={isHidden:!1},e}function Xo(e,t,n){return e=Bt(6,e,null,t),e.lanes=n,e}function Zo(e,t,n){return t=Bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ef(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bs(0),this.expirationTimes=bs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bs(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ei(e,t,n,r,s,o,i,u,f){return e=new ef(e,t,n,u,f),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Bt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mo(o),e}function tf(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function $u(e){if(!e)return _n;e=e._reactInternals;e:{if(Hn(e)!==e||e.tag!==1)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(St(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(a(171))}if(e.tag===1){var n=e.type;if(St(n))return ma(e,n,t)}return t}function Au(e,t,n,r,s,o,i,u,f){return e=ei(n,r,!0,e,s,o,i,u,f),e.context=$u(null),n=e.current,r=Nt(),s=zn(n),o=xn(r,s),o.callback=t??null,Fn(n,o,s),e.current.lanes=s,Mr(e,s,r),Ct(e,r),e}function ms(e,t,n,r){var s=t.current,o=Nt(),i=zn(s);return n=$u(n),t.context===null?t.context=n:t.pendingContext=n,t=xn(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Fn(s,t,i),e!==null&&(Gt(e,s,i,o),Vl(e,s,i)),i}function ps(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Uu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ti(e,t){Uu(e,t),(e=e.alternate)&&Uu(e,t)}function nf(){return null}var Bu=typeof reportError=="function"?reportError:function(e){console.error(e)};function ni(e){this._internalRoot=e}hs.prototype.render=ni.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));ms(e,t,null,null)},hs.prototype.unmount=ni.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xn(function(){ms(null,e,null,null)}),t[dn]=null}};function hs(e){this._internalRoot=e}hs.prototype.unstable_scheduleHydration=function(e){if(e){var t=bi();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sn.length&&t!==0&&t<Sn[n].priority;n++);Sn.splice(n,0,e),n===0&&_i(e)}};function ri(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hu(){}function rf(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var C=ps(i);o.call(C)}}var i=Au(t,r,e,0,null,!1,!1,"",Hu);return e._reactRootContainer=i,e[dn]=i.current,Qr(e.nodeType===8?e.parentNode:e),Xn(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var C=ps(f);u.call(C)}}var f=ei(e,0,!1,null,null,!1,!1,"",Hu);return e._reactRootContainer=f,e[dn]=f.current,Qr(e.nodeType===8?e.parentNode:e),Xn(function(){ms(t,f,n,r)}),f}function gs(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var u=s;s=function(){var f=ps(i);u.call(f)}}ms(t,i,e,s)}else i=rf(n,t,e,s,r);return ps(i)}Si=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Lr(t.pendingLanes);n!==0&&(Cs(t,n|1),Ct(t,et()),(Te&6)===0&&(br=et()+500,Pn()))}break;case 13:Xn(function(){var r=hn(e,1);if(r!==null){var s=Nt();Gt(r,e,1,s)}}),ti(e,1)}},Es=function(e){if(e.tag===13){var t=hn(e,134217728);if(t!==null){var n=Nt();Gt(t,e,134217728,n)}ti(e,134217728)}},ki=function(e){if(e.tag===13){var t=zn(e),n=hn(e,t);if(n!==null){var r=Nt();Gt(n,e,t,r)}ti(e,t)}},bi=function(){return Oe},Ci=function(e,t){var n=Oe;try{return Oe=e,t()}finally{Oe=n}},Pe=function(e,t,n){switch(t){case"input":if(j(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Tl(r);if(!s)throw Error(a(90));zt(r),j(r,s)}}}break;case"textarea":$e(e,n);break;case"select":t=n.value,t!=null&&Se(e,!!n.multiple,t,!1)}},pt=qo,De=Xn;var lf={usingClientEntryPoint:!1,Events:[Yr,fr,Tl,en,tn,qo]},cl={findFiberByHostInstance:Vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sf={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hi(e),e===null?null:e.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||nf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ys=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ys.isDisabled&&ys.supportsFiber)try{hl=ys.inject(sf),rn=ys}catch{}}return Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lf,Et.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ri(t))throw Error(a(200));return tf(e,t,null,n)},Et.createRoot=function(e,t){if(!ri(e))throw Error(a(299));var n=!1,r="",s=Bu;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ei(e,1,!1,null,null,n,!1,r,s),e[dn]=t.current,Qr(e.nodeType===8?e.parentNode:e),new ni(t)},Et.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=hi(t),e=e===null?null:e.stateNode,e},Et.flushSync=function(e){return Xn(e)},Et.hydrate=function(e,t,n){if(!xs(t))throw Error(a(200));return gs(null,e,t,!0,n)},Et.hydrateRoot=function(e,t,n){if(!ri(e))throw Error(a(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=Bu;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Au(t,null,e,1,n??null,s,!1,o,i),e[dn]=t.current,Qr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new hs(t)},Et.render=function(e,t,n){if(!xs(t))throw Error(a(200));return gs(null,e,t,!1,n)},Et.unmountComponentAtNode=function(e){if(!xs(e))throw Error(a(40));return e._reactRootContainer?(Xn(function(){gs(null,null,e,!1,function(){e._reactRootContainer=null,e[dn]=null})}),!0):!1},Et.unstable_batchedUpdates=qo,Et.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xs(n))throw Error(a(200));if(e==null||e._reactInternals===void 0)throw Error(a(38));return gs(e,t,n,!1,r)},Et.version="18.3.1-next-f1338f8080-20240426",Et}var Gu;function hf(){if(Gu)return oi.exports;Gu=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(c){console.error(c)}}return g(),oi.exports=pf(),oi.exports}var Xu;function xf(){if(Xu)return vs;Xu=1;var g=hf();return vs.createRoot=g.createRoot,vs.hydrateRoot=g.hydrateRoot,vs}var gf=xf(),T=ci();const di=af(T);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=g=>g.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vf=g=>g.replace(/^([A-Z])|[\s-_]+(\w)/g,(c,a,p)=>p?p.toUpperCase():a.toLowerCase()),Zu=g=>{const c=vf(g);return c.charAt(0).toUpperCase()+c.slice(1)},pc=(...g)=>g.filter((c,a,p)=>!!c&&c.trim()!==""&&p.indexOf(c)===a).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wf={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=T.forwardRef(({color:g="currentColor",size:c=24,strokeWidth:a=2,absoluteStrokeWidth:p,className:v="",children:z,iconNode:S,...E},N)=>T.createElement("svg",{ref:N,...wf,width:c,height:c,stroke:g,strokeWidth:p?Number(a)*24/Number(c):a,className:pc("lucide",v),...E},[...S.map(([d,L])=>T.createElement(d,L)),...Array.isArray(z)?z:[z]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(g,c)=>{const a=T.forwardRef(({className:p,...v},z)=>T.createElement(Nf,{ref:z,iconNode:c,className:pc(`lucide-${yf(Zu(g))}`,`lucide-${g}`,p),...v}));return a.displayName=Zu(g),a};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ec=Re("arrow-left",jf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Er=Re("check",Sf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Xt=Re("chevron-down",kf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Pr=Re("chevron-left",bf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ht=Re("chevron-right",Cf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]],_f=Re("clipboard-paste",Ef);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],If=Re("download",Pf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Lf=Re("ellipsis-vertical",Ff);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Tf=Re("eye",Mf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Df=Re("folder",zf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Of=Re("graduation-cap",Rf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Af=Re("layers",$f);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Bf=Re("list",Uf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Vf=Re("maximize-2",Hf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Kf=Re("minimize-2",Wf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],qf=Re("pen",Qf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],tc=Re("pencil",Jf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pt=Re("plus",Yf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],Xf=Re("redo",Gf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],em=Re("refresh-cw",Zf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],nm=Re("rotate-ccw",tm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],hc=Re("search",rm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xc=Re("settings",lm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=[["path",{d:"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2",key:"wuwx1p"}]],om=Re("sigma",sm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3",key:"m1af9g"}],["path",{d:"M9 11.2h5.7",key:"3zgcl2"}]],am=Re("square-function",im);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],cm=Re("table",um);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ui=Re("trash-2",dm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],mm=Re("undo",fm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],hm=Re("upload",pm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],un=Re("x",xm),nc={},rc=[],lc="mechanics_formulas",sc="mechanics_scenarios",oc="mechanics_symbols",_t="uncategorized";class gm{formulas;scenarios;symbols;listeners=new Set;constructor(){const c=localStorage.getItem(lc),a=localStorage.getItem(sc),p=localStorage.getItem(oc);this.formulas=c?JSON.parse(c):{...nc},this.scenarios=a?JSON.parse(a):[...rc],this.symbols=p?JSON.parse(p):{},this.migrateOldDataFormat(),this.ensureUncategorizedScenario()}getSymbols(){return this.symbols}getSymbol(c){return this.symbols[c]}saveSymbol(c){this.symbols[c.id]=c,this.persist(),this.notifyListeners()}deleteSymbol(c){delete this.symbols[c],this.persist(),this.notifyListeners()}syncSymbolsFromFormulas(){const c=Object.values(this.formulas);let a=0,p=0;const v=new Map;Object.values(this.symbols).forEach(E=>{E?.key&&v.set(String(E.key),E.id)});const z=new Date().toISOString(),S=E=>{const N=v.get(E);if(N&&this.symbols[N])return this.symbols[N];const d=`sym-${Date.now()}-${Math.random().toString(16).slice(2)}`,L={id:d,key:E,entries:[],createdAt:z,updatedAt:z};return this.symbols[d]=L,v.set(E,d),a+=1,L};return c.forEach(E=>{const N=String(E.id),d=String(E.name||"");(E.symbols||[]).forEach(L=>{const U=String(L.symbol||"").trim();if(!U)return;const F=String(L.meaning||"").trim(),se=String(L.unit||"").trim();if(!F&&!se)return;const X=S(U),B=Array.isArray(X.entries)?[...X.entries]:[],ne=`auto-${N}`,ve={id:ne,title:d||U,description:F,unit:se||void 0,formulaIds:[N]},ee=B.findIndex(O=>O?.id===ne);ee>=0?(B[ee]={...B[ee],...ve},p+=1):(B.unshift({...ve,tables:[]}),p+=1),this.symbols[X.id]={...X,entries:B,updatedAt:z}})}),(a>0||p>0)&&(this.persist(),this.notifyListeners()),{createdSymbols:a,updatedAutoEntries:p}}migrateOldDataFormat(){let c=!1;this.scenarios.forEach(a=>{a.steps.forEach(p=>{p.formulas&&!p.formulaIds?(c=!0,p.formulaIds=p.formulas.map(v=>v.id||v),delete p.formulas):p.formulaIds||(p.formulaIds=[])})}),c&&this.persist()}ensureUncategorizedScenario(){this.scenarios.some(a=>a.id===_t)||this.scenarios.unshift({id:_t,name:"",icon:"",steps:[{id:"uncategorized-step",name:"",formulaIds:[]}]})}getFormulas(){return this.formulas}getFormula(c){return this.formulas[c]}saveFormula(c){if(this.formulas[c.id]=c,this.scenarios.forEach(a=>{a.steps.forEach(p=>{p.formulaIds=p.formulaIds.filter(v=>v!==c.id)})}),c.usedInContexts&&c.usedInContexts.length>0)c.usedInContexts.forEach(a=>{const p=this.scenarios.find(v=>v.id===a.scenarioId);if(p){const v=p.steps.find(z=>z.id===a.stepId);v&&v.formulaIds.push(c.id)}});else{const a=this.scenarios.find(p=>p.id===_t);a&&a.steps[0]&&a.steps[0].formulaIds.push(c.id)}this.persist(),this.notifyListeners()}deleteFormula(c){delete this.formulas[c],this.scenarios.forEach(a=>{a.steps.forEach(p=>{p.formulaIds=p.formulaIds.filter(v=>v!==c)})}),this.persist(),this.notifyListeners()}getScenarios(){return this.scenarios}getRootScenarios(){return this.scenarios.filter(c=>!c.parentId)}getChildScenarios(c){return this.scenarios.filter(a=>a.parentId===c)}getScenario(c){return this.scenarios.find(a=>a.id===c)}saveScenario(c){const a=this.scenarios.findIndex(p=>p.id===c.id);a>=0?this.scenarios[a]=c:this.scenarios.push(c),this.persist(),this.notifyListeners()}addStep(c,a){const p=this.scenarios.find(v=>v.id===c);if(p){const v={id:`step-${Date.now()}`,name:a,formulaIds:[]};p.steps.push(v),this.persist(),this.notifyListeners()}}deleteStep(c,a){const p=this.scenarios.find(v=>v.id===c);if(p){const v=p.steps.find(z=>z.id===a);v&&v.formulaIds.forEach(z=>{const S=this.formulas[z];if(S&&S.usedInContexts&&(S.usedInContexts=S.usedInContexts.filter(E=>!(E.scenarioId===c&&E.stepId===a)),S.usedInContexts.length===0)){const E=this.scenarios.find(N=>N.id===_t);E&&E.steps[0]&&E.steps[0].formulaIds.push(z)}}),p.steps=p.steps.filter(z=>z.id!==a),this.persist(),this.notifyListeners()}}addFormulaToStep(c,a,p){const v=this.scenarios.find(d=>d.id===c);if(!v)return;const z=v.steps.find(d=>d.id===a);if(!z)return;const S=this.formulas[p];if(!S)return;z.formulaIds.includes(p)||z.formulaIds.push(p),S.usedInContexts||(S.usedInContexts=[]),S.usedInContexts.some(d=>d.scenarioId===c&&d.stepId===a)||S.usedInContexts.push({scenarioId:c,stepId:a});const N=this.scenarios.find(d=>d.id===_t);N&&N.steps[0]&&(N.steps[0].formulaIds=N.steps[0].formulaIds.filter(d=>d!==p)),this.persist(),this.notifyListeners()}removeFormulaFromStep(c,a,p){const v=this.scenarios.find(E=>E.id===c);if(!v)return;const z=v.steps.find(E=>E.id===a);if(!z)return;const S=this.formulas[p];if(S){if(z.formulaIds=z.formulaIds.filter(E=>E!==p),S.usedInContexts&&(S.usedInContexts=S.usedInContexts.filter(E=>!(E.scenarioId===c&&E.stepId===a)),S.usedInContexts.length===0)){const E=this.scenarios.find(N=>N.id===_t);E&&E.steps[0]&&(E.steps[0].formulaIds.includes(p)||E.steps[0].formulaIds.push(p))}this.persist(),this.notifyListeners()}}deleteScenario(c){if(c===_t)return;this.getChildScenarios(c).forEach(p=>this.deleteScenario(p.id)),this.scenarios=this.scenarios.filter(p=>p.id!==c),this.persist(),this.notifyListeners()}subscribe(c){return this.listeners.add(c),()=>{this.listeners.delete(c)}}notifyListeners(){this.listeners.forEach(c=>c())}persist(){localStorage.setItem(lc,JSON.stringify(this.formulas)),localStorage.setItem(sc,JSON.stringify(this.scenarios)),localStorage.setItem(oc,JSON.stringify(this.symbols))}exportData(){const c={version:1,formulas:this.formulas,scenarios:this.scenarios,symbols:this.symbols,exportedAt:new Date().toISOString()};return JSON.stringify(c,null,2)}importData(c){const a=JSON.parse(c),p=a?.formulas,v=a?.scenarios,z=a?.symbols;if(!p||typeof p!="object")throw new Error("Invalid formulas");if(!Array.isArray(v))throw new Error("Invalid scenarios");this.formulas=p,this.scenarios=v,this.symbols=z&&typeof z=="object"?z:{},this.migrateOldDataFormat(),this.ensureUncategorizedScenario(),this.persist(),this.notifyListeners()}reset(){this.formulas={...nc},this.scenarios=[...rc],this.symbols={},this.persist(),this.notifyListeners()}}const de=new gm;function vn({root:g,fallback:c,className:a,maskBlocks:p=[],isMaskRevealed:v,onRevealMask:z}){const S=(N,d)=>{if(!N)return null;const L=Array.isArray(N.children)?N.children:[];return l.jsx("span",{className:"inline-flex items-center gap-0.5 leading-none",children:L.map((U,F)=>l.jsx(di.Fragment,{children:E(U,[...d,F])},`${d.join("-")}-${F}`))})},E=(N,d)=>{if(!N||typeof N!="object"||typeof N.type!="string")return null;const L=`formula-${d.join("-")}`,U=p.find(F=>F.id===L);if(U&&!(v?v(U.id):!0))return l.jsx("button",{type:"button",onClick:()=>z?.(U.id),className:"inline-block px-2 py-0.5 mx-0.5 rounded bg-muted/50 text-muted-foreground hover:bg-muted transition-colors",children:"?"});switch(N.type){case"symbol":return l.jsx("span",{className:"font-mono leading-none",children:N.value});case"number":return l.jsx("span",{className:"font-mono leading-none",children:N.text});case"fraction":return l.jsxs("span",{className:"inline-grid mx-1 align-middle justify-items-center",style:{lineHeight:1},children:[l.jsx("span",{className:"px-1",style:{paddingBottom:"0.20em"},children:S(N.numerator,[...d,"numerator"])}),l.jsx("span",{className:"w-full border-t border-foreground/70",style:{marginTop:"0.10em",marginBottom:"0.10em"},"aria-hidden":"true"}),l.jsx("span",{className:"px-1",style:{paddingTop:"0.42em"},children:S(N.denominator,[...d,"denominator"])})]});case"superscript":return l.jsxs("span",{className:"inline-flex items-start",children:[S(N.base,[...d,"base"]),l.jsx("sup",{className:"text-xs ml-0.5 leading-none",children:S(N.exponent,[...d,"exponent"])})]});case"subscript":return l.jsxs("span",{className:"inline-flex items-center leading-none",children:[S(N.base,[...d,"base"]),l.jsx("sub",{className:"text-xs ml-0.5 leading-none",children:S(N.index,[...d,"index"])})]});case"sqrt":return l.jsx("span",{className:"inline-block mx-0.5 align-bottom leading-none",children:l.jsxs("span",{className:"inline-flex items-center leading-none",children:[l.jsx("span",{className:"mr-0.5 leading-none",children:""}),l.jsx("span",{className:"border-t border-foreground/70 px-0.5",style:{paddingTop:"0.14em"},children:S(N.content,[...d,"content"])})]})});case"abs":return l.jsxs("span",{className:"inline-flex items-center mx-0.5",children:[l.jsx("span",{className:"mx-0.5",children:"|"}),S(N.content,[...d,"content"]),l.jsx("span",{className:"mx-0.5",children:"|"})]});case"function":return l.jsxs("span",{className:"inline-flex items-baseline mx-0.5",children:[l.jsx("span",{className:"font-mono",children:N.name}),l.jsx("span",{className:"mx-0.5",children:"("}),S(N.argument,[...d,"argument"]),l.jsx("span",{className:"mx-0.5",children:")"})]});case"sum":return l.jsxs("span",{className:"inline-flex items-center mx-0.5",children:[l.jsxs("span",{className:"inline-flex flex-col items-center mr-1",children:[l.jsx("span",{className:"text-base leading-none",children:""}),l.jsx("sub",{className:"text-[10px] leading-none",children:S(N.lower,[...d,"lower"])}),l.jsx("sup",{className:"text-[10px] leading-none",children:S(N.upper,[...d,"upper"])})]}),S(N.body,[...d,"body"])]});case"integral":return l.jsxs("span",{className:"inline-flex items-center mx-0.5",children:[l.jsxs("span",{className:"inline-flex flex-col items-center mr-1",children:[l.jsx("span",{className:"text-base leading-none",children:""}),l.jsx("sub",{className:"text-[10px] leading-none",children:S(N.lower,[...d,"lower"])}),l.jsx("sup",{className:"text-[10px] leading-none",children:S(N.upper,[...d,"upper"])})]}),S(N.body,[...d,"body"])]});default:return null}};return g?l.jsx("span",{className:a,children:S(g,[])}):c?l.jsx("span",{className:a,children:c}):null}function ic({onScenarioClick:g,onFormulaClick:c,onCreateFormula:a,fixedMode:p}){const[v,z]=T.useState(p??"scenario"),[S,E]=T.useState(""),[N,d]=T.useState(new Set([_t])),[L,U]=T.useState(null),[F,se]=T.useState(null),[X,B]=T.useState(null),[ne,ve]=T.useState(""),[ee,O]=T.useState(!1),_=T.useRef(null),A=T.useRef(null),M=T.useRef(!1);di.useEffect(()=>{p&&z(p)},[p]);const oe=(()=>{if(!S.trim())return[];const x=S.toLowerCase(),b=[],q=de.getFormulas();return Object.values(q).forEach(P=>{(P.name.toLowerCase().includes(x)||P.expression.toLowerCase().includes(x))&&b.push({type:"formula",id:P.id,name:P.name,secondaryInfo:P.expression})}),v==="scenario"&&de.getScenarios().forEach(V=>{V.name.toLowerCase().includes(x)&&b.push({type:"scenario",id:V.id,name:V.name}),V.steps.forEach(ce=>{ce.name.toLowerCase().includes(x)&&b.push({type:"step",id:ce.id,name:ce.name,secondaryInfo:V.name,scenarioId:V.id,stepId:ce.id})})}),b})(),Ce=S.trim().length>0,Y=x=>{x.type==="formula"?c(x.id):x.type==="scenario"?g(x.id):x.type==="step"&&x.scenarioId&&x.stepId&&g(x.scenarioId,x.stepId),E("")},xe=x=>{const b=new Set(N);b.has(x)?b.delete(x):b.add(x),d(b)},je=(x,b,q)=>{M.current=!1,A.current=setTimeout(()=>{M.current=!0;const P=x.target.getBoundingClientRect();U({type:b,id:q,x:P.left+P.width/2,y:P.top+P.height/2})},500)},Ee=()=>{A.current&&(clearTimeout(A.current),A.current=null)},$=()=>{A.current&&(clearTimeout(A.current),A.current=null),L||(M.current=!1)},Z=(x,b)=>{x.stopPropagation(),M.current||b(),setTimeout(()=>{M.current=!1},100)},pe=(x,b)=>{const q=x==="scenario"?de.getScenario(b)?.name||"":de.getFormula(b)?.name||"";se({type:x,id:b,name:q}),U(null)},re=()=>{if(F){if(F.type==="scenario"){const x=de.getScenario(F.id);x&&de.saveScenario({...x,name:F.name})}else{const x=de.getFormula(F.id);x&&de.saveFormula({...x,name:F.name})}se(null)}},H=(x,b)=>{const q=x==="scenario"?"":"";window.confirm(q)&&(x==="scenario"?de.deleteScenario(b):de.deleteFormula(b)),U(null)},ae=x=>{B({parentId:x}),ve(""),U(null)},le=()=>{if(!ne.trim())return;const x={id:`scenario-${Date.now()}`,name:ne.trim(),icon:"",parentId:X?.parentId,steps:[{id:`step-${Date.now()}`,name:"",formulaIds:[]}]};de.saveScenario(x),B(null),ve("")},h=()=>{try{const x=de.exportData(),b=new Blob([x],{type:"application/json;charset=utf-8"}),q=URL.createObjectURL(b),P=document.createElement("a"),V=new Date,ce=V.getFullYear(),Ne=String(V.getMonth()+1).padStart(2,"0"),nt=String(V.getDate()).padStart(2,"0");P.href=q,P.download=`formula-lab-backup-${ce}${Ne}${nt}.json`,document.body.appendChild(P),P.click(),P.remove(),URL.revokeObjectURL(q)}catch(x){console.error(x),window.alert("")}finally{O(!1)}},y=async x=>{try{const b=await x.text();if(!window.confirm(""))return;de.importData(b),window.alert("")}catch(b){console.error(b),window.alert("JSON")}finally{O(!1),_.current&&(_.current.value="")}},Q=(x,b=0)=>(x?de.getChildScenarios(x):de.getRootScenarios()).map(P=>{const V=N.has(P.id),ce=de.getChildScenarios(P.id).length>0;return P.id,l.jsxs("div",{children:[l.jsx("div",{className:"relative group",children:l.jsxs("button",{onTouchStart:Ne=>je(Ne,"scenario",P.id),onTouchEnd:Ee,onTouchCancel:$,onMouseDown:Ne=>je(Ne,"scenario",P.id),onMouseUp:Ee,onMouseLeave:$,onClick:Ne=>Z(Ne,()=>{ce?xe(P.id):g(P.id)}),className:"w-full glass-card rounded-xl px-4 py-3 hover:shadow-md transition-all text-left flex items-center gap-3",style:{marginLeft:`${b*1.25}rem`},children:[ce&&l.jsx("div",{className:"text-primary",children:V?l.jsx(Xt,{className:"w-5 h-5"}):l.jsx(Ht,{className:"w-5 h-5"})}),l.jsx("div",{className:"flex-1 text-card-foreground",children:P.name})]})}),V&&ce&&l.jsx("div",{className:"mt-2 space-y-2",children:Q(P.id,b+1)})]},P.id)});return l.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[l.jsxs("header",{className:"bg-background px-4 pt-3 pb-2 sticky top-0 z-10 relative",children:[l.jsxs("div",{className:"flex gap-2 mb-3",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(hc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),l.jsx("input",{type:"text",value:S,onChange:x=>E(x.target.value),placeholder:v==="scenario"?"...":"...",className:"w-full pl-10 pr-3 py-2.5 glass-card rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 placeholder:text-muted-foreground"})]}),l.jsx("button",{onClick:()=>O(x=>!x),className:"px-3 py-2.5 glass-card rounded-xl hover:shadow-md transition-all flex items-center justify-center","aria-label":"Home menu",children:l.jsx(xc,{className:"w-5 h-5 text-muted-foreground"})})]}),ee&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>O(!1)}),l.jsxs("div",{className:"absolute right-4 mt-1 z-50 glass-card rounded-2xl shadow-2xl py-2 min-w-[180px] border border-border",children:[l.jsxs("button",{onClick:()=>h(),className:"w-full px-5 py-3 text-left text-sm hover:bg-primary/5 text-foreground transition-colors flex items-center gap-2",children:[l.jsx(If,{className:"w-4 h-4 text-primary"}),""]}),l.jsxs("button",{onClick:()=>_.current?.click(),className:"w-full px-5 py-3 text-left text-sm hover:bg-primary/5 text-foreground transition-colors flex items-center gap-2",children:[l.jsx(hm,{className:"w-4 h-4 text-primary"}),""]}),l.jsx("input",{ref:_,type:"file",accept:"application/json",className:"hidden",onChange:x=>{const b=x.target.files?.[0];b&&y(b)}})]})]}),!p&&l.jsxs("div",{className:"flex gap-1 p-1 glass-card rounded-xl",children:[l.jsx("button",{onClick:()=>z("scenario"),className:`flex-1 py-2 px-4 rounded-lg text-sm transition-all ${v==="scenario"?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:""}),l.jsx("button",{onClick:()=>z("formula"),className:`flex-1 py-2 px-4 rounded-lg text-sm transition-all ${v==="formula"?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:""})]}),Ce&&l.jsx("div",{className:"absolute left-4 right-4 mt-2 glass-card rounded-xl shadow-lg max-h-80 overflow-y-auto z-50 border border-border",children:oe.length===0?l.jsx("div",{className:"px-4 py-8 text-sm text-muted-foreground text-center",children:""}):oe.map((x,b)=>l.jsx("button",{onClick:()=>Y(x),className:"w-full px-4 py-3 text-left hover:bg-primary/5 border-b border-border last:border-b-0 transition-colors first:rounded-t-xl last:rounded-b-xl",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-xs px-2 py-0.5 bg-primary/10 text-primary rounded-md",children:[x.type==="formula"&&"",x.type==="scenario"&&"",x.type==="step"&&""]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-sm text-foreground",children:x.name}),x.secondaryInfo&&l.jsx("div",{className:"text-xs text-muted-foreground font-mono mt-0.5",children:x.secondaryInfo})]})]})},`${x.type}-${x.id}-${b}`))})]}),l.jsx("main",{className:"flex-1 p-4 pb-20 overflow-y-auto space-y-2",children:v==="scenario"?l.jsxs(l.Fragment,{children:[Q(),l.jsxs("button",{onClick:()=>ae(),className:"w-full glass-card rounded-2xl px-4 py-3 text-sm text-muted-foreground hover:shadow-md hover:text-primary transition-all flex items-center justify-center gap-2 border border-dashed border-primary/30",children:[l.jsx(Pt,{className:"w-4 h-4"}),l.jsx("span",{children:""})]})]}):Object.values(de.getFormulas()).map(x=>l.jsx("div",{className:"relative group",children:l.jsxs("button",{onTouchStart:b=>je(b,"formula",x.id),onTouchEnd:Ee,onTouchCancel:$,onMouseDown:b=>je(b,"formula",x.id),onMouseUp:Ee,onMouseLeave:$,onClick:b=>Z(b,()=>c(x.id)),className:"w-full glass-card rounded-2xl px-4 py-3 hover:shadow-md transition-all text-left",children:[l.jsx("div",{className:"text-foreground mb-1",children:x.name}),l.jsx("div",{className:"text-sm text-muted-foreground font-mono",children:x.structureTree||x.structureData?l.jsx(vn,{root:x.structureTree||x.structureData,fallback:x.structureTree||x.structureData?l.jsx(vn,{root:x.structureTree||x.structureData,fallback:x.expression,maskBlocks:[],className:""}):x.expression,maskBlocks:[],className:""}):x.expression})]})},x.id))}),l.jsx("button",{onClick:a,"aria-label":"Create formula",style:{width:60,height:60,borderRadius:9999,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"0.2s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgb(83, 190, 232)",background:"rgb(83, 190, 232)",color:"white",boxShadow:"rgba(83, 190, 232, 0.5) 0px 8px 24px -6px",outline:"none",padding:0,opacity:1,position:"fixed",right:16,bottom:"calc(16px + env(safe-area-inset-bottom) + 56px)",zIndex:110,transform:"scale(1)"},children:l.jsx(Pt,{width:24,height:24})}),L&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>U(null)}),l.jsxs("div",{className:"fixed glass-card rounded-2xl shadow-2xl py-2 z-50 min-w-[160px]",style:{left:`${L.x}px`,top:`${L.y}px`,transform:"translate(-50%, -50%)"},children:[l.jsx("button",{onClick:()=>pe(L.type,L.id),className:"w-full px-5 py-3 text-left text-sm hover:bg-primary/5 text-foreground transition-colors",children:""}),L.type==="scenario"&&l.jsx("button",{onClick:()=>ae(L.id),className:"w-full px-5 py-3 text-left text-sm hover:bg-primary/5 text-foreground transition-colors",children:""}),L.id!==_t&&l.jsx("button",{onClick:()=>H(L.type,L.id),className:"w-full px-5 py-3 text-left text-sm text-destructive hover:bg-destructive/5 transition-colors",children:""})]})]}),F&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/30 z-40",onClick:()=>se(null)}),l.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-6",children:l.jsxs("div",{className:"glass-card rounded-2xl p-6 w-full max-w-sm shadow-2xl",children:[l.jsx("h3",{className:"text-foreground mb-4",children:F.type==="scenario"?"":""}),l.jsx("input",{type:"text",value:F.name,onChange:x=>se({...F,name:x.target.value}),onKeyDown:x=>{x.key==="Enter"&&re(),x.key==="Escape"&&se(null)},className:"w-full px-4 py-3 glass-card rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 placeholder:text-muted-foreground mb-4",autoFocus:!0}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>se(null),className:"flex-1 px-4 py-2.5 glass-card rounded-xl text-sm text-muted-foreground hover:bg-muted/10 transition-colors",children:""}),l.jsx("button",{onClick:re,className:"flex-1 px-4 py-2.5 bg-primary text-primary-foreground rounded-xl text-sm hover:opacity-90 transition-opacity",children:""})]})]})})]}),X&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/30 z-40",onClick:()=>B(null)}),l.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-6",children:l.jsxs("div",{className:"glass-card rounded-2xl p-6 w-full max-w-sm shadow-2xl",children:[l.jsx("h3",{className:"text-foreground mb-4",children:X.parentId?"":""}),l.jsx("input",{type:"text",value:ne,onChange:x=>ve(x.target.value),onKeyDown:x=>{x.key==="Enter"&&le(),x.key==="Escape"&&B(null)},className:"w-full px-4 py-3 glass-card rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 placeholder:text-muted-foreground mb-4",placeholder:"",autoFocus:!0}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>B(null),className:"flex-1 px-4 py-2.5 glass-card rounded-xl text-sm text-muted-foreground hover:bg-muted/10 transition-colors",children:""}),l.jsx("button",{onClick:le,disabled:!ne.trim(),className:"flex-1 px-4 py-2.5 bg-primary text-primary-foreground rounded-xl text-sm hover:opacity-90 transition-opacity disabled:opacity-30 disabled:cursor-not-allowed",children:""})]})]})})]})]})}function fi({currentPage:g,onNavigateScenes:c,onNavigateFormulas:a,onNavigateSymbols:p,onNavigateLearning:v}){const z=S=>`flex-1 py-3 flex flex-col items-center justify-center transition-colors ${S?"text-primary":"text-muted-foreground"}`;return l.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 pointer-events-auto glass-nav border-t border-border",children:l.jsxs("div",{className:"flex",children:[l.jsx("button",{onClick:c,className:z(g==="scenes"),children:l.jsx(Df,{className:"w-6 h-6"})}),l.jsx("button",{onClick:a,className:z(g==="formulas"),children:l.jsx(am,{className:"w-6 h-6"})}),l.jsx("button",{onClick:p,className:z(g==="symbols"),children:l.jsx(om,{className:"w-6 h-6"})}),l.jsx("button",{onClick:v,className:z(g==="learning"),children:l.jsx(Of,{className:"w-6 h-6"})})]})})}function ym({scenarioId:g,targetStepId:c,onBack:a,onFormulaClick:p,onLearningClick:v}){const[z,S]=T.useState(()=>de.getScenario(g)),[E,N]=T.useState(new Set),[d,L]=T.useState(!1),[U,F]=T.useState(""),[se,X]=T.useState(null),[B,ne]=T.useState(null),ve=(Y,xe)=>{const Z=window.innerWidth||0,pe=window.innerHeight||0;let re=xe?xe.right-220:Z-220-12,H=xe?xe.bottom+8:12;re<12&&(re=12),re+220>Z-12&&(re=Math.max(12,Z-220-12)),H+110>pe-12&&xe&&(H=xe.top-110-8),H<12&&(H=12),ne({stepId:Y,x:re,y:H})},ee=()=>{ne(null)};if(T.useEffect(()=>{if(!B)return;const Y=xe=>{xe.key==="Escape"&&ee()};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[B]),T.useEffect(()=>de.subscribe(()=>{S(de.getScenario(g))}),[g]),!z)return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:l.jsx("div",{className:"text-muted-foreground",children:""})});const O=Y=>{const xe=new Set(E);xe.has(Y)?xe.delete(Y):xe.add(Y),N(xe)},_=()=>{N(new Set(z.steps.map(Y=>Y.id)))},A=()=>{N(new Set)};T.useEffect(()=>{c&&N(new Set([c]))},[c]);const M=()=>{U.trim()&&(de.addStep(g,U),F(""),L(!1))},D=Y=>{confirm("")&&de.deleteStep(g,Y)},oe=(Y,xe)=>{de.addFormulaToStep(g,Y,xe),X(null)},Ce=(Y,xe,je)=>{je.stopPropagation(),de.removeFormulaFromStep(g,Y,xe)};return l.jsxs("div",{className:"min-h-screen flex flex-col bg-background pb-16",children:[B&&l.jsx("div",{className:"fixed inset-0 z-50",onPointerDown:()=>ee(),onContextMenu:Y=>Y.preventDefault(),children:l.jsxs("div",{className:"absolute bg-white/90 dark:bg-neutral-900/90 backdrop-blur-md shadow-xl rounded-xl border border-border p-1 min-w-[200px]",style:{left:B.x,top:B.y},onPointerDown:Y=>Y.stopPropagation(),children:[l.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-lg hover:bg-accent transition-colors",onClick:()=>{X(B.stepId),ee()},children:" "}),l.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 rounded-lg hover:bg-accent transition-colors text-red-600",onClick:()=>{D(B.stepId),ee()},children:""})]})}),l.jsxs("header",{className:"px-5 py-4 flex items-center justify-between border-b border-border",children:[l.jsx("button",{onClick:a,className:"p-2 hover:bg-primary/10 rounded-xl transition-colors",children:l.jsx(Pr,{className:"w-5 h-5 text-foreground"})}),l.jsx("h1",{className:"flex-1 text-center text-foreground",children:z.name}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:_,className:"p-2 text-primary hover:bg-primary/10 rounded-xl transition-colors",title:"",children:l.jsx(Vf,{className:"w-5 h-5"})}),l.jsx("button",{onClick:A,className:"p-2 text-primary hover:bg-primary/10 rounded-xl transition-colors",title:"",children:l.jsx(Kf,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>L(!0),className:"p-2 text-primary hover:bg-primary/10 rounded-xl transition-colors",title:"",children:l.jsx(Pt,{className:"w-5 h-5"})})]})]}),l.jsx("main",{className:"flex-1 p-4 pb-4 overflow-y-auto space-y-2",children:z.steps.map((Y,xe)=>{const je=E.has(Y.id);return l.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden",children:[l.jsxs("div",{className:"px-4 py-3 flex items-center justify-between select-none",onContextMenu:Ee=>{Ee.preventDefault(),ve(Y.id,Ee.currentTarget?.getBoundingClientRect?.())},children:[l.jsxs("button",{type:"button",onClick:()=>O(Y.id),className:"flex items-center gap-2 flex-1 text-left",children:[l.jsx(Xt,{className:`w-4 h-4 transition-transform ${je?"rotate-180":""}`}),l.jsxs("span",{className:"font-medium text-foreground",children:["",xe+1,": ",Y.name]})]}),l.jsx("button",{type:"button","aria-label":"",onClick:Ee=>{Ee.stopPropagation(),ve(Y.id,Ee.currentTarget.getBoundingClientRect())},className:"p-2 text-muted-foreground hover:text-foreground hover:bg-accent rounded-xl transition-colors",children:l.jsx(Lf,{className:"w-4 h-4"})})]}),je&&l.jsxs("div",{className:"border-t border-border",children:[(Y.formulaIds||[]).map(Ee=>{const $=de.getFormula(Ee);return $?l.jsxs("div",{className:"flex items-center gap-3 px-5 py-3 hover:bg-primary/5 transition-colors border-b border-border last:border-b-0",children:[l.jsxs("button",{onClick:()=>p($.id),className:"flex-1 text-left",children:[l.jsx("div",{className:"text-sm text-foreground mb-1",children:$.name}),l.jsx("div",{className:"text-sm text-muted-foreground",children:l.jsx(vn,{root:$.structureTree||$.structureData,fallback:$.expression,className:"text-sm text-muted-foreground"})})]}),g!==_t&&l.jsx("button",{onClick:Z=>Ce(Y.id,Ee,Z),className:"p-2 text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-xl transition-colors",children:l.jsx(un,{className:"w-4 h-4"})})]},$.id):null}),g!==_t&&l.jsx("div",{className:"p-4",children:se===Y.id?l.jsx("div",{className:"glass-card rounded-xl max-h-60 overflow-y-auto",children:Object.values(de.getFormulas()).map(Ee=>{const $=Y.formulaIds.includes(Ee.id);return l.jsxs("button",{onClick:()=>oe(Y.id,Ee.id),disabled:$,className:"w-full px-4 py-3 text-left hover:bg-primary/5 border-b border-border last:border-b-0 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:[l.jsx("div",{className:"text-sm text-foreground",children:Ee.name}),l.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:Ee.expression})]},Ee.id)})}):l.jsx("div",{className:"text-xs text-muted-foreground px-1",children:" / "})})]})]},Y.id)})}),l.jsx(fi,{currentPage:"home",onNavigateHome:a,onNavigateLearning:v}),d&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/30 z-40",onClick:()=>L(!1)}),l.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-6",children:l.jsxs("div",{className:"glass-card rounded-2xl p-6 w-full max-w-sm shadow-2xl",children:[l.jsx("h2",{className:"text-foreground mb-4",children:""}),l.jsx("input",{type:"text",value:U,onChange:Y=>F(Y.target.value),onKeyDown:Y=>{Y.key==="Enter"&&M(),Y.key==="Escape"&&L(!1)},className:"w-full px-4 py-3 glass-card rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 placeholder:text-muted-foreground mb-4",placeholder:"",autoFocus:!0}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>L(!1),className:"flex-1 px-4 py-2.5 glass-card rounded-xl text-sm text-muted-foreground hover:bg-muted/10 transition-colors",children:""}),l.jsx("button",{onClick:M,disabled:!U.trim(),className:"flex-1 px-4 py-2.5 bg-primary text-primary-foreground rounded-xl text-sm hover:opacity-90 transition-opacity disabled:opacity-30 disabled:cursor-not-allowed",children:""})]})]})})]})]})}function vm({formulaId:g,onBack:c,onEdit:a,onLearningClick:p,onFormulaClick:v,onContextClick:z,onSymbolClick:S}){const E=de.getFormula(g),[N,d]=T.useState(!1),[L,U]=T.useState(!1),[F,se]=T.useState(!1),X=O=>(O||"").trim(),B=(...O)=>({children:O}),ne=O=>({type:"symbol",value:O}),ve=O=>{const _=(O||"").trim();if(!_)return B();let A=0;const M=()=>{if(_[A]==="{"){A++;const Y=A;let xe=1;for(;A<_.length;){const Ee=_[A];if(Ee==="{")xe++;else if(Ee==="}"&&(xe--,xe===0))break;A++}const je=_.slice(Y,A);return _[A]==="}"&&A++,je}const Ce=A;for(;A<_.length;){const Y=_[A];if(Y==="_"||Y==="^")break;A++}return _.slice(Ce,A)};let D="";for(;A<_.length&&_[A]!=="_"&&_[A]!=="^";)D+=_[A],A++;D=D.trim();let oe=B(ne(D||_));for(;A<_.length;){const Ce=_[A];if(Ce!=="_"&&Ce!=="^"){A++;continue}A++;const Y=M(),xe=B(ne(Y.trim()));Ce==="_"?oe=B({type:"subscript",base:oe,index:xe}):oe=B({type:"superscript",base:oe,exponent:xe})}return oe},ee=(O,_,A)=>{if(!S||!E)return;const M=X(O),oe=Object.values(de.getSymbols()).find(je=>X(je.key)===M);if(oe?.id){S(oe.id);return}const Ce=new Date().toISOString(),Y=`sym-${Date.now()}-${Math.random().toString(16).slice(2)}`,xe=`auto-${String(E.id)}`;de.saveSymbol({id:Y,key:O,entries:[{id:xe,title:String(E.name||O),description:String(_||""),unit:A?String(A):void 0,formulaIds:[String(E.id)],tables:[]}],createdAt:Ce,updatedAt:Ce}),S(Y)};return E?l.jsxs("div",{className:"min-h-screen flex flex-col bg-background pb-16",children:[l.jsxs("header",{className:"px-5 py-4 flex items-center justify-between border-b border-border",children:[l.jsx("button",{onClick:c,className:"p-2 hover:bg-primary/10 rounded-xl transition-colors",children:l.jsx(Pr,{className:"w-5 h-5 text-foreground"})}),l.jsx("h1",{className:"flex-1 text-center text-foreground",children:E.name}),l.jsx("button",{onClick:a,className:"p-2 text-primary hover:bg-primary/10 rounded-xl transition-colors",children:l.jsx(qf,{className:"w-5 h-5"})})]}),l.jsxs("main",{className:"flex-1 p-4 pb-4 space-y-3 overflow-y-auto",children:[l.jsx("div",{className:"glass-card rounded-2xl p-5",children:l.jsx("div",{className:"text-2xl text-foreground text-center",children:l.jsx(vn,{root:E.structureTree||E.structureData,fallback:E.expression,className:"",maskBlocks:[]})})}),E.usedInContexts&&E.usedInContexts.length>0&&l.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden",children:[l.jsxs("button",{onClick:()=>U(!L),className:"w-full px-5 py-4 flex items-center gap-3 hover:bg-primary/5 transition-colors",children:[l.jsx("div",{className:"flex-1 text-left text-sm text-foreground",children:""}),l.jsx("div",{className:"text-primary",children:L?l.jsx(Xt,{className:"w-5 h-5"}):l.jsx(Ht,{className:"w-5 h-5"})})]}),L&&l.jsx("div",{className:"border-t border-border",children:E.usedInContexts.map((O,_)=>{const M=de.getScenarios().find(oe=>oe.id===O.scenarioId),D=M?.steps.find(oe=>oe.id===O.stepId);return l.jsxs("button",{onClick:()=>z(O.scenarioId,O.stepId),className:"w-full px-5 py-3 text-left hover:bg-primary/5 transition-colors border-b border-border last:border-b-0",children:[l.jsx("div",{className:"text-foreground text-sm",children:M?.name}),l.jsx("div",{className:"text-muted-foreground text-xs mt-1",children:D?.name})]},_)})})]}),E.symbols&&E.symbols.length>0&&l.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden",children:[l.jsxs("button",{onClick:()=>se(!F),className:"w-full px-5 py-4 flex items-center gap-3 hover:bg-primary/5 transition-colors",children:[l.jsx("div",{className:"flex-1 text-left text-sm text-foreground",children:""}),l.jsx("div",{className:"text-primary",children:F?l.jsx(Xt,{className:"w-5 h-5"}):l.jsx(Ht,{className:"w-5 h-5"})})]}),F&&l.jsx("div",{className:"border-t border-border",children:E.symbols.map((O,_)=>l.jsxs("div",{className:"px-5 py-3 flex items-center gap-4 text-sm border-b border-border last:border-b-0",children:[(()=>{const A=(O.symbol??O.key??"").toString(),M=A?ve(A):null,D=M&&Array.isArray(M.children)&&M.children.length>0?M:null;return l.jsx("button",{type:"button",onClick:()=>ee(A,O.meaning,O.unit),disabled:!S,className:"flex-shrink-0 min-w-14 w-14 text-center text-foreground text-lg rounded-lg hover:bg-primary/5 transition-colors disabled:opacity-100 disabled:hover:bg-transparent",title:A,children:l.jsx(vn,{root:D,fallback:A,className:"",maskBlocks:[]})})})(),l.jsx("div",{className:"flex-1 text-foreground",children:O.meaning}),O.unit&&l.jsx("div",{className:"text-muted-foreground text-xs",children:O.unit})]},_))})]}),E.equivalentExpressions&&E.equivalentExpressions.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-2 px-1",children:""}),l.jsx("div",{className:"glass-card rounded-2xl divide-y divide-border",children:E.equivalentExpressions.map((O,_)=>l.jsx("div",{className:"px-5 py-3 text-sm font-mono text-foreground",children:O},_))})]}),E.description&&l.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden",children:[l.jsxs("button",{onClick:()=>d(!N),className:"w-full px-5 py-4 flex items-center gap-3 hover:bg-primary/5 transition-colors",children:[l.jsx("div",{className:"flex-1 text-left text-sm text-foreground",children:""}),l.jsx("div",{className:"text-primary",children:N?l.jsx(Xt,{className:"w-5 h-5"}):l.jsx(Ht,{className:"w-5 h-5"})})]}),N&&l.jsx("div",{className:"px-5 py-4 pt-2 text-sm text-foreground leading-relaxed border-t border-border",children:E.description})]}),E.usedFormulas.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-2 px-1",children:""}),l.jsx("div",{className:"glass-card rounded-2xl divide-y divide-border",children:E.usedFormulas.map(O=>{const _=de.getFormula(O);return _?l.jsxs("button",{onClick:()=>v(O),className:"w-full px-5 py-3 text-left hover:bg-primary/5 transition-colors",children:[l.jsx("div",{className:"text-sm text-foreground mb-1",children:_.name}),l.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:_.expression})]},O):null})})]}),E.derivableFormulas.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-2 px-1",children:""}),l.jsx("div",{className:"glass-card rounded-2xl divide-y divide-border",children:E.derivableFormulas.map(O=>{const _=de.getFormula(O);return _?l.jsxs("button",{onClick:()=>v(O),className:"w-full px-5 py-3 text-left hover:bg-primary/5 transition-colors",children:[l.jsx("div",{className:"text-sm text-foreground mb-1",children:_.name}),l.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:_.expression})]},O):null})})]})]}),l.jsx(fi,{currentPage:"home",onNavigateHome:c,onNavigateLearning:p})]}):l.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[l.jsxs("header",{className:"px-5 py-4 flex items-center justify-between border-b border-border",children:[l.jsx("button",{onClick:c,className:"p-2 hover:bg-primary/10 rounded-xl transition-colors",children:l.jsx(Pr,{className:"w-5 h-5 text-foreground"})}),l.jsx("h1",{className:"flex-1 text-center text-foreground",children:""}),l.jsx("div",{className:"w-9"})]}),l.jsx("main",{className:"flex-1 p-6 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-muted-foreground mb-6",children:""}),l.jsx("button",{onClick:c,className:"px-6 py-3 bg-primary text-primary-foreground rounded-xl hover:opacity-90 transition-opacity",children:""})]})})]})}function wm({selectedScenarioIds:g,onToggleScenario:c,contentTypes:a,onToggleContentType:p,stepCoverMode:v,onStepCoverModeChange:z,mode:S,ratio:E,isRandom:N,onModeChange:d,onRatioChange:L,onToggleRandom:U,onApply:F,onClose:se}){const X=de.getScenarios(),B=g.length>0&&a.length>0;return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/30 z-40",onClick:se}),l.jsxs("div",{className:"fixed top-0 right-0 bottom-0 w-full max-w-md bg-background shadow-2xl z-50 overflow-y-auto",children:[l.jsxs("div",{className:"sticky top-0 bg-background border-b border-border px-5 py-4 flex items-center justify-between",children:[l.jsx("h2",{className:"text-foreground",children:""}),l.jsx("button",{onClick:se,className:"p-2 text-muted-foreground hover:text-foreground hover:bg-muted/10 rounded-xl transition-colors",children:l.jsx(un,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-5 space-y-6 pb-32",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm text-foreground mb-3",children:""}),l.jsx("div",{className:"space-y-2",children:X.map(ne=>l.jsxs("button",{onClick:()=>c(ne.id),className:`w-full glass-card rounded-xl px-4 py-3 text-left flex items-center gap-3 transition-all ${g.includes(ne.id)?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,children:[l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${g.includes(ne.id)?"border-primary bg-primary":"border-muted-foreground"}`,children:g.includes(ne.id)&&l.jsx(Er,{className:"w-3 h-3 text-primary-foreground"})}),l.jsx("span",{className:"flex-1 text-foreground",children:ne.name})]},ne.id))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm text-foreground mb-3",children:""}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("button",{onClick:()=>p("formula"),className:`w-full glass-card rounded-xl px-4 py-3 text-left flex items-center gap-3 transition-all ${a.includes("formula")?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,children:[l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${a.includes("formula")?"border-primary bg-primary":"border-muted-foreground"}`,children:a.includes("formula")&&l.jsx(Er,{className:"w-3 h-3 text-primary-foreground"})}),l.jsx("span",{className:"flex-1 text-foreground",children:""})]}),l.jsxs("button",{onClick:()=>p("symbols"),className:`w-full glass-card rounded-xl px-4 py-3 text-left flex items-center gap-3 transition-all ${a.includes("symbols")?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,children:[l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${a.includes("symbols")?"border-primary bg-primary":"border-muted-foreground"}`,children:a.includes("symbols")&&l.jsx(Er,{className:"w-3 h-3 text-primary-foreground"})}),l.jsx("span",{className:"flex-1 text-foreground",children:""})]}),l.jsxs("button",{onClick:()=>p("relations"),className:`w-full glass-card rounded-xl px-4 py-3 text-left flex items-center gap-3 transition-all ${a.includes("relations")?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,children:[l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${a.includes("relations")?"border-primary bg-primary":"border-muted-foreground"}`,children:a.includes("relations")&&l.jsx(Er,{className:"w-3 h-3 text-primary-foreground"})}),l.jsx("span",{className:"flex-1 text-foreground",children:""})]}),l.jsxs("button",{onClick:()=>p("steps"),className:`w-full glass-card rounded-xl px-4 py-3 text-left flex items-center gap-3 transition-all ${a.includes("steps")?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,children:[l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${a.includes("steps")?"border-primary bg-primary":"border-muted-foreground"}`,children:a.includes("steps")&&l.jsx(Er,{className:"w-3 h-3 text-primary-foreground"})}),l.jsx("span",{className:"flex-1 text-foreground",children:""})]})]})]}),a.length>0&&l.jsxs(l.Fragment,{children:[(a.includes("formula")||a.includes("symbols"))&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm text-foreground mb-3",children:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>d("left"),className:`flex-1 py-2.5 rounded-xl text-sm transition-all ${S==="left"?"bg-primary text-primary-foreground shadow-md":"glass-card text-foreground hover:shadow-md"}`,children:""}),l.jsx("button",{onClick:()=>d("right"),className:`flex-1 py-2.5 rounded-xl text-sm transition-all ${S==="right"?"bg-primary text-primary-foreground shadow-md":"glass-card text-foreground hover:shadow-md"}`,children:""}),l.jsx("button",{onClick:()=>d("whole"),className:`flex-1 py-2.5 rounded-xl text-sm transition-all ${S==="whole"?"bg-primary text-primary-foreground shadow-md":"glass-card text-foreground hover:shadow-md"}`,children:""})]})]}),a.includes("steps")&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm text-foreground mb-3",children:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>z("title"),className:`flex-1 py-2.5 rounded-xl text-sm transition-all ${v==="title"?"bg-primary text-primary-foreground shadow-md":"glass-card text-foreground hover:shadow-md"}`,children:""}),l.jsx("button",{onClick:()=>z("formulas"),className:`flex-1 py-2.5 rounded-xl text-sm transition-all ${v==="formulas"?"bg-primary text-primary-foreground shadow-md":"glass-card text-foreground hover:shadow-md"}`,children:""}),l.jsx("button",{onClick:()=>z("random"),className:`flex-1 py-2.5 rounded-xl text-sm transition-all ${v==="random"?"bg-primary text-primary-foreground shadow-md":"glass-card text-foreground hover:shadow-md"}`,children:""})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm text-foreground mb-3",children:""}),l.jsx("div",{className:"grid grid-cols-4 gap-2",children:[30,50,70,100].map(ne=>l.jsxs("button",{onClick:()=>L(ne),className:`py-2.5 rounded-xl text-sm transition-all ${E===ne?"bg-primary text-primary-foreground shadow-md":"glass-card text-foreground hover:shadow-md"}`,children:[ne,"%"]},ne))})]}),l.jsx("div",{children:l.jsxs("button",{onClick:U,className:`w-full glass-card rounded-xl px-4 py-3 text-left flex items-center gap-3 transition-all ${N?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,children:[l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${N?"border-primary bg-primary":"border-muted-foreground"}`,children:N&&l.jsx(Er,{className:"w-3 h-3 text-primary-foreground"})}),l.jsx("span",{className:"flex-1 text-foreground",children:""})]})})]})]}),l.jsx("div",{className:"fixed bottom-0 left-0 right-0 max-w-md ml-auto glass-nav px-5 py-4",children:l.jsx("button",{onClick:F,disabled:!B,className:"w-full py-4 bg-primary text-primary-foreground rounded-2xl shadow-lg hover:opacity-90 transition-opacity disabled:opacity-30 disabled:cursor-not-allowed",children:B?" / ":""})})]})]})}function Nm({onBack:g,onNavigateHome:c}){const[a,p]=T.useState(!1),[v,z]=T.useState([]),[S,E]=T.useState(["formula"]),[N,d]=T.useState("right"),[L,U]=T.useState(50),[F,se]=T.useState(!0),[X,B]=T.useState("random"),[ne,ve]=T.useState(!1),[ee,O]=T.useState(new Set),[_,A]=T.useState(0),[M,D]=T.useState([]),oe=()=>{const y=new Set;v.forEach(x=>{const b=de.getScenario(x);b&&b.steps.forEach(q=>{q.formulaIds.forEach(P=>y.add(P))})});const Q=[];return y.forEach(x=>{const b=de.getFormula(x);b&&Q.push(b)}),Q},Ce=()=>{const y=[];return v.forEach(Q=>{const x=de.getScenario(Q);x&&x.steps.forEach(b=>{y.push({scenarioId:Q,scenarioName:x.name,stepId:b.id,stepName:b.name,formulaIds:b.formulaIds||[]})})}),y},Y=y=>{if(X==="title"?!0:X==="formulas"?!1:Math.random()<.5)return[{id:`step-${y.stepId}-title`,content:{kind:"title"}}];const x=y.formulaIds||[];if(x.length===0)return[{id:`step-${y.stepId}-title`,content:{kind:"title"}}];const b=Math.max(1,Math.ceil(x.length*(L/100)));let q;return F?q=[...Array(x.length).keys()].sort(()=>Math.random()-.5).slice(0,b):q=[...Array(x.length).keys()].slice(0,b),q.map(P=>({id:`step-${y.stepId}-formula-${P}`,content:{kind:"formula",index:P}}))},xe=(y,Q=[])=>{const x=[],b=(q,P)=>{q.children.forEach((V,ce)=>{const Ne=[...P,ce];x.push(Ne),V.type==="fraction"?(b(V.numerator,[...Ne,"numerator"]),b(V.denominator,[...Ne,"denominator"])):V.type==="superscript"?(b(V.base,[...Ne,"base"]),b(V.exponent,[...Ne,"exponent"])):V.type==="subscript"?(b(V.base,[...Ne,"base"]),b(V.index,[...Ne,"index"])):V.type==="sqrt"||V.type==="abs"?b(V.content,[...Ne,"content"]):V.type==="sum"||V.type==="integral"?(b(V.lower,[...Ne,"lower"]),b(V.upper,[...Ne,"upper"]),b(V.body,[...Ne,"body"])):V.type==="function"&&b(V.argument,[...Ne,"argument"])})};return b(y,Q),x},je=y=>{for(let Q=0;Q<y.children.length;Q++){const x=y.children[Q];if(x.type==="symbol"&&x.value==="=")return Q}return-1},Ee=y=>{const Q=xe(y),x=je(y);let b=[];N==="left"&&x>=0?b=Q.filter(V=>{const ce=V[0];return typeof ce=="number"&&ce<x}):N==="right"&&x>=0?b=Q.filter(V=>{const ce=V[0];return typeof ce=="number"&&ce>x}):b=Q;const q=Math.ceil(b.length*(L/100));let P;return F?P=[...b].sort(()=>Math.random()-.5).slice(0,q):P=b.slice(0,q),P.map(V=>({id:`formula-${V.join("-")}`,content:V}))},$=y=>{const Q=Math.ceil(y.length*(L/100));let x;return F?x=y.map((q,P)=>P).sort(()=>Math.random()-.5).slice(0,Q):x=Array.from({length:Q},(b,q)=>q),x.map(b=>({id:`symbol-${b}-${N}`,content:{index:b,mode:N}}))},Z=y=>{const Q=Math.ceil(y.length*(L/100));let x;return F?x=y.map((q,P)=>P).sort(()=>Math.random()-.5).slice(0,Q):x=Array.from({length:Q},(b,q)=>q),x.map(b=>({id:`relation-${b}`,content:b}))},pe=()=>{const y=oe(),Q=Ce(),x=[];if(y.forEach(q=>{if(S.includes("formula")&&(q.structureTree||q.structureData)){const P=q.structureTree||q.structureData,V=Ee(P);x.push({type:"formula",formula:q,maskBlocks:V})}if(S.includes("symbols")&&q.symbols&&q.symbols.length>0){const P=$(q.symbols);x.push({type:"symbols",formula:q,maskBlocks:P})}if(S.includes("relations")){const P=[...q.usedFormulas||[],...q.derivableFormulas||[],...q.equivalentExpressions||[]];if(P.length>0){const V=Z(P);x.push({type:"relations",formula:q,maskBlocks:V})}}}),S.includes("steps")&&Q.forEach(q=>{const P=Y({stepId:q.stepId,formulaIds:q.formulaIds});x.push({type:"steps",step:q,maskBlocks:P})}),x.length===0){alert("");return}const b=F?[...x].sort(()=>Math.random()-.5):x;D(b),A(0),ve(!0),O(new Set),p(!1)},re=()=>{if(!ne||M.length===0)return l.jsx("div",{className:"text-center py-16",children:l.jsxs("div",{className:"text-muted-foreground",children:["",l.jsx("br",{})," / "]})});const y=M[_];if(y.type==="steps"&&y.step){const b=y.step,q=ce=>{const Ne=new Set(ee);Ne.add(ce),O(Ne)},P=`step-${b.stepId}-title`,V=y.maskBlocks.some(ce=>ce.id===P)&&!ee.has(P);return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:b.scenarioName}),V?l.jsx("button",{onClick:()=>q(P),className:"inline-block px-3 py-2 bg-muted/50 text-muted rounded cursor-pointer hover:bg-muted transition-colors",children:"?"}):l.jsx("div",{className:"text-xl text-foreground font-medium",children:b.stepName})]}),l.jsxs("div",{className:"glass-card rounded-2xl p-4",children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:""}),l.jsxs("div",{className:"space-y-2",children:[(b.formulaIds||[]).length===0&&l.jsx("div",{className:"text-sm text-muted-foreground",children:""}),(b.formulaIds||[]).map((ce,Ne)=>{const nt=de.getFormula(ce);if(!nt)return null;const zt=`step-${b.stepId}-formula-${Ne}`;return y.maskBlocks.some(Ye=>Ye.id===zt)&&!ee.has(zt)?l.jsx("button",{onClick:()=>q(zt),className:"w-full px-3 py-2 bg-muted/50 text-muted rounded cursor-pointer hover:bg-muted transition-colors",children:"?"},ce):l.jsx("div",{className:"font-mono text-foreground",children:nt.expression},ce)})]})]}),l.jsx("div",{className:"text-xs text-muted-foreground text-center",children:""})]})}const Q=y.formula,x=y.type==="formula"?Q.structureTree||Q.structureData:null;return l.jsxs("div",{children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:Q.name||Q.expression}),x&&l.jsx("div",{className:"text-3xl inline-block",children:l.jsx(vn,{root:x,fallback:Q.expression,className:"",maskBlocks:y.type==="formula"?y.maskBlocks:[],isMaskRevealed:b=>ee.has(b),onRevealMask:b=>{O(q=>new Set([...Array.from(q),b]))}})})]}),y.type==="symbols"&&l.jsx("div",{className:"space-y-3",children:Q.symbols.map((b,q)=>{const P=y.maskBlocks.find(Ne=>Ne.content.index===q),V=P&&ee.has(P.id),ce=P?.content.mode;return l.jsxs("div",{className:"glass-card rounded-2xl p-4 flex items-center gap-4",children:[ce==="left"&&P&&!V?l.jsx("button",{onClick:()=>{const Ne=new Set(ee);Ne.add(P.id),O(Ne)},className:"w-12 text-center px-2 py-0.5 bg-muted/50 text-muted rounded cursor-pointer hover:bg-muted transition-colors",children:"?"}):l.jsx("div",{className:"text-2xl font-mono w-12 text-center",children:b.symbol}),(ce==="right"||ce==="whole")&&P&&!V?l.jsx("button",{onClick:()=>{const Ne=new Set(ee);Ne.add(P.id),O(Ne)},className:"flex-1 px-3 py-1 bg-muted/50 text-muted rounded cursor-pointer hover:bg-muted transition-colors",children:"?"}):l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-foreground",children:b.meaning}),b.unit&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[": ",b.unit]})]})]},q)})}),y.type==="relations"&&l.jsxs("div",{className:"space-y-3",children:[Q.usedFormulas&&Q.usedFormulas.length>0&&l.jsxs("div",{className:"glass-card rounded-2xl p-4",children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:""}),l.jsx("div",{className:"space-y-2",children:Q.usedFormulas.map((b,q)=>{const P=de.getFormula(b);if(!P)return null;const V=y.maskBlocks.find(Ne=>Ne.content===q),ce=V&&ee.has(V.id);return V&&!ce?l.jsx("button",{onClick:()=>{const Ne=new Set(ee);Ne.add(V.id),O(Ne)},className:"w-full px-3 py-2 bg-muted/50 text-muted rounded cursor-pointer hover:bg-muted transition-colors",children:"?"},b):l.jsx("div",{className:"font-mono text-foreground",children:P.expression},b)})})]}),Q.derivableFormulas&&Q.derivableFormulas.length>0&&l.jsxs("div",{className:"glass-card rounded-2xl p-4",children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:""}),l.jsx("div",{className:"space-y-2",children:Q.derivableFormulas.map((b,q)=>{const P=de.getFormula(b);if(!P)return null;const V=Q.usedFormulas?.length||0,ce=y.maskBlocks.find(nt=>nt.content===V+q),Ne=ce&&ee.has(ce.id);return ce&&!Ne?l.jsx("button",{onClick:()=>{const nt=new Set(ee);nt.add(ce.id),O(nt)},className:"w-full px-3 py-2 bg-muted/50 text-muted rounded cursor-pointer hover:bg-muted transition-colors",children:"?"},b):l.jsx("div",{className:"font-mono text-foreground",children:P.expression},b)})})]})]})]})},H=()=>{_>0&&(A(_-1),O(new Set))},ae=()=>{_<M.length-1&&(A(_+1),O(new Set))},le=()=>{if(M.length>0){const y=new Set(M[_].maskBlocks.map(Q=>Q.id));O(y)}},h=()=>{O(new Set)};return l.jsxs("div",{className:"min-h-screen flex flex-col bg-background pb-16",children:[l.jsxs("header",{className:"px-5 py-4 flex items-center justify-between",children:[l.jsx("button",{onClick:()=>p(!0),className:"p-2 text-primary hover:bg-primary/10 rounded-xl transition-colors",children:l.jsx(xc,{className:"w-6 h-6"})}),l.jsx("div",{className:"text-sm text-muted-foreground",children:ne&&`${_+1} / ${M.length}`}),l.jsx("div",{className:"w-10"})]}),l.jsx("main",{className:"flex-1 flex items-center justify-center px-6 pb-24 overflow-y-auto",children:l.jsx("div",{className:"w-full max-w-2xl",children:re()})}),l.jsx("div",{className:"fixed bottom-20 left-0 right-0 px-6 pb-4 bg-gradient-to-t from-background via-background to-transparent pt-8",children:ne?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:le,className:"flex-1 py-3.5 bg-primary text-primary-foreground rounded-2xl shadow-md hover:opacity-90 transition-opacity flex items-center justify-center gap-2",children:[l.jsx(Tf,{className:"w-5 h-5"}),l.jsx("span",{children:""})]}),l.jsx("button",{onClick:h,className:"px-4 py-3.5 glass-card rounded-2xl shadow-md hover:shadow-lg transition-all",children:l.jsx(nm,{className:"w-5 h-5 text-primary"})})]}),M.length>1&&l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:H,disabled:_===0,className:"flex-1 py-3 glass-card rounded-xl disabled:opacity-30 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-foreground hover:shadow-md transition-all",children:[l.jsx(Pr,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm",children:""})]}),l.jsxs("button",{onClick:ae,disabled:_>=M.length-1,className:"flex-1 py-3 glass-card rounded-xl disabled:opacity-30 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-foreground hover:shadow-md transition-all",children:[l.jsx("span",{className:"text-sm",children:""}),l.jsx(Ht,{className:"w-4 h-4"})]})]})]}):null}),a&&l.jsx(wm,{selectedScenarioIds:v,onToggleScenario:y=>{v.includes(y)?z(v.filter(Q=>Q!==y)):z([...v,y])},contentTypes:S,onToggleContentType:y=>{S.includes(y)?E(S.filter(Q=>Q!==y)):E([...S,y])},mode:N,ratio:L,isRandom:F,stepCoverMode:X,onStepCoverModeChange:B,onModeChange:d,onRatioChange:U,onToggleRandom:()=>se(!F),onApply:pe,onClose:()=>p(!1)})]})}const jm=300,ac=650,uc=14;function cc(g){return g.length===1&&g>="0"&&g<="9"}function Sm({api:g}){const c=T.useMemo(()=>[{label:"",type:"fraction"},{label:"x",type:"superscript"},{label:"x",type:"subscript"},{label:"",type:"sqrt"},{label:"",type:"sum"},{label:"",type:"integral"},{label:"|x|",type:"abs"}],[]),a=T.useMemo(()=>["","","","","","","","","","","","","","","","","","","","","","","",""],[]),p=T.useMemo(()=>["=","+","","",""],[]),v=T.useMemo(()=>["","(",")","[","]","","","","","","","","",""],[]),z=T.useMemo(()=>[{id:"1",letters:[],digit:"1"},{id:"2",letters:["a","b","c"],digit:"2"},{id:"3",letters:["d","e","f"],digit:"3"},{id:"4",letters:["g","h","i"],digit:"4"},{id:"5",letters:["j","k","l"],digit:"5"},{id:"6",letters:["m","n","o"],digit:"6"},{id:"7",letters:["p","q","r","s"],digit:"7"},{id:"8",letters:["t","u","v"],digit:"8"},{id:"9",letters:["w","x","y","z"],digit:"9"}],[]),[S,E]=T.useState("off"),N=T.useRef(0),d=$=>{if(!$)return $;const Z=S==="off"?$:$.toUpperCase();return S==="once"&&E("off"),Z},L=()=>{const $=Date.now();if($-N.current<350){E(Z=>Z==="lock"?"off":"lock"),N.current=0;return}N.current=$,E(Z=>Z==="lock"||Z==="once"?"off":"once")},U=T.useRef(null),F=$=>{const Z=$.letters;return Z.length?[...Z,$.digit]:[$.digit]},se=$=>{const Z=F($),pe=Date.now(),re=U.current,H=re&&re.id===$.id&&pe-re.at<=ac,ae=H?(re.idx+1)%Z.length:0,le=Z[ae],h=cc(le)?le:d(le);H&&g.replacePrevAtom(h)||g.insert(h),U.current={id:$.id,at:pe,idx:ae}};T.useEffect(()=>{const $=setInterval(()=>{const Z=U.current;Z&&Date.now()-Z.at>ac&&(U.current=null)},200);return()=>clearInterval($)},[]);const[X,B]=T.useState(null),ne=T.useRef(null),ve=T.useRef(null),ee=T.useRef(null),O=T.useRef(null),[_,A]=T.useState(null);T.useEffect(()=>{const $=O.current;if(!$)return;const Z=()=>A($.getBoundingClientRect().height);Z();const pe=new ResizeObserver(Z);return pe.observe($),()=>pe.disconnect()},[]);const M=()=>{ne.current&&(window.clearTimeout(ne.current),ne.current=null)},D=($,Z)=>{const pe=Math.abs($),re=Math.abs(Z);return pe<uc&&re<uc?"center":pe>re?$>0?"right":"left":Z>0?"down":"up"},oe=($,Z)=>{const pe=$.letters;let re="";pe.length===0?re=$.digit:pe.length===3?Z==="down"?re=$.digit:Z==="up"?re=pe[0]:Z==="left"?re=pe[1]:Z==="right"?re=pe[2]:re=pe[0]:Z==="down"?re=$.digit:Z==="up"?re=pe[0]:Z==="left"?re=pe[1]:Z==="right"?re=pe[2]:re=pe[3],cc(re)||(re=d(re)),g.insert(re)},Ce=($,Z)=>{$.pointerType==="touch"&&$.preventDefault(),$.currentTarget.setPointerCapture($.pointerId),ve.current={x:$.clientX,y:$.clientY},ee.current=Z,M(),ne.current=window.setTimeout(()=>{const pe=ve.current;pe&&B({def:Z,anchor:{x:pe.x,y:pe.y},direction:"center"})},jm)},Y=$=>{if(!X||!ve.current)return;$.pointerType==="touch"&&$.preventDefault();const Z=$.clientX-ve.current.x,pe=$.clientY-ve.current.y,re=D(Z,pe);re!==X.direction&&B({...X,direction:re})},xe=($,Z)=>{$.pointerType==="touch"&&$.preventDefault();const pe=!!X;if(M(),ve.current=null,ee.current=null,pe){oe(Z,X.direction),B(null);return}se(Z)},je=()=>{M(),ve.current=null,ee.current=null,B(null)},Ee=()=>{if(!X)return null;const{anchor:$,direction:Z,def:pe}=X,re=pe.letters,H=[];re.length===0?H.push({dir:"center",label:pe.digit}):re.length===3?(H.push({dir:"up",label:re[0]}),H.push({dir:"left",label:re[1]}),H.push({dir:"right",label:re[2]}),H.push({dir:"down",label:pe.digit}),H.push({dir:"center",label:re[0]})):(H.push({dir:"up",label:re[0]}),H.push({dir:"left",label:re[1]}),H.push({dir:"right",label:re[2]}),H.push({dir:"down",label:pe.digit}),H.push({dir:"center",label:re[3]}));const ae=V=>{const ce=H.find(zt=>zt.dir===V);if(!ce)return null;const nt="w-10 h-10 rounded-xl flex items-center justify-center text-base select-none "+(Z===V?"bg-primary text-primary-foreground shadow-lg":"bg-card border border-border/60 text-foreground");return l.jsx("div",{className:nt,children:d(ce.label)})},h=140/2,y=10,Q=typeof window<"u"?window.innerWidth:0,x=typeof window<"u"?window.innerHeight:0,b=Q?Math.min(Math.max($.x,y+h),Q-y-h):$.x,q=x?Math.min(Math.max($.y,y+h),x-y-h):$.y,P={position:"fixed",left:b,top:q,transform:"translate(-50%, -50%)",zIndex:1e3,pointerEvents:"none"};return l.jsx("div",{style:P,children:l.jsxs("div",{className:"relative w-[140px] h-[140px]",children:[l.jsx("div",{className:"absolute left-1/2 top-0 -translate-x-1/2",children:ae("up")}),l.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2",children:ae("left")}),l.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2",children:ae("right")}),l.jsx("div",{className:"absolute left-1/2 bottom-0 -translate-x-1/2",children:ae("down")}),l.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:ae("center")})]})})};return l.jsxs("div",{className:"w-full bg-card border-t safe-area-bottom",style:{userSelect:"none",WebkitUserSelect:"none"},onContextMenu:$=>$.preventDefault(),children:[Ee(),l.jsx("div",{className:"flex gap-2 px-3 py-2 border-b overflow-x-auto",children:a.map($=>l.jsx("button",{type:"button",className:"shrink-0 px-3 py-2 rounded-lg bg-muted",onMouseDown:Z=>Z.preventDefault(),onClick:()=>g.insert($),children:$},$))}),l.jsx("div",{className:"flex gap-2 px-3 py-2 border-b overflow-x-auto",children:c.map($=>l.jsx("button",{type:"button",className:"shrink-0 px-4 py-2 rounded-lg bg-muted",onMouseDown:Z=>Z.preventDefault(),onClick:()=>g.insertStructure($.type),children:$.label},$.type))}),l.jsx("div",{className:"px-3 py-3",children:l.jsxs("div",{className:"flex gap-3 items-stretch",children:[l.jsx("div",{className:"w-14 overflow-y-auto pr-1 flex flex-col gap-2 min-h-0",style:{height:_??240,maxHeight:_??240},children:[...p,...v].map($=>l.jsx("button",{type:"button",className:"h-12 rounded-xl bg-muted flex items-center justify-center text-lg shrink-0",onMouseDown:Z=>Z.preventDefault(),onClick:()=>g.insert($),children:$},$))}),l.jsxs("div",{ref:O,className:"flex-1 flex flex-col gap-2",style:{touchAction:"none"},children:[l.jsx("div",{className:"grid grid-cols-3 gap-2",children:z.map($=>l.jsxs("button",{type:"button",className:"h-14 rounded-2xl bg-muted flex flex-col items-center justify-center",style:{touchAction:"none"},onMouseDown:Z=>Z.preventDefault(),onPointerDown:Z=>Ce(Z,$),onPointerMove:Y,onPointerUp:Z=>xe(Z,$),onPointerCancel:je,children:[l.jsx("div",{className:"text-lg leading-none",children:$.id}),l.jsx("div",{className:"text-[11px] text-muted-foreground leading-none mt-1",children:$.letters.length?$.letters.join(""):""})]},$.id))}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsx("button",{type:"button",className:"h-12 rounded-2xl bg-muted flex items-center justify-center",onMouseDown:$=>$.preventDefault(),onClick:()=>g.insert(" "),children:""}),l.jsx("button",{type:"button",className:"h-12 rounded-2xl bg-muted flex items-center justify-center text-lg",onMouseDown:$=>$.preventDefault(),onClick:()=>g.insert("0"),children:"0"}),l.jsx("button",{type:"button",className:"h-12 rounded-2xl bg-muted flex items-center justify-center text-lg",onMouseDown:$=>$.preventDefault(),onClick:()=>g.insert("."),children:"."})]})]}),l.jsxs("div",{className:"w-14 flex flex-col gap-2",style:{height:_??240,maxHeight:_??240},children:[l.jsx("button",{type:"button",className:"h-14 rounded-2xl bg-muted flex items-center justify-center text-lg",style:{touchAction:"none"},onMouseDown:$=>$.preventDefault(),onClick:g.backspace,onPointerDown:$=>{$.pointerType==="touch"&&$.preventDefault(),$.currentTarget.setPointerCapture($.pointerId);const Z=window.setTimeout(()=>{const re=window.setInterval(g.backspace,80),H=()=>{window.clearInterval(re),window.removeEventListener("pointerup",H),window.removeEventListener("pointercancel",H)};window.addEventListener("pointerup",H),window.addEventListener("pointercancel",H)},320),pe=()=>{window.clearTimeout(Z),window.removeEventListener("pointerup",pe),window.removeEventListener("pointercancel",pe)};window.addEventListener("pointerup",pe),window.addEventListener("pointercancel",pe)},children:""}),l.jsx(dc,{label:"",onClick:g.moveLeft,onHold:g.enterStructure}),l.jsx(dc,{label:"",onClick:g.moveRight,onHold:g.exitStructure}),l.jsx("button",{type:"button",className:"h-14 rounded-2xl bg-muted flex items-center justify-center text-lg",onMouseDown:$=>$.preventDefault(),onClick:L,children:S==="off"||S==="once"?"":""})]})]})})]})}function dc({label:g,onClick:c,onHold:a}){const p=T.useRef(null),v=T.useRef(!1),z=()=>{p.current&&(window.clearTimeout(p.current),p.current=null)};return l.jsx("button",{type:"button",className:"h-14 rounded-2xl bg-muted flex items-center justify-center text-lg",style:{touchAction:"none"},onMouseDown:S=>S.preventDefault(),onPointerDown:S=>{S.pointerType==="touch"&&S.preventDefault(),S.currentTarget.setPointerCapture(S.pointerId),v.current=!1,z(),p.current=window.setTimeout(()=>{v.current=!0,a()},350)},onPointerUp:()=>{const S=v.current;z(),v.current=!1,S||c()},onPointerCancel:()=>{z(),v.current=!1},children:g})}function km({formulaId:g,onNext:c,onCancel:a,draftExpression:p,draftStructureData:v}){const z=g?de.getFormula(g):null,S=v||(z?.structureData?z.structureData:{children:p??z?.expression?[{type:"symbol",value:p??z?.expression}]:[]}),[E,N]=T.useState(S),[d,L]=T.useState({path:[],index:0}),[U,F]=T.useState(null),[se,X]=T.useState([{root:S,cursor:{path:[],index:0}}]),[B,ne]=T.useState(0);T.useRef(null);const ve=T.useRef(null),ee=T.useRef(!1),[O,_]=T.useState(!1),[A,M]=T.useState(0),[D,oe]=T.useState(0),Ce=T.useRef(null),Y=()=>{if(O)return;const j=ve.current;j&&j.focus()};T.useEffect(()=>{const j=window.matchMedia?window.matchMedia("(pointer: coarse)"):null,I=()=>_(!!j&&j.matches);if(I(),!!j)return j.addEventListener?.("change",I),()=>j.removeEventListener?.("change",I)},[]);const xe=()=>{ve.current&&(ve.current.value="")};T.useEffect(()=>{if(O){M(0);return}const j=window.visualViewport;if(!j)return;const I=()=>{const ie=Math.max(0,window.innerHeight-j.height-j.offsetTop);M(ie)};return I(),j.addEventListener("resize",I),j.addEventListener("scroll",I),()=>{j.removeEventListener("resize",I),j.removeEventListener("scroll",I)}},[O]),T.useEffect(()=>{const j=Ce.current;if(!j)return;const I=()=>oe(j.getBoundingClientRect().height),ie=new ResizeObserver(I);return ie.observe(j),()=>ie.disconnect()},[]);const je=(j,I)=>{const ie=se.slice(0,B+1);ie.push({root:JSON.parse(JSON.stringify(j)),cursor:{...I}}),X(ie),ne(ie.length-1)},Ee=()=>{if(B>0){const j=se[B-1];N(JSON.parse(JSON.stringify(j.root))),L({...j.cursor}),ne(B-1),F(null)}},$=()=>{if(B<se.length-1){const j=se[B+1];N(JSON.parse(JSON.stringify(j.root))),L({...j.cursor}),ne(B+1),F(null)}},Z=(j,I)=>{if(I.length===0)return"children"in j?j:null;const[ie,...me]=I;if("children"in j){const Se=j;if(typeof ie=="number"&&Se.children[ie])return Z(Se.children[ie],me)}if(typeof ie=="string"&&ie in j){const Se=j[ie];if(Se&&"children"in Se)return Z(Se,me)}return null},pe=j=>j.path.length>=2&&j.path[j.path.length-1]==="text"&&typeof j.path[j.path.length-2]=="number",re=(j,I)=>{if(!pe(I))return null;const ie=I.path.slice(0,-2),me=I.path[I.path.length-2],Se=Z(j,ie);if(!Se)return null;const Le=Se.children[me];return!Le||Le.type!=="number"?null:{parentPath:ie,parent:Se,nodeIndex:me,node:Le}},H=j=>{if(j)for(const I of Array.from(j))le(I)},ae=j=>j.length===1&&j>="0"&&j<="9",le=j=>{const I=JSON.parse(JSON.stringify(E)),ie=re(I,d);if(ie){const Le=Math.max(0,Math.min(d.index,ie.node.text.length));if(ae(j)||j==="."){if(j==="."&&ie.node.text.includes("."))return;const Zt=j==="."&&Le===0?"0.":j,Vt=ie.node.text.slice(0,Le),cn=ie.node.text.slice(Le);ie.node.text=Vt+Zt+cn;const $n={path:d.path,index:Le+Zt.length};N(I),L($n),je(I,$n),F(null);return}const Ve={path:ie.parentPath,index:ie.nodeIndex+1},$e=Z(I,Ve.path);if(!$e)return;$e.children.splice(Ve.index,0,{type:"symbol",value:j});const We={...Ve,index:Ve.index+1};N(I),L(We),je(I,We),F(null);return}const me=Z(I,d.path);if(!me)return;if(ae(j)||j==="."){const Le=d.index>0?me.children[d.index-1]:null,Ve=d.index<me.children.length?me.children[d.index]:null;if(j==="."&&(!Le||Le.type!=="number")){me.children.splice(d.index,0,{type:"number",text:"0."});const We={...d,index:d.index+1};N(I),L(We),je(I,We),F(null);return}if(Le&&Le.type==="number"){if(j==="."&&Le.text.includes("."))return;Le.text+=j;const We={...d,index:d.index};N(I),L(We),je(I,We),F(null);return}if(Ve&&Ve.type==="number"&&ae(j)){Ve.text=j+Ve.text;const We={...d,index:d.index+1};N(I),L(We),je(I,We),F(null);return}me.children.splice(d.index,0,{type:"number",text:j});const $e={...d,index:d.index+1};N(I),L($e),je(I,$e),F(null);return}me.children.splice(d.index,0,{type:"symbol",value:j});const Se={...d,index:d.index+1};N(I),L(Se),je(I,Se),F(null)},h=j=>{if(!j||d.index<=0)return!1;const I=JSON.parse(JSON.stringify(E)),ie=Z(I,d.path);if(!ie)return!1;const me=d.index-1,Se=ie.children[me];return Se?Se.type==="symbol"?(Se.value=j,N(I),je(I,d),F(null),!0):Se.type==="number"?Se.text.length!==1?!1:(ae(j)||j==="."?Se.text=j==="."?"0.":j:ie.children[me]={type:"symbol",value:j},N(I),je(I,d),F(null),!0):!1:!1},y=j=>{let I;switch(j){case"fraction":I={type:"fraction",numerator:{children:[]},denominator:{children:[]}};break;case"superscript":I={type:"superscript",base:{children:[]},exponent:{children:[]}};break;case"subscript":I={type:"subscript",base:{children:[]},index:{children:[]}};break;case"sqrt":I={type:"sqrt",content:{children:[]}};break;case"sum":I={type:"sum",lower:{children:[]},upper:{children:[]},body:{children:[]}};break;case"integral":I={type:"integral",lower:{children:[]},upper:{children:[]},body:{children:[]}};break;case"abs":I={type:"abs",content:{children:[]}};break;default:return}const ie=JSON.parse(JSON.stringify(E)),me=Z(ie,d.path);if(me){me.children.splice(d.index,0,I);const Se=Q(j),Le=Se?{path:[...d.path,d.index,Se],index:0}:{...d,index:d.index+1};N(ie),L(Le),je(ie,Le),F(null),requestAnimationFrame(Y)}},Q=j=>{switch(j){case"fraction":return"numerator";case"superscript":case"subscript":return"base";case"sqrt":case"abs":return"content";case"function":return"argument";case"sum":case"integral":return"lower";default:return null}},x=()=>{const j=JSON.parse(JSON.stringify(E)),I=re(j,d);if(I){const me=Math.max(0,Math.min(d.index,I.node.text.length));if(me===0){F(null);return}const Se=I.node.text.slice(0,me-1),Le=I.node.text.slice(me),Ve=Se+Le;if(Ve.length===0){I.parent.children.splice(I.nodeIndex,1);const We={path:I.parentPath,index:I.nodeIndex};N(j),L(We),je(j,We),F(null);return}I.node.text=Ve;const $e={...d,index:me-1};N(j),L($e),je(j,$e),F(null);return}if(d.index===0&&d.path.length===0){F(null);return}const ie=Z(j,d.path);if(ie){if(d.index>0){const me=d.index-1,Se=[...d.path,me],Le=ie.children[me],Ve=U&&JSON.stringify(U)===JSON.stringify(Se);if(Le.type==="symbol"||Le.type==="number"){ie.children.splice(me,1);const $e={...d,index:d.index-1};N(j),L($e),je(j,$e),F(null)}else if(Ve){ie.children.splice(me,1);const $e={...d,index:d.index-1};N(j),L($e),je(j,$e),F(null)}else F(Se)}else if(d.path.length>0&&typeof d.path[d.path.length-1]=="string"){const Se=d.path.slice(0,-1),Le=Se[Se.length-1];if(typeof Le=="number"){const Ve=Se.slice(0,-1),$e=Z(j,Ve);if($e){const We=Se;if(U&&JSON.stringify(U)===JSON.stringify(We)){$e.children.splice(Le,1);const Vt={path:Ve,index:Le};N(j),L(Vt),je(j,Vt),F(null)}else F(We)}}}}},b=()=>{const j=re(E,d);if(j){L({path:j.parentPath,index:j.nodeIndex+1}),F(null),Y();return}if(d.path.length===0)return;const I=d.path.slice(0,-1),ie=I[I.length-1];typeof ie=="number"&&(L({path:I.slice(0,-1),index:ie+1}),F(null),Y())},q=()=>{if(pe(d))return;const j=Z(E,d.path);if(!j)return;const I=d.index>0?d.index-1:j.children[d.index]?d.index:-1;if(I===-1)return;const ie=j.children[I];if(ie.type==="number"){L({path:[...d.path,I,"text"],index:ie.text.length}),F(null),Y();return}if(ie.type==="symbol")return;const me=Q(ie.type);me&&(L({path:[...d.path,I,me],index:0}),F(null),Y())},P=()=>{const j=re(E,d);if(j){d.index>0?L({...d,index:d.index-1}):L({path:j.parentPath,index:j.nodeIndex}),F(null),Y();return}if(d.index>0)L({...d,index:d.index-1});else if(d.path.length>0){const I=d.path.slice(0,-1),ie=I[I.length-1];typeof ie=="number"&&L({path:I.slice(0,-1),index:ie})}F(null),Y()},V=()=>{const j=re(E,d);if(j){const ie=j.node.text.length;d.index<ie?L({...d,index:d.index+1}):L({path:j.parentPath,index:j.nodeIndex+1}),F(null),Y();return}const I=Z(E,d.path);if(I&&d.index<I.children.length)L({...d,index:d.index+1});else if(d.path.length>0){const ie=d.path.slice(0,-1),me=ie[ie.length-1];typeof me=="number"&&L({path:ie.slice(0,-1),index:me+1})}F(null),Y()},ce=j=>{const I=j.nativeEvent,ie=I.inputType||"";if(ie==="insertCompositionText")return;const me=I.data;if(ie==="insertFromComposition"&&me){for(const Se of Array.from(me))H(Se);requestAnimationFrame(()=>{xe()})}},Ne=j=>{if(ee.current)return;const I=j.target.value;if(I){for(const ie of Array.from(I))H(ie);xe()}},nt=j=>{ee.current=!1;const I=j.data,ie=j.currentTarget.value,me=I&&I.length>0?I:ie;if(me)for(const Se of Array.from(me))H(Se);requestAnimationFrame(()=>{xe()})},zt=j=>{ee.current||(j.key==="Backspace"?(j.preventDefault(),x()):j.key==="ArrowLeft"?(j.preventDefault(),P()):j.key==="ArrowRight"&&(j.preventDefault(),V()))},He=j=>{if("children"in j&&!("type"in j))return j.children.map(ie=>He(ie)).join("");const I=j;switch(I.type){case"symbol":return I.value;case"number":return I.text;case"fraction":return`(${He(I.numerator)})/(${He(I.denominator)})`;case"superscript":return`${He(I.base)}^{${He(I.exponent)}}`;case"subscript":return`${He(I.base)}_{${He(I.index)}}`;case"sqrt":return`(${He(I.content)})`;case"abs":return`|${He(I.content)}|`;case"function":return`${I.name}(${He(I.argument)})`;case"sum":return`[${He(I.lower)}${He(I.upper)}](${He(I.body)})`;case"integral":return`[${He(I.lower)}${He(I.upper)}](${He(I.body)})`;default:return""}},Ye=(j,I)=>{const ie=JSON.stringify(d.path)===JSON.stringify(I);return l.jsxs("div",{className:"inline-flex items-center gap-0.5 min-h-[1.5em]",children:[j.children.length===0?l.jsx("span",{className:`inline-block w-4 h-6 border border-dashed ${ie?"border-primary bg-primary/10":"border-muted-foreground/30"} rounded cursor-text`,onClick:me=>{me.stopPropagation(),L({path:I,index:0}),Y()}}):j.children.map((me,Se)=>l.jsxs(di.Fragment,{children:[ie&&d.index===Se&&l.jsx("span",{className:"inline-block w-0.5 h-6 bg-primary animate-pulse"}),nr(me,[...I,Se])]},Se)),ie&&d.index===j.children.length&&l.jsx("span",{className:"inline-block w-0.5 h-6 bg-primary animate-pulse"})]})},nr=(j,I)=>{const me=U&&JSON.stringify(U)===JSON.stringify(I)?"ring-2 ring-destructive bg-destructive/10":"",Se=Le=>{Le.stopPropagation();const Ve=I.slice(0,-1),$e=I[I.length-1];L({path:Ve,index:$e+1}),F(null),Y()};switch(j.type){case"symbol":return l.jsx("span",{className:`inline-block px-0.5 cursor-text hover:bg-muted rounded ${me}`,onClick:Se,children:j.value});case"number":{if(!(JSON.stringify(d.path)===JSON.stringify([...I,"text"])))return l.jsx("span",{className:`inline-block px-0.5 cursor-text hover:bg-muted rounded font-mono ${me}`,onClick:Se,children:j.text});const $e=Math.max(0,Math.min(d.index,j.text.length)),We=j.text.slice(0,$e),Zt=j.text.slice($e);return l.jsxs("span",{className:`inline-block px-0.5 cursor-text hover:bg-muted rounded font-mono ${me}`,onClick:Se,children:[l.jsx("span",{children:We}),l.jsx("span",{className:"inline-block w-0.5 h-6 bg-primary animate-pulse align-middle"}),l.jsx("span",{children:Zt})]})}case"fraction":return l.jsxs("div",{className:`inline-flex flex-col items-center px-1 mx-1 border border-transparent rounded ${me}`,children:[l.jsx("div",{className:"border-b border-foreground px-1",children:Ye(j.numerator,[...I,"numerator"])}),l.jsx("div",{className:"px-1 mt-[4px] pt-[1px]",children:Ye(j.denominator,[...I,"denominator"])})]});case"superscript":return l.jsxs("div",{className:`inline-flex items-start mx-0.5 ${me}`,children:[l.jsx("span",{children:Ye(j.base,[...I,"base"])}),l.jsx("span",{className:"text-xs scale-75 origin-top-left -mt-1",children:Ye(j.exponent,[...I,"exponent"])})]});case"subscript":return l.jsxs("div",{className:`inline-flex items-end mx-0.5 ${me}`,children:[l.jsx("span",{children:Ye(j.base,[...I,"base"])}),l.jsx("span",{className:"text-xs scale-75 origin-bottom-left -mb-1",children:Ye(j.index,[...I,"index"])})]});case"sqrt":return l.jsxs("div",{className:`inline-flex items-center mx-1 border-t-2 border-foreground pt-0.5 ${me}`,children:[l.jsx("span",{className:"text-xl mr-0.5 -ml-1",children:""}),Ye(j.content,[...I,"content"])]});case"abs":return l.jsx("div",{className:`inline-flex items-center mx-1 px-1 border-x border-foreground ${me}`,children:Ye(j.content,[...I,"content"])});case"function":return l.jsxs("div",{className:`inline-flex items-center ${me}`,children:[j.name,"(",Ye(j.argument,[...I,"argument"]),")"]});case"sum":case"integral":const Le=j.type==="sum"?"":"";return l.jsxs("div",{className:`inline-flex items-center gap-1 mx-1 ${me}`,children:[l.jsxs("div",{className:"flex flex-col items-center text-[10px]",children:[l.jsx("div",{children:Ye(j.upper,[...I,"upper"])}),l.jsx("span",{className:"text-2xl leading-none",children:Le}),l.jsx("div",{children:Ye(j.lower,[...I,"lower"])})]}),Ye(j.body,[...I,"body"])]});default:return l.jsx("span",{children:"?"})}},rr={insert:H,replacePrevAtom:h,backspace:x,moveLeft:P,moveRight:V,enterStructure:q,exitStructure:b,insertStructure:y};return l.jsxs("div",{className:"min-h-screen h-[100dvh] flex flex-col bg-background text-foreground overflow-hidden",children:[l.jsx("textarea",{ref:ve,className:"fixed opacity-0 pointer-events-none",inputMode:O?"none":"text",onBeforeInput:ce,onInput:Ne,onKeyDown:zt,onCompositionStart:()=>ee.current=!0,onCompositionEnd:nt,autoFocus:!O}),l.jsxs("header",{className:"h-14 flex items-center justify-between px-4 border-b shrink-0",children:[l.jsx("button",{onClick:a,className:"p-2",children:l.jsx(Pr,{})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:Ee,disabled:B===0,className:"p-2 disabled:opacity-30",children:l.jsx(mm,{})}),l.jsx("button",{onClick:$,disabled:B===se.length-1,className:"p-2 disabled:opacity-30",children:l.jsx(Xf,{})})]}),l.jsxs("button",{onClick:()=>c(He(E),E),className:"bg-primary text-primary-foreground px-4 py-1.5 rounded-lg flex items-center gap-1",children:[" ",l.jsx(Ht,{size:16})]})]}),l.jsx("main",{className:"flex-1 overflow-auto p-8 flex justify-center items-start",onClick:()=>Y(),children:l.jsx("div",{className:"text-4xl",children:Ye(E,[])})}),l.jsx("footer",{ref:Ce,className:"w-full bg-card border-t safe-area-bottom shrink-0 z-50",style:{marginBottom:A},children:l.jsx(Sm,{api:rr})})]})}function bm({onAdd:g}){const[c,a]=T.useState(""),[p,v]=T.useState(""),[z,S]=T.useState(""),[E,N]=T.useState(""),d=()=>c?de.getScenario(c)?.steps||[]:[],L=()=>{if(p.trim())if(c){const X={id:`scenario-${Date.now()}`,name:p.trim(),icon:"",parentId:c,steps:[]};de.saveScenario(X),v("")}else{const X={id:`scenario-${Date.now()}`,name:p.trim(),icon:"",steps:[]};de.saveScenario(X),a(X.id),v("")}},U=()=>{if(!E.trim())return;let X=c;X||(X=_t,a(_t)),de.addStep(X,E.trim());const B=de.getScenario(X);if(B&&B.steps.length>0){const ne=B.steps[B.steps.length-1];S(ne.id),N("")}},F=()=>{c&&z&&(g(c,z),a(""),S(""))},se=()=>{const X=de.getRootScenarios(),B=(ne,ve=0)=>{const ee=de.getChildScenarios(ne.id);return[l.jsxs("option",{value:ne.id,children:["".repeat(ve*2),ne.name]},ne.id),...ee.flatMap(O=>B(O,ve+1))]};return X.flatMap(ne=>B(ne))};return l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[l.jsx("div",{className:"text-xs text-gray-600 mb-2",children:""}),l.jsxs("select",{value:c,onChange:X=>{a(X.target.value),S("")},className:"w-full px-3 py-2 border border-gray-200 rounded text-sm focus:outline-none focus:border-gray-400 mb-2",children:[l.jsx("option",{value:"",children:""}),se()]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:p,onChange:X=>v(X.target.value),placeholder:c?"":"",className:"flex-1 px-3 py-2 border border-gray-200 rounded text-sm focus:outline-none focus:border-gray-400"}),l.jsx("button",{onClick:L,disabled:!p.trim(),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(Pt,{className:"w-4 h-4 text-gray-600"})})]})]}),l.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[l.jsx("div",{className:"text-xs text-gray-600 mb-2",children:""}),l.jsxs("select",{value:z,onChange:X=>S(X.target.value),disabled:!c,className:"w-full px-3 py-2 border border-gray-200 rounded text-sm focus:outline-none focus:border-gray-400 mb-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx("option",{value:"",children:c?"":""}),d().map(X=>l.jsx("option",{value:X.id,children:X.name},X.id))]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:E,onChange:X=>N(X.target.value),placeholder:c?"":"",className:"flex-1 px-3 py-2 border border-gray-200 rounded text-sm focus:outline-none focus:border-gray-400"}),l.jsx("button",{onClick:U,disabled:!E.trim(),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(Pt,{className:"w-4 h-4 text-gray-600"})})]})]}),l.jsx("button",{onClick:F,disabled:!c||!z,className:"w-full px-3 py-2 bg-gray-800 text-white rounded text-sm hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})}function Cm({formulaId:g,expression:c,structureData:a,onSave:p,onBack:v,onCancel:z}){const S=g?de.getFormula(g):null,[E,N]=T.useState(S?.name||""),[d,L]=T.useState(S?.description||""),[U,F]=T.useState(S?.equivalentExpressions||[]),[se,X]=T.useState(S?.symbols||[]),[B,ne]=T.useState(S?.usedInContexts||[]),[ve,ee]=T.useState(S?.usedFormulas||[]),[O,_]=T.useState(S?.derivableFormulas||[]),[A,M]=T.useState(!1),[D,oe]=T.useState(!1),[Ce,Y]=T.useState(!1),[xe,je]=T.useState(!0),[Ee,$]=T.useState(!1),[Z,pe]=T.useState(!1),[re,H]=T.useState(!1),[ae,le]=T.useState(!1),[h,y]=T.useState(!1),[Q,x]=T.useState(null),[b,q]=T.useState(!1),[P,V]=T.useState(null);T.useEffect(()=>{if(!S&&c&&se.length===0){const R=ce(c);X(R),R.length>0&&je(!0)}},[c]);const ce=R=>{const G=(R||"").trim();if(!G)return[];const ge={"\\alpha":"","\\beta":"","\\gamma":"","\\delta":"","\\epsilon":"","\\theta":"","\\lambda":"","\\mu":"","\\nu":"","\\omega":"","\\pi":"","\\sigma":"","\\Sigma":""},Pe=new Set(["frac","sqrt","times","cdot","div","pm","le","ge","neq","approx","to","infty","left","right","mathrm","text","operatorname","sum","int"]),Me=Ie=>/[A-Za-z]/.test(Ie),Ke=Ie=>/[--]/.test(Ie)||Ie===""||Ie===""||Ie==="",rt=Ie=>Me(Ie)||Ke(Ie),en=(Ie,Ue)=>{let dt=0,It=Ue;for(;It<Ie.length;It++){const it=Ie[It];if(it==="{")dt++;else if(it==="}"&&(dt--,dt===0))break}return{value:Ie.slice(Ue+1,It),next:Math.min(It+1,Ie.length)}},tn=(Ie,Ue)=>Ue>=Ie.length?{value:"",next:Ue}:Ie[Ue]==="{"?en(Ie,Ue):{value:Ie[Ue]??"",next:Ue+1},pt=[],De=G;let Ae=0;for(;Ae<De.length;){const Ie=De[Ae];if(Ie===" "||Ie===`
`||Ie==="	"){Ae++;continue}if(Ie==="\\"){let Ue=Ae+1;for(;Ue<De.length&&/[A-Za-z]/.test(De[Ue]);)Ue++;const dt=De.slice(Ae,Ue);if(ge[dt]){let it=ge[dt],Dt="",nn="",vt=Ue;for(;vt<De.length&&(De[vt]==="_"||De[vt]==="^");){const js=De[vt],Fr=tn(De,vt+1);js==="_"?Dt=Fr.value:nn=Fr.value,vt=Fr.next}let Ir=it;Dt&&(Ir+=`_${Dt}`),nn&&(Ir+=`^${nn}`),pt.push(Ir),Ae=vt;continue}const It=dt.replace("\\","");if(Pe.has(It)){Ae=Ue;continue}Ae=Ue;continue}if(rt(Ie)){let Ue=Ie,dt="",It="",it=Ae+1;for(;it<De.length&&(De[it]==="_"||De[it]==="^");){const nn=De[it],vt=tn(De,it+1);nn==="_"?dt=vt.value:It=vt.value,it=vt.next}let Dt=Ue;dt&&(Dt+=`_${dt}`),It&&(Dt+=`^${It}`),pt.push(Dt),Ae=it;continue}Ae++}return Array.from(new Set(pt.filter(Boolean))).map(Ie=>({symbol:Ie,meaning:"",unit:""}))},Ne=R=>{const G=(R||"").trim();if(!G)return l.jsx("span",{className:"text-muted-foreground",children:""});const ge={"\\sigma":"","\\Sigma":"","\\pi":"","\\alpha":"","\\beta":"","\\gamma":"","\\delta":"","\\epsilon":"","\\theta":"","\\lambda":"","\\mu":"","\\nu":"","\\omega":""};let Pe=G.replace(/\\[A-Za-z]+/g,De=>ge[De]??De.replace("\\",""));const Me=(De,Ae)=>{if(De[Ae]==="{"){let Bn=0,Ie=Ae;for(;Ie<De.length;Ie++){const Ue=De[Ie];if(Ue==="{")Bn++;else if(Ue==="}"&&(Bn--,Bn===0))break}return{value:De.slice(Ae+1,Ie),next:Ie+1}}return{value:De[Ae]??"",next:Ae+1}};let Ke="",rt="",en="";const tn=Pe.match(/^([A-Za-z--]+|\d+|[-]+)/);tn?(Ke=tn[0],Pe=Pe.slice(Ke.length)):(Ke=Pe[0]??"",Pe=Pe.slice(1));let pt=0;for(;pt<Pe.length;){const De=Pe[pt];if(De==="_"){const Ae=Me(Pe,pt+1);rt=Ae.value,pt=Ae.next;continue}if(De==="^"){const Ae=Me(Pe,pt+1);en=Ae.value,pt=Ae.next;continue}pt++}return l.jsxs("span",{className:"inline-flex items-baseline leading-none",children:[l.jsx("span",{className:"font-medium",children:Ke}),rt?l.jsx("sub",{className:"text-sm leading-none relative top-1 ml-0.5",children:rt}):null,en?l.jsx("sup",{className:"text-sm leading-none relative -top-1 ml-0.5",children:en}):null]})},nt=()=>{F([...U,""])},zt=(R,G)=>{const ge=[...U];ge[R]=G,F(ge)},He=R=>{F(U.filter((G,ge)=>ge!==R))},Ye=(R,G,ge)=>{const Pe=[...se];Pe[R]={...Pe[R],[G]:ge},X(Pe)},nr=R=>{X(se.filter((G,ge)=>ge!==R))},rr=()=>{X([...se,{symbol:"",meaning:"",unit:""}])},j=(R,G)=>{B.find(ge=>ge.scenarioId===R&&ge.stepId===G)||ne([...B,{scenarioId:R,stepId:G}]),H(!1)},I=R=>{ne(B.filter((G,ge)=>ge!==R))},ie=R=>{ve.includes(R)||ee([...ve,R]),le(!1)},me=R=>{ee(ve.filter(G=>G!==R))},Se=R=>{O.includes(R)||_([...O,R]),y(!1)},Le=R=>{_(O.filter(G=>G!==R))},Ve=R=>{const G=de.getScenario(R.scenarioId);if(!G)return"";const ge=G.steps.find(Pe=>Pe.id===R.stepId);return`${G.name} > ${ge?.name??""}`},$e=()=>{p({name:E,description:d,equivalentExpressions:U.filter(R=>R.trim()),symbols:se.filter(R=>R.symbol.trim()),usedInContexts:B,usedFormulas:ve,derivableFormulas:O})},We=R=>{let G=R.columns,ge=R.rows;return(!G||G.length===0)&&(G=[{id:"col1",label:""}]),!ge||ge.length===0?ge=[{cells:new Array(G.length).fill("")}]:ge=ge.map(Pe=>{const Me=[...Pe.cells];if(Me.length<G.length)for(;Me.length<G.length;)Me.push("");else Me.length>G.length&&(Me.length=G.length);return{cells:Me}}),{...R,columns:G,rows:ge}},Zt=R=>{const G=se[R];let ge;G.coeffTable?ge=We(G.coeffTable):ge={title:`${G.symbol||""}`,columns:[{id:"col1",label:""},{id:"col2",label:""}],rows:[{cells:["",""]}],note:""},x(R),V(ge),q(!0)},Vt=()=>{q(!1),x(null),V(null)},cn=(R,G)=>{P&&V({...P,[R]:G})},$n=(R,G)=>{if(!P)return;const ge=P.columns.map((Pe,Me)=>Me===R?{...Pe,label:G}:Pe);V(We({...P,columns:ge}))},An=()=>{if(!P)return;const G={id:`col${P.columns.length+1}`,label:""},ge=[...P.columns,G],Pe=P.rows.map(Me=>({cells:[...Me.cells,""]}));V({...P,columns:ge,rows:Pe})},Un=R=>{if(!P)return;let G=P.columns.filter((Pe,Me)=>Me!==R),ge=P.rows.map(Pe=>({cells:Pe.cells.filter((Me,Ke)=>Ke!==R)}));G.length===0&&(G=[{id:"col1",label:""}],ge=[{cells:[""]}]),V({...P,columns:G,rows:ge})},ws=(R,G,ge)=>{if(!P)return;const Pe=P.rows.map((Me,Ke)=>{if(Ke!==R)return Me;const rt=[...Me.cells];return rt[G]=ge,{cells:rt}});V({...P,rows:Pe})},fl=()=>{if(!P)return;const R={cells:new Array(P.columns.length).fill("")};V({...P,rows:[...P.rows,R]})},ml=R=>{if(!P)return;let G=P.rows.filter((ge,Pe)=>Pe!==R);G.length===0&&(G=[{cells:new Array(P.columns.length).fill("")}]),V({...P,rows:G})},Ns=()=>{if(Q===null||!P)return;let R=P.rows.filter(Ke=>Ke.cells.some(rt=>rt.trim()!==""));R.length===0&&(R=[{cells:new Array(P.columns.length).fill("")}]);let G=P.columns;const ge=[];G.forEach((Ke,rt)=>{const en=Ke.label.trim()!=="",tn=R.some(pt=>(pt.cells[rt]??"").trim()!=="");(en||tn)&&ge.push(rt)}),ge.length===0?(G=[{id:"col1",label:""}],R=[{cells:[""]}]):ge.length!==G.length&&(G=ge.map((Ke,rt)=>({id:`col${rt+1}`,label:G[Ke].label})),R=R.map(Ke=>({cells:ge.map(rt=>Ke.cells[rt]??"")})));const Pe={...P,columns:G,rows:R},Me=[...se];Me[Q]={...Me[Q],coeffTable:Pe},X(Me),Vt()},lr=Q!==null?se[Q]:null;return l.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[l.jsxs("header",{className:"px-5 py-4 flex items-center justify-between border-b border-border",children:[l.jsx("button",{onClick:v,className:"p-2 hover:bg-primary/10 rounded-xl transition-colors",title:"",children:l.jsx(Pr,{className:"w-5 h-5 text-foreground"})}),l.jsx("h1",{className:"flex-1 text-center text-foreground",children:""}),l.jsx("button",{onClick:z,className:"px-3 py-1.5 text-sm text-destructive hover:bg-destructive/10 rounded-xl transition-colors",title:"",children:""})]}),l.jsxs("main",{className:"flex-1 p-4 pb-20 overflow-y-auto space-y-3",children:[l.jsxs("div",{className:"glass-card rounded-2xl p-5",children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:""}),l.jsx("div",{className:"text-2xl text-foreground text-center overflow-x-auto",children:a||S?.structureTree||S?.structureData?l.jsx(vn,{root:a||S?.structureTree||S?.structureData,fallback:c||"",maskBlocks:[]}):l.jsx("span",{className:"font-mono",children:c||""})})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-2 px-1",children:""}),l.jsx("input",{type:"text",value:E,onChange:R=>N(R.target.value),placeholder:"",className:"w-full px-4 py-3 glass-card rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 placeholder:text-muted-foreground"})]}),l.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden",children:[l.jsxs("button",{onClick:()=>oe(!D),className:"w-full px-5 py-4 flex items-center gap-3 hover:bg-primary/5 transition-colors",children:[l.jsxs("div",{className:"flex-1 text-left text-sm text-foreground",children:["",U.length>0&&l.jsxs("span",{className:"ml-2 text-muted-foreground",children:["(",U.length,")"]})]}),l.jsx("div",{className:"text-primary",children:D?l.jsx(Xt,{className:"w-5 h-5"}):l.jsx(Ht,{className:"w-5 h-5"})})]}),D&&l.jsxs("div",{className:"border-t border-border p-4 space-y-2",children:[U.map((R,G)=>l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:R,onChange:ge=>zt(G,ge.target.value),placeholder:"",className:"flex-1 px-4 py-2.5 glass-card rounded-xl text-sm font-mono focus:outline-none focus:ring-2 focus:ring-primary/20 placeholder:text-muted-foreground"}),l.jsx("button",{onClick:()=>He(G),className:"p-2.5 text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-xl transition-colors",children:l.jsx(un,{className:"w-4 h-4"})})]},G)),l.jsxs("button",{onClick:nt,className:"w-full glass-card rounded-xl px-4 py-3 text-sm text-muted-foreground hover:text-primary hover:shadow-md transition-all flex items-center justify-center gap-2 border border-dashed border-primary/30",children:[l.jsx(Pt,{className:"w-4 h-4"}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden",children:[l.jsxs("button",{onClick:()=>M(!A),className:"w-full px-5 py-4 flex items-center gap-3 hover:bg-primary/5 transition-colors",children:[l.jsx("div",{className:"flex-1 text-left text-sm text-foreground",children:""}),l.jsx("div",{className:"text-primary",children:A?l.jsx(Xt,{className:"w-5 h-5"}):l.jsx(Ht,{className:"w-5 h-5"})})]}),A&&l.jsx("div",{className:"border-t border-border p-4",children:l.jsx("textarea",{value:d,onChange:R=>L(R.target.value),placeholder:"...",rows:4,className:"w-full px-4 py-3 glass-card rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 placeholder:text-muted-foreground resize-none"})})]}),l.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden",children:[l.jsxs("button",{onClick:()=>Y(!Ce),className:"w-full px-5 py-4 flex items-center gap-3 hover:bg-primary/5 transition-colors",children:[l.jsxs("div",{className:"flex-1 text-left text-sm text-foreground",children:["",B.length>0&&l.jsxs("span",{className:"ml-2 text-muted-foreground",children:["(",B.length,")"]})]}),l.jsx("div",{className:"text-primary",children:Ce?l.jsx(Xt,{className:"w-5 h-5"}):l.jsx(Ht,{className:"w-5 h-5"})})]}),Ce&&l.jsxs("div",{className:"border-t border-border p-4",children:[B.map((R,G)=>l.jsxs("div",{className:"flex items-center gap-2 mb-2 px-3 py-2 bg-gray-50 rounded",children:[l.jsx("div",{className:"flex-1 text-sm text-gray-700",children:Ve(R)}),l.jsx("button",{onClick:()=>I(G),className:"p-1 text-gray-400 hover:text-red-500",children:l.jsx(un,{className:"w-3 h-3"})})]},G)),l.jsx(bm,{onAdd:j})]})]}),l.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden",children:[l.jsxs("button",{onClick:()=>je(!xe),className:"w-full px-5 py-4 flex items-center gap-3 hover:bg-primary/5 transition-colors",children:[l.jsxs("div",{className:"flex-1 text-left text-sm text-foreground",children:["",se.length>0&&l.jsxs("span",{className:"ml-2 text-muted-foreground",children:["(",se.length,")"]})]}),l.jsx("div",{className:"text-primary",children:xe?l.jsx(Xt,{className:"w-5 h-5"}):l.jsx(Ht,{className:"w-5 h-5"})})]}),xe&&l.jsxs("div",{className:"border-t border-border p-4",children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:" /  /   "}),se.map((R,G)=>l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[l.jsx("div",{className:"w-12 h-10 px-2 border border-gray-200 rounded bg-white flex items-center justify-center",children:Ne(R.symbol)}),l.jsx("input",{type:"text",value:R.symbol,onChange:ge=>Ye(G,"symbol",ge.target.value),placeholder:"",className:"w-16 sm:w-20 md:w-24 h-10 px-2 border border-gray-200 rounded text-sm text-center font-mono focus:outline-none focus:border-gray-400"})]}),l.jsx("input",{type:"text",value:R.meaning,onChange:ge=>Ye(G,"meaning",ge.target.value),placeholder:"",className:"flex-1 min-w-0 h-10 px-2 border border-gray-200 rounded text-sm focus:outline-none focus:border-gray-400"}),l.jsx("input",{type:"text",value:R.unit,onChange:ge=>Ye(G,"unit",ge.target.value),placeholder:"",className:"w-14 sm:w-20 md:w-24 h-10 px-2 border border-gray-200 rounded text-sm focus:outline-none focus:border-gray-400"}),l.jsxs("div",{className:"flex flex-col items-end gap-1 shrink-0",children:[l.jsx("button",{type:"button",onClick:()=>Zt(G),className:"px-2 py-1 border border-gray-200 rounded text-[11px] text-gray-600 hover:bg-gray-50",children:""}),R.coeffTable&&l.jsxs("span",{className:"px-1.5 py-0.5 rounded-full bg-primary/10 text-primary text-[10px] leading-none",children:[R.coeffTable.rows.length," ",R.coeffTable.columns.length>0&&`  ${R.coeffTable.columns.length} `]})]}),l.jsx("button",{onClick:()=>nr(G),className:"p-2 text-gray-400 hover:text-red-500 shrink-0",children:l.jsx(un,{className:"w-4 h-4"})})]},G)),l.jsxs("button",{onClick:rr,className:"w-full px-3 py-2 border border-dashed border-gray-300 rounded text-sm text-gray-500 hover:bg-gray-50 flex items-center justify-center gap-1",children:[l.jsx(Pt,{className:"w-3 h-3"}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden",children:[l.jsxs("button",{onClick:()=>$(!Ee),className:"w-full px-5 py-4 flex items-center gap-3 hover:bg-primary/5 transition-colors",children:[l.jsxs("div",{className:"flex-1 text-left text-sm text-foreground",children:["",ve.length>0&&l.jsxs("span",{className:"ml-2 text-muted-foreground",children:["(",ve.length,")"]})]}),l.jsx("div",{className:"text-primary",children:Ee?l.jsx(Xt,{className:"w-5 h-5"}):l.jsx(Ht,{className:"w-5 h-5"})})]}),Ee&&l.jsxs("div",{className:"border-t border-border p-4",children:[ve.map(R=>{const G=de.getFormula(R);return l.jsxs("div",{className:"flex items-center gap-2 mb-2 px-3 py-2 bg-gray-50 rounded",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-sm text-gray-700",children:G?.name||R}),l.jsx("div",{className:"text-xs text-gray-400 font-mono",children:G?.expression})]}),l.jsx("button",{onClick:()=>me(R),className:"p-1 text-gray-400 hover:text-red-500",children:l.jsx(un,{className:"w-3 h-3"})})]},R)}),ae?l.jsx("div",{className:"border border-gray-300 rounded max-h-60 overflow-y-auto mb-2",children:Object.values(de.getFormulas()).map(R=>l.jsxs("button",{onClick:()=>ie(R.id),className:"w-full px-3 py-2 text-left hover:bg-gray-50 border-b border-gray-100",disabled:ve.includes(R.id),children:[l.jsx("div",{className:"text-sm text-gray-700",children:R.name}),l.jsx("div",{className:"text-xs text-gray-400 font-mono",children:R.expression})]},R.id))}):l.jsxs("button",{onClick:()=>le(!0),className:"w-full px-3 py-2 border border-dashed border-gray-300 rounded text-sm text-gray-500 hover:bg-gray-50 flex items-center justify-center gap-1",children:[l.jsx(Pt,{className:"w-3 h-3"}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden",children:[l.jsxs("button",{onClick:()=>pe(!Z),className:"w-full px-5 py-4 flex items-center gap-3 hover:bg-primary/5 transition-colors",children:[l.jsxs("div",{className:"flex-1 text-left text-sm text-foreground",children:["",O.length>0&&l.jsxs("span",{className:"ml-2 text-muted-foreground",children:["(",O.length,")"]})]}),l.jsx("div",{className:"text-primary",children:Z?l.jsx(Xt,{className:"w-5 h-5"}):l.jsx(Ht,{className:"w-5 h-5"})})]}),Z&&l.jsxs("div",{className:"border-t border-border p-4",children:[O.map(R=>{const G=de.getFormula(R);return l.jsxs("div",{className:"flex items-center gap-2 mb-2 px-3 py-2 bg-gray-50 rounded",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-sm text-gray-700",children:G?.name||R}),l.jsx("div",{className:"text-xs text-gray-400 font-mono",children:G?.expression})]}),l.jsx("button",{onClick:()=>Le(R),className:"p-1 text-gray-400 hover:text-red-500",children:l.jsx(un,{className:"w-3 h-3"})})]},R)}),h?l.jsx("div",{className:"border border-gray-300 rounded max-h-60 overflow-y-auto mb-2",children:Object.values(de.getFormulas()).map(R=>l.jsxs("button",{onClick:()=>Se(R.id),className:"w-full px-3 py-2 text-left hover:bg-gray-50 border-b border-gray-100",disabled:O.includes(R.id),children:[l.jsx("div",{className:"text-sm text-gray-700",children:R.name}),l.jsx("div",{className:"text-xs text-gray-400 font-mono",children:R.expression})]},R.id))}):l.jsxs("button",{onClick:()=>y(!0),className:"w-full px-3 py-2 border border-dashed border-gray-300 rounded text-sm text-gray-500 hover:bg-gray-50 flex items-center justify-center gap-1",children:[l.jsx(Pt,{className:"w-3 h-3"}),l.jsx("span",{children:""})]})]})]})]}),b&&P&&lr&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-end justify-center bg-black/40",children:l.jsxs("div",{className:"w-full max-h-[80vh] bg-background rounded-t-3xl shadow-xl p-4 overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:lr.symbol||""}),l.jsx("div",{className:"text-sm font-medium",children:""})]}),l.jsx("button",{onClick:Vt,className:"p-2 rounded-full hover:bg-muted",children:l.jsx(un,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),l.jsx("input",{type:"text",value:P.title,onChange:R=>cn("title",R.target.value),className:"w-full px-3 py-2 border border-input rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("div",{className:"text-xs text-muted-foreground",children:""}),l.jsxs("button",{type:"button",onClick:An,className:"flex items-center gap-1 text-xs px-2 py-1 border border-input rounded-lg hover:bg-muted",children:[l.jsx(Pt,{className:"w-3 h-3"}),""]})]}),l.jsx("div",{className:"space-y-1",children:P.columns.map((R,G)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-xs text-muted-foreground w-10",children:[G+1,""]}),l.jsx("input",{type:"text",value:R.label,onChange:ge=>$n(G,ge.target.value),placeholder:`${G+1} `,className:"flex-1 px-3 py-1.5 border border-input rounded-xl text-sm focus:outline-none focus:ring-1 focus:ring-primary/30"}),l.jsx("button",{type:"button",onClick:()=>Un(G),className:"p-1 text-muted-foreground hover:text-destructive",disabled:P.columns.length<=1,children:l.jsx(un,{className:"w-3 h-3"})})]},R.id))})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),l.jsxs("div",{className:"border border-border rounded-2xl overflow-hidden",children:[l.jsxs("div",{className:"grid items-center bg-muted text-xs text-muted-foreground px-3 py-2",style:{gridTemplateColumns:`repeat(${P.columns.length}, minmax(0, 1fr)) auto`},children:[P.columns.map((R,G)=>l.jsx("div",{children:R.label||`${G+1}`},R.id)),l.jsx("div",{className:"text-right",children:""})]}),P.rows.map((R,G)=>l.jsxs("div",{className:"grid items-center gap-2 px-3 py-2 border-t border-border text-sm",style:{gridTemplateColumns:`repeat(${P.columns.length}, minmax(0, 1fr)) auto`},children:[P.columns.map((ge,Pe)=>l.jsx("input",{type:"text",value:R.cells[Pe]??"",onChange:Me=>ws(G,Pe,Me.target.value),className:"px-2 py-1 border border-input rounded-lg focus:outline-none focus:ring-1 focus:ring-primary/30"},ge.id)),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"button",onClick:()=>ml(G),className:"p-1 text-muted-foreground hover:text-destructive",children:l.jsx(un,{className:"w-3 h-3"})})})]},G)),l.jsxs("button",{type:"button",onClick:fl,className:"w-full px-3 py-2 text-xs text-muted-foreground hover:bg-muted/60 flex items-center justify-center gap-1",children:[l.jsx(Pt,{className:"w-3 h-3"}),""]})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),l.jsx("textarea",{value:P.note??"",onChange:R=>cn("note",R.target.value),rows:2,className:"w-full px-3 py-2 border border-input rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 resize-none"})]}),l.jsx("div",{className:"pt-2",children:l.jsx("button",{type:"button",onClick:Ns,className:"w-full py-3 rounded-2xl bg-primary text-primary-foreground text-sm font-medium shadow-md hover:opacity-90 transition-opacity",children:""})})]})]})}),l.jsx("nav",{className:"fixed bottom-0 left-0 right-0 glass-nav px-5 py-4",children:l.jsx("button",{onClick:$e,className:"w-full py-4 bg-primary text-primary-foreground rounded-2xl shadow-lg hover:opacity-90 transition-opacity",children:""})})]})}function Em(g){const c=(g||"").trim();if(!c)return null;if(!c.includes("_")&&!c.includes("^"))return{children:[{type:"symbol",value:c}]};const a=N=>({children:N.split("").filter(Boolean).map(d=>/^[0-9]$/.test(d)?{type:"number",text:d}:{type:"symbol",value:d})}),p=(N,d)=>{if(N[d]==="{"){let F=0,se=d;se++,F++;const X=[];for(;se<N.length;se++){const B=N[se];if(B==="{"){F++,X.push(B);continue}if(B==="}"){if(F--,F===0){se++;break}X.push(B);continue}X.push(B)}return{text:X.join(""),next:se}}let L=d;const U=[];for(;L<N.length;L++){const F=N[L];if(F==="_"||F==="^")break;U.push(F)}return U.length===0?{text:N[d]??"",next:d+1}:{text:U.join(""),next:L}};let v=0,z="";for(;v<c.length&&c[v]!=="_"&&c[v]!=="^";)z+=c[v],v++;let S=a(z||c[0]);for(;v<c.length;){const N=c[v];if(N!=="_"&&N!=="^"){S=a((z+c.slice(v)).trim());break}const{text:d,next:L}=p(c,v+1),U=a(d);N==="_"?S={children:[{type:"subscript",base:S,index:U}]}:S={children:[{type:"superscript",base:S,exponent:U}]},v=L}return{children:[S.children.length===1?S.children[0]:{type:"symbol",value:c}]}}function fc({value:g,className:c}){const a=T.useMemo(()=>Em(g),[g]);return l.jsx(vn,{root:a,fallback:g,className:c})}function _m(){const g=de.getFormulas(),c=new Map;return Object.values(g).forEach(a=>{(a.symbols||[]).forEach(p=>{const v=(p.symbol||"").trim();if(!v)return;c.has(v)||c.set(v,{key:v,byFormula:[]});const z=c.get(v),S=(p.meaning||"").trim()||void 0,E=(p.unit||"").trim()||void 0;z.byFormula.some(d=>d.formulaId===a.id&&(d.meaning||"")===(S||"")&&(d.unit||"")===(E||""))||z.byFormula.push({formulaId:a.id,formulaName:a.name,meaning:S,unit:E})})}),[...c.values()].map(a=>({...a,byFormula:[...a.byFormula].sort((p,v)=>p.formulaName.localeCompare(v.formulaName))})).sort((a,p)=>a.key.localeCompare(p.key))}function mc(g){return g?g.byFormula.map((c,a)=>({id:`entry-${c.formulaId}-${a}`,title:c.formulaName,description:c.meaning||"",unit:c.unit,formulaIds:[c.formulaId],tables:[]})):[]}function Pm({onSymbolClick:g,onCreateSymbol:c}){const[a,p]=T.useState(""),[v,z]=T.useState("symbol"),[S,E]=T.useState(!1),[N,d]=T.useState(""),L=T.useRef(null),[,U]=T.useState(0);T.useEffect(()=>de.subscribe(()=>U(_=>_+1)),[]);const F=de.getSymbols(),se=T.useMemo(()=>_m(),[]),X=T.useMemo(()=>{const _=new Map;return se.forEach(A=>_.set(A.key,A)),_},[se]),B=T.useMemo(()=>{const _=Object.values(F).map(M=>M),A=new Set(_.map(M=>M.key));return se.forEach(M=>{A.has(M.key)||_.push({id:`virtual-${M.key}`,key:M.key,entries:mc(M)})}),_.sort((M,D)=>M.key.localeCompare(D.key))},[F,se]),ne=T.useMemo(()=>{const _=a.trim().toLowerCase();return _?B.filter(A=>!!(A.key.toLowerCase().includes(_)||A.aliases?.some(M=>M.toLowerCase().includes(_))||A.entries?.some(M=>(M.title+" "+M.description).toLowerCase().includes(_)))):B},[B,a]),ve=()=>{d(""),E(!0),setTimeout(()=>L.current?.focus(),0)},ee=()=>{const _=N.trim();if(!_)return;const A=Object.values(de.getSymbols()).find(D=>D.key===_);if(A){E(!1),g(A.id);return}const M=`sym-${Date.now()}`;de.saveSymbol({id:M,key:_,entries:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),E(!1),c(M)},O=T.useMemo(()=>{const _=Object.values(de.getFormulas()),A=a.trim().toLowerCase();return(A?_.filter(D=>(D.name||"").toLowerCase().includes(A)||(D.expression||"").toLowerCase().includes(A)?!0:(D.symbols||[]).some(oe=>(oe.symbol||"").toLowerCase().includes(A)||(oe.meaning||"").toLowerCase().includes(A))):_).map(D=>({id:D.id,name:D.name,symbols:(D.symbols||[]).map(oe=>({key:(oe.symbol||"").trim(),meaning:(oe.meaning||"").trim(),unit:(oe.unit||"").trim()})).filter(oe=>oe.key)})).filter(D=>D.symbols.length>0).sort((D,oe)=>D.name.localeCompare(oe.name))},[a]);return l.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[l.jsxs("div",{className:"max-w-2xl mx-auto px-4 pt-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(hc,{className:"w-4 h-4 text-muted-foreground absolute left-4 top-1/2 -translate-y-1/2"}),l.jsx("input",{value:a,onChange:_=>p(_.target.value),placeholder:"...",className:"w-full pl-10 pr-4 py-3 rounded-2xl glass-card border border-border focus:outline-none"})]}),l.jsxs("button",{onClick:()=>{const _=de.syncSymbolsFromFormulas();alert(` ${_.createdSymbols}  /  ${_.updatedAutoEntries} `)},className:"shrink-0 px-4 py-3 rounded-2xl glass-card border border-border text-sm flex items-center gap-2 hover:bg-primary/5 transition-colors",title:"",children:[l.jsx(em,{className:"w-4 h-4"})," "]})]}),l.jsxs("div",{className:"mt-4 glass-card rounded-2xl border border-border p-1 flex",children:[l.jsxs("button",{onClick:()=>z("symbol"),className:`flex-1 px-3 py-2 rounded-xl text-sm flex items-center justify-center gap-2 transition-colors ${v==="symbol"?"bg-primary text-primary-foreground":"text-foreground hover:bg-primary/5"}`,children:[l.jsx(Bf,{className:"w-4 h-4"})," "]}),l.jsxs("button",{onClick:()=>z("formula"),className:`flex-1 px-3 py-2 rounded-xl text-sm flex items-center justify-center gap-2 transition-colors ${v==="formula"?"bg-primary text-primary-foreground":"text-foreground hover:bg-primary/5"}`,children:[l.jsx(Af,{className:"w-4 h-4"})," "]})]}),v==="symbol"?l.jsx("div",{className:"mt-4 space-y-3",children:ne.length===0?l.jsx("div",{className:"glass-card rounded-2xl p-6 text-sm text-muted-foreground",children:""}):ne.map(_=>{const A=_.id.startsWith("virtual-");return l.jsxs("button",{onClick:()=>{if(A){const M=`sym-${Date.now()}`,D=X.get(_.key);de.saveSymbol({id:M,key:_.key,entries:mc(D),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),g(M)}else g(_.id)},className:"w-full text-left glass-card rounded-2xl p-4 border border-border hover:bg-primary/5 transition-colors",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(fc,{value:_.key,className:"font-semibold text-foreground"}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[_.entries?.length||0," "]})]}),l.jsx("div",{className:"mt-1 text-xs text-muted-foreground line-clamp-2",children:_.entries?.[0]?.description||(A?"":"")})]},_.id)})}):l.jsx("div",{className:"mt-4 space-y-4",children:O.length===0?l.jsx("div",{className:"glass-card rounded-2xl p-6 text-sm text-muted-foreground",children:""}):O.map(_=>l.jsxs("div",{className:"glass-card rounded-2xl border border-border overflow-hidden",children:[l.jsxs("div",{className:"px-5 py-4 flex items-center justify-between",children:[l.jsx("div",{className:"font-semibold text-foreground",children:_.name}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[_.symbols.length," "]})]}),l.jsx("div",{className:"border-t border-border divide-y divide-border",children:_.symbols.map((A,M)=>{const D=Object.values(F).find(Y=>Y.key===A.key),oe=!D,Ce=A.meaning?`${A.meaning}${A.unit?`${A.unit}`:""}`:"";return l.jsxs("button",{onClick:()=>{if(D){g(D.id);return}const Y=`sym-${Date.now()}`;de.saveSymbol({id:Y,key:A.key,entries:[{id:`entry-${_.id}-${Date.now()}`,title:_.name,description:A.meaning||"",unit:A.unit||void 0,formulaIds:[_.id],tables:[]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),g(Y)},className:"w-full text-left px-5 py-3 hover:bg-primary/5 transition-colors",children:[l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsx(fc,{value:A.key,className:"text-foreground text-base"}),l.jsx("div",{className:"text-xs text-muted-foreground",children:oe?"":`${D?.entries?.length||0}`})]}),l.jsx("div",{className:"mt-1 text-xs text-muted-foreground line-clamp-1",children:Ce})]},`${A.key}-${M}`)})})]},_.id))})]}),l.jsx("button",{onClick:ve,style:{width:64,height:64,borderRadius:9999,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"0.2s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgb(83, 190, 232)",background:"rgb(83, 190, 232)",color:"white",boxShadow:"rgba(83, 190, 232, 0.5) 0px 8px 24px -6px",outline:"none",padding:0,opacity:1,position:"fixed",right:16,bottom:"calc(16px + env(safe-area-inset-bottom) + 56px)",zIndex:110,transform:"scale(1)"},children:l.jsx(Pt,{width:24,height:24})}),S&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>E(!1)}),l.jsxs("div",{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-[92vw] max-w-md glass-card rounded-3xl border border-border p-5 shadow-2xl",children:[l.jsx("div",{className:"font-semibold",children:""}),l.jsx("div",{className:"mt-3",children:l.jsx("input",{ref:L,value:N,onChange:_=>d(_.target.value),placeholder:"k1, E, ",className:"w-full px-4 py-3 rounded-2xl border border-border bg-background/60 focus:outline-none"})}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-3 rounded-2xl border border-border text-sm",children:""}),l.jsx("button",{onClick:ee,className:"flex-1 px-4 py-3 rounded-2xl bg-primary text-primary-foreground text-sm",children:""})]})]})]})]})}function _r(g,c){return g.map(a=>{const p=[...a];for(;p.length<c;)p.push("");return p.slice(0,c)})}function Im(g){return g.split(/\r?\n/).map(p=>p.replace(/\r/g,"")).filter(p=>p.trim().length>0).map(p=>p.includes("	")?p.split("	").map(v=>v.trim()):p.includes(",")?p.split(",").map(v=>v.trim()):p.trim().split(/\s{2,}/).map(v=>v.trim()))}function Fm(){return{id:`table-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:"",columns:["",""],rows:[["",""]]}}function Lm({tables:g,onChange:c}){const a=T.useMemo(()=>Array.isArray(g)?g:[],[g]),p=()=>{c([Fm(),...a])},v=S=>{c(a.filter(E=>E.id!==S))},z=(S,E)=>{c(a.map(N=>{if(N.id!==S)return N;const d={...N,...E};return d.columns=Array.isArray(d.columns)?d.columns:[],d.rows=Array.isArray(d.rows)?d.rows:[],d.rows=_r(d.rows,d.columns.length),d}))};return l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs text-muted-foreground",children:"CSV/TSV"}),l.jsxs("button",{type:"button",onClick:p,className:"px-3 py-2 rounded-2xl bg-primary text-primary-foreground text-sm flex items-center gap-2",children:[l.jsx(Pt,{className:"w-4 h-4"})," "]})]}),a.length===0?l.jsx("div",{className:"glass-card rounded-2xl border border-border p-4 text-sm text-muted-foreground",children:""}):a.map(S=>l.jsx(Mm,{table:S,onUpdate:E=>z(S.id,E),onRemove:()=>v(S.id)},S.id))]})}function Mm({table:g,onUpdate:c,onRemove:a}){const[p,v]=T.useState(!1),[z,S]=T.useState(""),[E,N]=T.useState(!0),d=Array.isArray(g.columns)?g.columns:[],L=Array.isArray(g.rows)?g.rows:[],U=()=>{const ee=[...d,`${d.length+1}`],O=_r(L,ee.length);c({columns:ee,rows:O})},F=ee=>{const O=d.filter((A,M)=>M!==ee),_=L.map(A=>A.filter((M,D)=>D!==ee));c({columns:O,rows:_r(_,O.length)})},se=()=>{const ee=[...L,Array.from({length:d.length}).map(()=>"")];c({rows:_r(ee,d.length)})},X=ee=>{c({rows:L.filter((O,_)=>_!==ee)})},B=(ee,O,_)=>{const A=L.map((M,D)=>{if(D!==ee)return M;const oe=_r([M],d.length)[0];return oe[O]=_,oe});c({rows:A})},ne=(ee,O)=>{const _=[...d];_[ee]=O,c({columns:_})},ve=()=>{const ee=Im(z);if(ee.length===0)return;let O=[],_=[];if(E)O=ee[0].map(A=>A.trim()).filter(A=>A.length>0),_=ee.slice(1);else{const A=Math.max(...ee.map(M=>M.length));O=Array.from({length:A}).map((M,D)=>`${D+1}`),_=ee}O.length===0&&(O=["1"]),_=_r(_,O.length),c({columns:O,rows:_}),v(!1),S("")};return l.jsxs("div",{className:"glass-card rounded-2xl border border-border overflow-hidden",children:[l.jsxs("div",{className:"px-4 py-3 flex items-center justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l.jsx(cm,{className:"w-4 h-4 text-muted-foreground"}),l.jsx("input",{value:g.name||"",onChange:ee=>c({name:ee.target.value}),placeholder:"",className:"flex-1 px-3 py-2 rounded-xl border border-border bg-background/60 text-sm focus:outline-none"})]}),l.jsx("button",{type:"button",onClick:a,className:"px-3 py-2 rounded-xl border border-border text-sm text-destructive flex items-center gap-2",title:"",children:l.jsx(ui,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"px-4 pb-4 flex flex-wrap gap-2",children:[l.jsx("button",{type:"button",onClick:se,className:"px-3 py-2 rounded-xl border border-border text-sm hover:bg-primary/5",children:"+ "}),l.jsx("button",{type:"button",onClick:U,className:"px-3 py-2 rounded-xl border border-border text-sm hover:bg-primary/5",children:"+ "}),l.jsxs("button",{type:"button",onClick:()=>v(ee=>!ee),className:"px-3 py-2 rounded-xl border border-border text-sm flex items-center gap-2 hover:bg-primary/5",children:[l.jsx(_f,{className:"w-4 h-4"})," "]})]}),p?l.jsxs("div",{className:"px-4 pb-4",children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"CSV / TSV "}),l.jsx("textarea",{value:z,onChange:ee=>S(ee.target.value),rows:4,placeholder:`
	
A	1
B	2`,className:"w-full px-3 py-2 rounded-2xl border border-border bg-background/60 text-sm focus:outline-none"}),l.jsxs("div",{className:"mt-2 flex items-center justify-between gap-2",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:E,onChange:ee=>N(ee.target.checked)}),"1"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>{v(!1),S("")},className:"px-3 py-2 rounded-xl border border-border text-sm",children:""}),l.jsx("button",{type:"button",onClick:ve,className:"px-3 py-2 rounded-xl bg-primary text-primary-foreground text-sm",children:""})]})]})]}):null,l.jsx("div",{className:"overflow-x-auto border-t border-border",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-muted/30",children:[l.jsx("th",{className:"px-2 py-2 text-left font-semibold whitespace-nowrap w-10",children:"#"}),d.map((ee,O)=>l.jsx("th",{className:"px-2 py-2 text-left font-semibold whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{value:ee,onChange:_=>ne(O,_.target.value),className:"w-40 max-w-[40vw] px-2 py-1 rounded-lg border border-border bg-background/60 focus:outline-none"}),l.jsx("button",{type:"button",onClick:()=>F(O),className:"text-xs text-destructive hover:underline",title:"",children:""})]})},O))]})}),l.jsx("tbody",{children:L.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:d.length+1,className:"px-4 py-4 text-sm text-muted-foreground",children:"+ "})}):L.map((ee,O)=>l.jsxs("tr",{className:"border-t border-border",children:[l.jsx("td",{className:"px-2 py-2 text-muted-foreground whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center gap-2",children:[O+1,l.jsx("button",{type:"button",onClick:()=>X(O),className:"text-xs text-destructive hover:underline",title:"",children:""})]})}),d.map((_,A)=>l.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:l.jsx("input",{value:ee?.[A]??"",onChange:M=>B(O,A,M.target.value),className:"w-40 max-w-[40vw] px-2 py-1 rounded-lg border border-border bg-background/60 focus:outline-none"})},A))]},O))})]})}),l.jsx("div",{className:"px-4 py-3 border-t border-border",children:l.jsx("textarea",{value:g.notes||"",onChange:ee=>c({notes:ee.target.value}),placeholder:"",rows:2,className:"w-full px-3 py-2 rounded-2xl border border-border bg-background/60 text-sm focus:outline-none"})})]})}function Tm(g){const c=(g||"").trim();if(!c)return null;if(!c.includes("_")&&!c.includes("^"))return{children:[{type:"symbol",value:c}]};const a=N=>({children:N.split("").filter(Boolean).map(d=>/^[0-9]$/.test(d)?{type:"number",text:d}:{type:"symbol",value:d})}),p=(N,d)=>{if(N[d]==="{"){let F=0,se=d;se++,F++;const X=[];for(;se<N.length;se++){const B=N[se];if(B==="{"){F++,X.push(B);continue}if(B==="}"){if(F--,F===0){se++;break}X.push(B);continue}X.push(B)}return{text:X.join(""),next:se}}let L=d;const U=[];for(;L<N.length;L++){const F=N[L];if(F==="_"||F==="^")break;U.push(F)}return U.length===0?{text:N[d]??"",next:d+1}:{text:U.join(""),next:L}};let v=0,z="";for(;v<c.length&&c[v]!=="_"&&c[v]!=="^";)z+=c[v],v++;let S=a(z||c[0]);for(;v<c.length;){const N=c[v];if(N!=="_"&&N!=="^"){S=a((z+c.slice(v)).trim());break}const{text:d,next:L}=p(c,v+1),U=a(d);N==="_"?S={children:[{type:"subscript",base:S,index:U}]}:S={children:[{type:"superscript",base:S,exponent:U}]},v=L}return{children:[S.children.length===1?S.children[0]:{type:"symbol",value:c}]}}function zm({value:g,className:c}){const a=T.useMemo(()=>Tm(g),[g]);return l.jsx(vn,{root:a,fallback:g,className:c})}function Dm({symbolId:g,onBack:c,onFormulaClick:a}){const p=de.getSymbol(g),[v,z]=T.useState(!1),[S,E]=T.useState(p?.key??""),[,N]=T.useState(0);T.useEffect(()=>de.subscribe(()=>N(D=>D+1)),[]);const[d,L]=T.useState(!1),[U,F]=T.useState({title:"",description:"",tables:[]}),[se,X]=T.useState(null),B=T.useRef(null),ne=T.useMemo(()=>{if(!p)return[];const D=de.getFormulas();return Object.values(D).filter(oe=>(oe.symbols||[]).some(Ce=>(Ce.symbol||"").trim()===p.key)).map(oe=>({id:oe.id,name:oe.name,expression:oe.expression})).sort((oe,Ce)=>oe.name.localeCompare(Ce.name))},[g]);if(!p)return l.jsx("div",{className:"min-h-screen bg-gray-50 pb-24",children:l.jsxs("div",{className:"max-w-2xl mx-auto px-4 pt-6",children:[l.jsxs("button",{onClick:c,className:"flex items-center gap-2 text-sm text-muted-foreground",children:[l.jsx(ec,{className:"w-4 h-4"})," "]}),l.jsx("div",{className:"mt-4 glass-card rounded-2xl p-6 border border-border",children:""})]})});const ve=D=>{de.saveSymbol({...D,updatedAt:new Date().toISOString()})},ee=()=>{X(null),F({title:"",description:"",unit:"",source:"",tables:[]}),L(!0),setTimeout(()=>B.current?.focus(),0)},O=D=>{X(D.id),F(JSON.parse(JSON.stringify(D))),L(!0),setTimeout(()=>B.current?.focus(),0)},_=()=>{const D=(U.title||"").trim(),oe=(U.description||"").trim();if(!D&&!oe)return;const Ce={id:se||`entry-${Date.now()}`,title:D||p.key,description:oe,unit:(U.unit||"").trim()||void 0,source:(U.source||"").trim()||void 0,sceneId:U.sceneId,formulaIds:U.formulaIds||void 0,tables:U.tables||[]},Y=[...p.entries||[]],xe=Y.findIndex(je=>je.id===Ce.id);xe>=0?Y[xe]=Ce:Y.unshift(Ce),ve({...p,entries:Y}),L(!1)},A=D=>{confirm("")&&ve({...p,entries:(p.entries||[]).filter(oe=>oe.id!==D)})},M=()=>{confirm("")&&(de.deleteSymbol(p.id),c())};return l.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[l.jsxs("div",{className:"max-w-2xl mx-auto px-4 pt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("button",{onClick:c,className:"flex items-center gap-2 text-sm text-muted-foreground",children:[l.jsx(ec,{className:"w-4 h-4"})," "]}),l.jsxs("button",{onClick:M,className:"text-sm text-destructive flex items-center gap-1",children:[l.jsx(ui,{className:"w-4 h-4"})," "]})]}),l.jsxs("div",{className:"mt-4 glass-card rounded-3xl border border-border p-5",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"flex-1",children:[v?l.jsx("input",{value:S,onChange:D=>E(D.target.value),className:"w-full px-4 py-3 rounded-2xl border border-border bg-background/60 focus:outline-none text-lg"}):l.jsx(zm,{value:p.key,className:"text-2xl font-bold text-foreground"}),l.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:["",p.entries?.length||0," "]})]}),v?l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>z(!1),className:"px-3 py-2 rounded-2xl border border-border text-sm",children:""}),l.jsx("button",{onClick:()=>{const D=S.trim();D&&(ve({...p,key:D}),z(!1))},className:"px-3 py-2 rounded-2xl bg-primary text-primary-foreground text-sm",children:""})]}):l.jsxs("button",{onClick:()=>{E(p.key),z(!0)},className:"px-3 py-2 rounded-2xl border border-border text-sm flex items-center gap-1",children:[l.jsx(tc,{className:"w-4 h-4"})," "]})]}),l.jsx("div",{className:"mt-4 flex gap-2",children:l.jsxs("button",{onClick:ee,className:"flex-1 px-4 py-3 rounded-2xl bg-primary text-primary-foreground text-sm flex items-center justify-center gap-2",children:[l.jsx(Pt,{className:"w-4 h-4"})," "]})})]}),l.jsx("div",{className:"mt-4 space-y-3",children:(p.entries||[]).length===0?l.jsx("div",{className:"glass-card rounded-2xl p-6 border border-border text-sm text-muted-foreground",children:""}):(p.entries||[]).map(D=>l.jsxs("div",{className:"glass-card rounded-2xl border border-border p-4",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-foreground",children:D.title}),D.unit?l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["",D.unit]}):null,D.source?l.jsxs("div",{className:"text-xs text-muted-foreground",children:["",D.source]}):null]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>O(D),className:"px-3 py-2 rounded-2xl border border-border text-sm flex items-center gap-1",children:[l.jsx(tc,{className:"w-4 h-4"})," "]}),l.jsx("button",{onClick:()=>A(D.id),className:"px-3 py-2 rounded-2xl border border-border text-sm text-destructive flex items-center gap-1",children:l.jsx(ui,{className:"w-4 h-4"})})]})]}),D.description?l.jsx("div",{className:"mt-3 text-sm text-foreground whitespace-pre-wrap",children:D.description}):null,(D.tables||[]).length>0?l.jsx("div",{className:"mt-4 space-y-3",children:(D.tables||[]).map(oe=>l.jsxs("div",{className:"border border-border rounded-2xl overflow-hidden",children:[l.jsx("div",{className:"px-4 py-2 bg-primary/5 text-sm font-semibold",children:oe.name}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsx("tr",{className:"bg-muted/30",children:oe.columns.map((Ce,Y)=>l.jsx("th",{className:"px-3 py-2 text-left font-semibold whitespace-nowrap",children:Ce},Y))})}),l.jsx("tbody",{children:oe.rows.map((Ce,Y)=>l.jsx("tr",{className:"border-t border-border",children:oe.columns.map((xe,je)=>l.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:Ce[je]??""},je))},Y))})]})}),oe.notes?l.jsx("div",{className:"px-4 py-2 text-xs text-muted-foreground",children:oe.notes}):null]},oe.id))}):null]},D.id))}),l.jsxs("div",{className:"mt-4 glass-card rounded-2xl border border-border p-4",children:[l.jsx("div",{className:"font-semibold text-foreground",children:""}),ne.length===0?l.jsx("div",{className:"mt-2 text-sm text-muted-foreground",children:""}):l.jsx("div",{className:"mt-2 space-y-2",children:ne.map(D=>l.jsxs("button",{onClick:()=>a(D.id),className:"w-full text-left px-3 py-3 rounded-2xl border border-border hover:bg-primary/5 transition-colors",children:[l.jsx("div",{className:"font-semibold text-foreground",children:D.name}),l.jsx("div",{className:"text-xs text-muted-foreground line-clamp-1",children:D.expression})]},D.id))})]})]}),d&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>L(!1)}),l.jsxs("div",{className:["fixed z-50 left-3 right-3 top-3","bottom-[calc(12px+env(safe-area-inset-bottom)+80px)]","sm:left-1/2 sm:right-auto sm:top-1/2 sm:bottom-auto sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-[94vw] sm:max-w-xl","glass-card rounded-3xl border border-border shadow-2xl flex flex-col"].join(" "),style:{padding:16,maxHeight:"calc(100dvh - 24px - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 80px)"},children:[l.jsx("div",{className:"font-semibold shrink-0",children:se?"":""}),l.jsxs("div",{className:"mt-3 flex-1 overflow-y-auto pr-2 overscroll-contain",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("input",{ref:B,value:U.title||"",onChange:D=>F({...U,title:D.target.value}),placeholder:"k1",className:"w-full px-4 py-3 rounded-2xl border border-border bg-background/60 focus:outline-none"}),l.jsx("input",{value:U.unit||"",onChange:D=>F({...U,unit:D.target.value}),placeholder:"",className:"w-full px-4 py-3 rounded-2xl border border-border bg-background/60 focus:outline-none"}),l.jsx("input",{value:U.source||"",onChange:D=>F({...U,source:D.target.value}),placeholder:"/",className:"w-full px-4 py-3 rounded-2xl border border-border bg-background/60 focus:outline-none"}),l.jsx("textarea",{value:U.description||"",onChange:D=>F({...U,description:D.target.value}),placeholder:"",rows:5,className:"w-full px-4 py-3 rounded-2xl border border-border bg-background/60 focus:outline-none"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("div",{className:"font-semibold text-sm mb-2",children:""}),l.jsx("div",{className:"mt-2 max-h-[38dvh] overflow-y-auto rounded-2xl border border-border/60 bg-background/30 p-2",children:l.jsx(Lm,{tables:U.tables||[],onChange:D=>F({...U,tables:D})})})]})]}),l.jsxs("div",{className:"mt-4 flex gap-2 shrink-0 pt-3 border-t border-border/60",children:[l.jsx("button",{onClick:()=>L(!1),className:"flex-1 px-4 py-3 rounded-2xl border border-border text-sm",children:""}),l.jsx("button",{onClick:_,className:"flex-1 px-4 py-3 rounded-2xl bg-primary text-primary-foreground text-sm",children:""})]})]})]})]})}function Rm(){const[g,c]=T.useState(0),[a,p]=T.useState({currentPage:"scenes",selectedScenario:null,selectedFormula:null,selectedSymbol:null,targetStepId:null,previousPage:null,tempFormula:null,returnSource:null,editEntryState:null});T.useEffect(()=>de.subscribe(()=>{c(D=>D+1)}),[]);const v=(M,D)=>{p({...a,currentPage:"stepList",selectedScenario:M,targetStepId:D||null,previousPage:a.currentPage,returnSource:"home-scenario"})},z=M=>{p({...a,currentPage:"formulaDetail",selectedFormula:M,previousPage:"stepList",returnSource:"stepList"})},S=M=>{p({...a,currentPage:"formulaDetail",selectedFormula:M,previousPage:a.currentPage,returnSource:"home-formula"})},E=M=>{p({...a,currentPage:"symbolDetail",selectedSymbol:M,previousPage:a.currentPage})},N=(M,D)=>{p({...a,currentPage:"stepList",selectedScenario:M,targetStepId:D,previousPage:"formulaDetail",returnSource:"home-scenario"})},d=M=>{p({...a,currentPage:"formulaDetail",selectedFormula:M,previousPage:"formulaDetail"})},L=()=>{p({...a,currentPage:"learning",previousPage:a.currentPage})},U=()=>{p({...a,currentPage:"formulaStructureEdit",selectedFormula:null,previousPage:a.currentPage,editEntryState:{returnPage:a.currentPage,returnSource:"home-formula",selectedScenario:null,selectedFormula:null,selectedSymbol:null}})},F=()=>{p({...a,currentPage:"formulaStructureEdit",previousPage:"formulaDetail",editEntryState:{returnPage:"formulaDetail",returnSource:a.returnSource,selectedScenario:a.selectedScenario,selectedFormula:a.selectedFormula,selectedSymbol:a.selectedSymbol}})},se=(M,D)=>{p({...a,currentPage:"formulaInfoEdit",tempFormula:{...a.tempFormula,expression:M,structureData:D},previousPage:"formulaStructureEdit"})},X=()=>{p({...a,currentPage:"formulaStructureEdit",previousPage:"formulaInfoEdit"})},B=()=>{if(confirm(""))if(a.editEntryState){const M=a.editEntryState;p({currentPage:M.returnPage,selectedScenario:M.selectedScenario,selectedFormula:M.selectedFormula,selectedSymbol:M.selectedSymbol,targetStepId:null,previousPage:null,tempFormula:null,returnSource:M.returnSource,editEntryState:null})}else ee()},ne=M=>{const D=a.selectedFormula||"f"+Date.now(),oe=a.tempFormula?.expression||"",Ce=a.tempFormula?.structureData,Y={id:D,name:M.name||` ${D}`,expression:oe,description:M.description,equivalentExpressions:M.equivalentExpressions,symbols:M.symbols.map(xe=>({symbol:xe.symbol,meaning:xe.meaning,unit:xe.unit||void 0})),usedInContexts:M.usedInContexts,usedFormulas:M.usedFormulas,derivableFormulas:M.derivableFormulas,structureData:Ce,structureTree:Ce};if(de.saveFormula(Y),a.editEntryState){const xe=a.editEntryState,je=a.selectedFormula||D;p({currentPage:xe.returnPage,selectedFormula:je,selectedScenario:xe.selectedScenario,selectedSymbol:xe.selectedSymbol,targetStepId:null,previousPage:null,tempFormula:null,returnSource:xe.returnSource,editEntryState:null})}else ee()},ve=()=>{a.currentPage==="formulaDetail"?a.returnSource==="stepList"?p({...a,currentPage:"stepList",selectedFormula:null,previousPage:null}):p({currentPage:"formulas",selectedScenario:null,selectedFormula:null,selectedSymbol:null,targetStepId:null,previousPage:null,tempFormula:null,returnSource:null,editEntryState:null}):a.currentPage==="symbolDetail"?p({...a,currentPage:"symbols",selectedSymbol:null,previousPage:null}):a.currentPage==="stepList"?p({currentPage:"scenes",selectedScenario:null,selectedFormula:null,selectedSymbol:null,targetStepId:null,previousPage:null,tempFormula:null,returnSource:null,editEntryState:null}):a.previousPage&&p({...a,currentPage:a.previousPage,previousPage:null})},ee=()=>{p({currentPage:"scenes",selectedScenario:null,selectedFormula:null,selectedSymbol:null,targetStepId:null,previousPage:null,tempFormula:null,returnSource:null,editEntryState:null})},O=()=>{p({...a,currentPage:"scenes",selectedScenario:null,selectedFormula:null,selectedSymbol:null,targetStepId:null,previousPage:null,returnSource:null,editEntryState:null,tempFormula:null})},_=()=>{p({...a,currentPage:"formulas",selectedScenario:null,selectedFormula:null,selectedSymbol:null,targetStepId:null,previousPage:null,returnSource:null,editEntryState:null,tempFormula:null})},A=()=>{p({...a,currentPage:"symbols",selectedScenario:null,selectedFormula:null,selectedSymbol:null,targetStepId:null,previousPage:null,returnSource:null,editEntryState:null,tempFormula:null})};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.currentPage==="scenes"&&l.jsx(ic,{fixedMode:"scenario",onScenarioClick:v,onFormulaClick:S,onCreateFormula:U}),a.currentPage==="formulas"&&l.jsx(ic,{fixedMode:"formula",onScenarioClick:v,onFormulaClick:S,onCreateFormula:U}),a.currentPage==="symbols"&&l.jsx(Pm,{onSymbolClick:E,onCreateSymbol:M=>{M&&E(M)}}),a.currentPage==="symbolDetail"&&a.selectedSymbol&&l.jsx(Dm,{symbolId:a.selectedSymbol,onBack:ve,onFormulaClick:d}),a.currentPage==="stepList"&&a.selectedScenario&&l.jsx(ym,{scenarioId:a.selectedScenario,targetStepId:a.targetStepId,onBack:ve,onFormulaClick:z,onLearningClick:L}),a.currentPage==="formulaDetail"&&a.selectedFormula&&l.jsx(vm,{formulaId:a.selectedFormula,onBack:ve,onEdit:F,onLearningClick:L,onFormulaClick:d,onContextClick:N,onSymbolClick:E}),a.currentPage==="learning"&&l.jsx(Nm,{onBack:ve,onNavigateHome:ee}),a.currentPage==="formulaStructureEdit"&&l.jsx(km,{formulaId:a.selectedFormula,draftExpression:a.tempFormula?.expression||void 0,draftStructureData:a.tempFormula?.structureData||a.tempFormula?.structureTree||void 0,onNext:se,onCancel:B}),a.currentPage==="formulaInfoEdit"&&l.jsx(Cm,{formulaId:a.selectedFormula,expression:a.tempFormula?.expression||"",structureData:a.tempFormula?.structureTree||a.tempFormula?.structureData,onSave:ne,onBack:X,onCancel:B}),(()=>{if(a.currentPage==="formulaStructureEdit"||a.currentPage==="formulaInfoEdit")return null;const M=a.currentPage==="formulaDetail"?"formulas":a.currentPage==="stepList"?"scenes":a.currentPage==="symbolDetail"?"symbols":a.currentPage;return["scenes","formulas","symbols","learning"].includes(M)?l.jsx(fi,{currentPage:M,onNavigateScenes:O,onNavigateFormulas:_,onNavigateSymbols:A,onNavigateLearning:L}):null})()]})}gf.createRoot(document.getElementById("root")).render(l.jsx(Rm,{}));
